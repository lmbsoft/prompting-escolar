<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laboratorio Personal de IA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.292.0"
      }
    }
  </script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    :root {
      --text: #0f172a;
      --bg: #f8fafc;
      --focus: #0ea5e9;
    }

    html {
      font-size: clamp(18px, 1.2vw + 14px, 22px);
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

    body {
      background: var(--bg);
      color: var(--text);
      line-height: 1.72;
      letter-spacing: 0.01em;
    }

    p,
    li,
    label,
    input,
    textarea,
    select,
    button {
      font-size: 1rem;
    }

    h1,
    h2,
    h3,
    h4,
    h5 {
      line-height: 1.3;
      letter-spacing: 0.005em;
    }

    button,
    input,
    textarea,
    select {
      min-height: 48px;
      border-radius: 0.75rem;
    }

    textarea {
      min-height: 120px;
    }

    button:focus-visible,
    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible,
    a:focus-visible {
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }

    @media (max-width: 768px) {
      button,
      input,
      textarea,
      select {
        min-height: 52px;
      }
    }

    @media (prefers-reduced-motion: reduce) {

      *,
      *::before,
      *::after {
        animation: none !important;
        transition: none !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-800">
  <div id="root"></div>
  <script type="text/babel" data-type="module">
    import React, { useMemo, useState } from 'react';
    import { createRoot } from 'react-dom/client';
    import {
      BrainCircuit, GraduationCap, Gamepad2, MessageCircle, BookOpen, Sparkles,
      ShieldAlert, CheckCircle2, ChevronLeft, ChevronRight, Copy, Check,
      Target, Lightbulb, Clock, PenSquare, Microscope, Library, ArrowUpRight,
      ClipboardList
    } from 'lucide-react';

    const theoryModules = [
      {
        id: 't1',
        title: 'Cómo funciona un asistente conversacional',
        subtitle: 'Modelo mental claro para usar mejor la tecnología',
        reading: [
          'Un asistente conversacional no piensa como una persona. Funciona prediciendo qué texto viene después a partir de patrones aprendidos en grandes volúmenes de información. Su fortaleza es la velocidad para combinar ideas y redactar, no la certeza absoluta de cada dato.',
          'La clave práctica es esta: no lo trates como una autoridad final, trátalo como un colaborador de borradores, de estructura y de exploración. Si le haces un pedido genérico, responderá de forma genérica. Si le das contexto, objetivo y criterio, la calidad sube de manera notable.',
          'Cuando veas una respuesta impecable en el tono, recuerda que eso no garantiza exactitud. El estilo convincente y la precisión factual son cosas distintas. En tu rutina, conviene separar siempre una etapa de generación y otra de validación.'
        ],
        checklist: [
          'Definir para qué quieres usar la IA antes de escribir el prompt.',
          'Separar ideas preliminares de conclusiones finales.',
          'Verificar datos concretos (fechas, autores, cifras, leyes) en fuentes externas.'
        ],
        practice: 'Ejercicio rápido: pídele a la IA una explicación de un tema que conoces bien. Señala qué partes te resultan precisas y cuáles son vagas. Ese contraste te entrena para usarla con criterio.'
      },
      {
        id: 't2',
        title: 'La anatomía de un buen prompt',
        subtitle: 'Del pedido difuso a la instrucción útil',
        reading: [
          'Un prompt de calidad suele tener cinco piezas: rol, objetivo, contexto, formato de salida y criterio de calidad. No siempre necesitas las cinco, pero cuanto más claro seas, menor será la ambigüedad de respuesta.',
          'Ejemplo breve. Pedido difuso: "Explícame este tema". Pedido útil: "Actúa como editor académico. Explícame este tema en 5 apartados, con lenguaje claro, ejemplos de vida cotidiana y un cierre en 8 líneas".',
          'La práctica más valiosa es iterar: leer la primera respuesta, detectar lo que falta y pedir mejora específica. No es un error que la primera salida no sea perfecta; es parte natural del proceso de trabajo.'
        ],
        checklist: [
          'Especificar para quién se escribe (tu audiencia).',
          'Pedir estructura explícita (lista, tabla, esquema, guion).',
          'Pedir límites: longitud, tono, profundidad, exclusiones.'
        ],
        practice: 'Ejercicio rápido: toma un prompt que uses hoy y reescríbelo agregando rol + formato + criterio. Compara ambas respuestas.'
      },
      {
        id: 't3',
        title: 'Prompts secuenciales sin fricción',
        subtitle: 'Cómo avanzar por bloques en lugar de pedir todo junto',
        reading: [
          'Cuando un proyecto es amplio (escribir un ensayo, armar un curso, planificar un taller), conviene dividir la conversación en bloques cortos. Primero marco general, luego sección por sección, luego edición final.',
          'Esta estrategia evita la sensación de "respuesta interminable" y te permite mantener el control del contenido. Cada bloque termina con una decisión tuya: continuar, corregir o cambiar de dirección.',
          'Piensa en la IA como una mesa de trabajo: primero bosquejo, después desarrollo, luego pulido. Ese orden produce mejores resultados y menos cansancio cognitivo.'
        ],
        checklist: [
          'Bloque 1: mapa del trabajo.',
          'Bloque 2: desarrollo de una parte por vez.',
          'Bloque 3: revisión crítica y versión final.'
        ],
        practice: 'Ejercicio rápido: en tu próximo tema, prohíbe respuestas largas en la primera interacción. Pide primero solo esquema y decide paso a paso.'
      },
      {
        id: 't4',
        title: 'Cómo pedir profundidad sin perder claridad',
        subtitle: 'Aprender en serio sin textos confusos',
        reading: [
          'Una buena consigna para estudiar combina profundidad conceptual y claridad expositiva. Puedes pedir: "explica con rigor, pero sin jerga innecesaria", y además solicitar ejemplos concretos y contraejemplos.',
          'Si un concepto aparece abstracto, pide reformulación en tres niveles: explicación breve, explicación detallada y aplicación práctica. Ese patrón vuelve más didáctica cualquier conversación.',
          'También ayuda pedir síntesis intermedias: "resume en 5 ideas antes de seguir". Esto te permite chequear comprensión y evitar acumular información sin procesar.'
        ],
        checklist: [
          'Pedir definición + ejemplo + contraejemplo.',
          'Solicitar reformulación en niveles (breve / medio / aplicado).',
          'Pedir mini síntesis antes de cambiar de subtema.'
        ],
        practice: 'Ejercicio rápido: elige un concepto complejo y pide a la IA tres versiones de explicación (150, 400 y 700 palabras).' 
      },
      {
        id: 't5',
        title: 'Verificación inteligente de respuestas',
        subtitle: 'Método simple para separar utilidad y confianza',
        reading: [
          'Una respuesta puede ser útil para pensar, pero no necesariamente confiable como dato. Esta distinción ahorra errores. Usa la IA para ordenar preguntas, no para cerrar discusiones sensibles sin contraste.',
          'Un protocolo práctico de verificación: identificar afirmaciones críticas, pedir a la IA que marque qué parte es hipótesis y qué parte es dato verificable, y luego contrastar en al menos dos fuentes independientes.',
          'Si tu objetivo es producir algo publicable (texto, clase, informe), reserva un bloque final de auditoría factual. Ese paso profesionaliza el resultado.'
        ],
        checklist: [
          'Detectar afirmaciones que requieren fuente.',
          'Separar interpretación de hecho verificable.',
          'Contrastar con fuentes oficiales o especializadas.'
        ],
        practice: 'Ejercicio rápido: toma una respuesta de IA y subraya tres datos "duros". Verifica cada uno por fuera de la conversación.'
      },
      {
        id: 't6',
        title: 'Escritura asistida para proyectos personales',
        subtitle: 'Memorias, ensayos, artículos, talleres y material didáctico',
        reading: [
          'La IA puede ayudarte a transformar experiencia acumulada en piezas concretas: capítulos, actividades de taller, notas breves, entrevistas, reseñas o guiones. El valor no está en delegar tu voz, sino en acelerar la organización de tus ideas.',
          'Una práctica potente: escribir primero en bruto con tu estilo y luego pedir edición en capas (claridad, ritmo, coherencia, cierre). Así mantienes autoría, pero mejoras calidad.',
          'Cuando trabajes con historias de vida, conviene pedir respeto por el tono personal y evitar "correcciones" que borren tu identidad narrativa.'
        ],
        checklist: [
          'Definir la intención del texto antes de redactar.',
          'Pedir edición por capas, no reemplazo total.',
          'Mantener ejemplos y lenguaje propios como marca personal.'
        ],
        practice: 'Ejercicio rápido: toma una página escrita por ti y pide tres ediciones distintas: académica, divulgativa y conversacional.'
      },
      {
        id: 't7',
        title: 'Diseñar conversaciones útiles en el tiempo',
        subtitle: 'De una consulta aislada a una práctica sostenida',
        reading: [
          'Si usas IA solo para resolver una duda puntual, el impacto es limitado. Si construyes una rutina semanal con objetivos, registro y revisión, el beneficio crece de forma acumulativa.',
          'Puedes organizar tu práctica con una bitácora mínima: fecha, tema, prompt usado, resultado útil, error detectado, próxima mejora. En pocas semanas tendrás un repertorio propio muy valioso.',
          'Esta metodología convierte la interacción con IA en un proceso de aprendizaje activo y no en consumo pasivo de respuestas.'
        ],
        checklist: [
          'Definir objetivo semanal (uno, no diez).',
          'Registrar prompts que sí funcionaron.',
          'Cerrar cada sesión con una mejora concreta para la próxima.'
        ],
        practice: 'Ejercicio rápido: crea una bitácora de 7 días y anota solo una cosa por día que mejoraste al pedir.'
      },
      {
        id: 't8',
        title: 'Seguridad y privacidad en uso cotidiano',
        subtitle: 'Buenas prácticas para experimentar con tranquilidad',
        reading: [
          'Regla base: nunca compartir datos sensibles innecesarios. Si necesitas consultar un caso personal, anonimiza nombres, direcciones, números de documento, teléfonos y cualquier dato identificable.',
          'En temas de salud, finanzas o trámites, usar IA para ordenar preguntas es útil; usarla como sustituto de profesionales no lo es. Mantener ese límite mejora tanto seguridad como calidad de decisiones.',
          'También conviene evitar sesiones interminables. Un buen diseño de uso incluye pausas, objetivos acotados y cierre claro de cada interacción.'
        ],
        checklist: [
          'Anonimizar siempre información personal.',
          'Pedir orientación general, no diagnósticos cerrados.',
          'Definir un tiempo de uso con inicio y cierre.'
        ],
        practice: 'Ejercicio rápido: reescribe un caso real quitando todo dato personal y compáralo con la versión original.'
      },
      {
        id: 't9',
        title: 'Del entusiasmo a la maestría práctica',
        subtitle: 'Cómo sostener motivación con resultados concretos',
        reading: [
          'La motivación aumenta cuando hay evidencia de progreso. Por eso es útil cerrar cada sesión con un producto pequeño terminado: una ficha, un esquema, una pregunta mejor formulada o una página revisada.',
          'No necesitas dominar todas las funciones de la IA para obtener valor. Necesitas dominar tu propio método de uso: preguntar mejor, revisar mejor y decidir mejor.',
          'El objetivo no es impresionar al sistema; el objetivo es que la tecnología te devuelva tiempo, claridad y satisfacción intelectual en proyectos que te importan.'
        ],
        checklist: [
          'Cerrar cada sesión con una salida concreta.',
          'Elegir proyectos cercanos a tus intereses reales.',
          'Medir progreso en calidad, no en cantidad de mensajes.'
        ],
        practice: 'Ejercicio rápido: define tres proyectos personales para las próximas cuatro semanas y escribe un primer prompt para cada uno.'
      },
      {
        id: 't10',
        title: 'Técnicas de Prompting que elevan resultados',
        subtitle: 'Un método práctico para pedir mejor y revisar mejor',
        reading: [
          'Si quieres que la IA trabaje a tu favor, no alcanza con “dar una orden”. Conviene diseñar la consulta como una pequeña arquitectura: rol, objetivo, contexto, formato de salida, criterios de calidad y plan de iteración.',
          'Una técnica muy útil es “intento y mejora”: primero pides un borrador acotado, luego detectas lo que falta, y finalmente das una segunda instrucción más precisa. Ese segundo paso suele multiplicar la calidad de salida.',
          'Otra técnica clave es pedir autoevaluación: “antes de cerrar, revisa coherencia, precisión y límites del resultado”. Esto no reemplaza tu criterio, pero reduce errores típicos y mejora la versión inicial.'
        ],
        checklist: [
          'Prompt malo: demasiado corto, sin contexto ni formato esperado.',
          'Prompt intermedio: define objetivo y formato, pero sin criterios de calidad.',
          'Prompt robusto: objetivo + contexto + formato + criterios + iteración.'
        ],
        practice: 'Ejercicio rápido: toma un prompt que uses seguido y escribe tres versiones (mala, intermedia y robusta). Compara qué cambia en la respuesta.'
      }
    ];

    const promptLevels = [
      { id: 'inicio', label: 'Nivel 1: Exploración guiada', hint: 'Para empezar con seguridad y foco.' },
      { id: 'profundizar', label: 'Nivel 2: Trabajo con precisión', hint: 'Para producir resultados más sólidos.' },
      { id: 'proyectar', label: 'Nivel 3: Interacción sofisticada', hint: 'Para proyectos largos y motivantes.' }
    ];

    const promptItems = [
      {
        id: 'p1',
        level: 'inicio',
        domain: 'Escritura personal',
        title: 'Mapa de recuerdos para un texto autobiográfico',
        objective: 'Organizar experiencias de vida antes de escribir.',
        prompt: `Actúa como editor de narrativa personal. Quiero escribir un texto autobiográfico de 1200 palabras. Antes de redactar, ayúdame a construir un mapa con 5 momentos clave de mi vida. Para cada momento, incluye: contexto, emoción principal, aprendizaje y posible título del apartado.`,
        why: 'Transforma recuerdos dispersos en una estructura clara y accionable.'
      },
      {
        id: 'p2',
        level: 'inicio',
        domain: 'Docencia',
        title: 'Clase breve para explicar un concepto difícil',
        objective: 'Traducir conocimiento complejo a lenguaje claro.',
        prompt: `Actúa como docente con experiencia en divulgación. Explícame [tema] en 4 bloques: 1) idea central en lenguaje simple, 2) ejemplo cotidiano, 3) error típico, 4) mini actividad de 5 minutos para verificar comprensión.`,
        why: 'Te da una plantilla didáctica reutilizable para enseñar.'
      },
      {
        id: 'p3',
        level: 'inicio',
        domain: 'Lectura crítica',
        title: 'Resumen inteligente de un artículo',
        objective: 'Comprender rápido sin perder profundidad.',
        prompt: `Voy a pegar un artículo. Resume en este formato: tesis principal, 5 ideas clave, 3 preguntas abiertas y 2 puntos discutibles. Mantén un tono claro y evita afirmaciones que no estén en el texto.`,
        why: 'Pasas de lectura pasiva a análisis activo.'
      },
      {
        id: 'p4',
        level: 'inicio',
        domain: 'Organización',
        title: 'Agenda de aprendizaje semanal',
        objective: 'Sostener práctica constante sin saturación.',
        prompt: `Diseña una agenda semanal de aprendizaje en IA para 5 días, con sesiones de 40 minutos. Cada día debe incluir: objetivo, actividad principal, resultado concreto esperado y pregunta de cierre para reflexionar.`,
        why: 'Convierte el interés en un hábito real y medible.'
      },
      {
        id: 'p5',
        level: 'inicio',
        domain: 'Proyecto editorial',
        title: 'Índice inicial para un libro breve',
        objective: 'Pasar de idea general a estructura de capítulos.',
        prompt: `Quiero desarrollar un libro breve sobre [tema]. Propón 8 capítulos con título, objetivo de cada capítulo y una pregunta central que guíe la escritura. Evita lenguaje grandilocuente; prioriza claridad.`,
        why: 'Evita el bloqueo inicial y ordena el proyecto desde el principio.'
      },
      {
        id: 'p6',
        level: 'inicio',
        domain: 'Vida cotidiana',
        title: 'Comparador de decisiones prácticas',
        objective: 'Analizar opciones de forma razonada.',
        prompt: `Necesito comparar tres opciones para [decisión concreta]. Crea una tabla con criterios: costo, tiempo, esfuerzo, beneficio esperado y riesgo. Después, dame una recomendación condicional (si priorizo tiempo, si priorizo calidad, si priorizo ahorro).`,
        why: 'Ayuda a decidir con criterios explícitos en lugar de intuición difusa.'
      },
      {
        id: 'p7',
        level: 'inicio',
        domain: 'Comunicación',
        title: 'Mensaje claro y respetuoso',
        objective: 'Redactar comunicaciones difíciles con buen tono.',
        prompt: `Actúa como editor de comunicación interpersonal. Necesito enviar un mensaje sobre [situación]. Dame tres versiones: breve, equilibrada y formal. Cada versión debe ser respetuosa, concreta y sin frases ambiguas.`,
        why: 'Te permite elegir el tono adecuado según contexto.'
      },
      {
        id: 'p8',
        level: 'inicio',
        domain: 'Aprendizaje digital',
        title: 'Guía paso a paso de una aplicación',
        objective: 'Aprender herramientas nuevas con menos frustración.',
        prompt: `Actúa como instructor paciente. Quiero aprender [aplicación]. Crea una guía de 7 pasos con: acción exacta, error frecuente y cómo corregirlo. Cierra con una checklist para practicar de forma autónoma.`,
        why: 'Reduce errores repetidos y acelera el aprendizaje práctico.'
      },
      {
        id: 'p9',
        level: 'inicio',
        domain: 'Creatividad',
        title: 'Generador de ideas para talleres',
        objective: 'Diseñar propuestas educativas o culturales.',
        prompt: `Proponme 10 ideas de microtalleres de 60 minutos sobre [tema]. Para cada idea incluye: público ideal, dinámica principal, materiales mínimos y resultado esperado.`,
        why: 'Te abre un banco de posibilidades aplicables rápidamente.'
      },
      {
        id: 'p10',
        level: 'inicio',
        domain: 'Investigación personal',
        title: 'Plan de estudio de un tema nuevo',
        objective: 'Entrar a un campo desconocido con método.',
        prompt: `Quiero estudiar [tema] desde cero. Dame una hoja de ruta en 4 semanas con: conceptos base, preguntas clave, ejercicio semanal y criterios para evaluar si estoy entendiendo.`,
        why: 'Ofrece una progresión clara para aprender sin dispersión.'
      },
      {
        id: 'p11',
        level: 'inicio',
        domain: 'Memoria activa',
        title: 'Tarjetas de repaso personalizadas',
        objective: 'Recordar mejor conceptos relevantes.',
        prompt: `A partir de este contenido, crea 20 tarjetas de repaso en formato pregunta-respuesta. Divide en tres niveles de dificultad y marca las 5 preguntas más importantes para revisar cada semana.`,
        why: 'Convierte cualquier lectura en práctica de recuperación activa.'
      },
      {
        id: 'p12',
        level: 'inicio',
        domain: 'Planificación cultural',
        title: 'Itinerario de lectura y cine',
        objective: 'Conectar obras con una pregunta de fondo.',
        prompt: `Diseña un itinerario de 6 semanas combinando libros y películas sobre [tema]. Incluye una pregunta guía por semana y una actividad de reflexión de 15 minutos.`,
        why: 'Integra ocio y aprendizaje en una experiencia coherente.'
      },

      {
        id: 'p13',
        level: 'profundizar',
        domain: 'Edición de textos',
        title: 'Revisión por capas de un manuscrito',
        objective: 'Mejorar un texto sin perder voz propia.',
        prompt: `Voy a pegar un texto mío. No lo reescribas completo. Trabaja en 3 capas: 1) claridad de ideas, 2) ritmo de párrafos, 3) precisión del cierre. Para cada capa, dame sugerencias puntuales y ejemplos cortos de mejora.`,
        why: 'Conserva autoría y mejora calidad con control fino.'
      },
      {
        id: 'p14',
        level: 'profundizar',
        domain: 'Pensamiento crítico',
        title: 'Debate con contraargumentos sólidos',
        objective: 'Fortalecer una postura con objeciones reales.',
        prompt: `Quiero defender esta idea: [tesis]. Actúa como contraparte exigente y presenta 5 objeciones fuertes. Después ayúdame a reformular mi tesis incorporando matices para que sea más robusta.`,
        why: 'Entrena argumentación madura y menos dogmática.'
      },
      {
        id: 'p15',
        level: 'profundizar',
        domain: 'Diseño de cursos',
        title: 'Programa de seminario en 8 sesiones',
        objective: 'Convertir experiencia en propuesta formativa.',
        prompt: `Diseña un seminario de 8 sesiones sobre [tema]. Para cada sesión incluye: objetivo, lectura breve, actividad participativa y pregunta de transferencia a la vida real.`,
        why: 'Estructura conocimiento experto en un formato enseñable.'
      },
      {
        id: 'p16',
        level: 'profundizar',
        domain: 'Fuentes',
        title: 'Matriz de verificación de afirmaciones',
        objective: 'Evaluar confiabilidad de información.',
        prompt: `Toma estas 6 afirmaciones y crea una matriz de verificación con columnas: afirmación, tipo de evidencia requerida, fuente ideal, riesgo si fuera falsa y estado de verificación.`,
        why: 'Convierte la verificación en un proceso explícito.'
      },
      {
        id: 'p17',
        level: 'profundizar',
        domain: 'Historia de vida',
        title: 'Entrevista guiada para memorias familiares',
        objective: 'Transformar recuerdos en material narrativo.',
        prompt: `Crea una entrevista de 25 preguntas para registrar memorias familiares. Organiza en bloques: infancia, trabajo, vínculos, decisiones difíciles y aprendizajes. Añade sugerencias para profundizar cada respuesta.`,
        why: 'Facilita conversaciones significativas y material para escribir.'
      },
      {
        id: 'p18',
        level: 'profundizar',
        domain: 'Productividad intelectual',
        title: 'Sistema de notas conectadas',
        objective: 'Ordenar ideas para proyectos largos.',
        prompt: `Ayúdame a diseñar un sistema simple de notas conectadas para [tema]. Quiero estructura con: nota base, notas de desarrollo, notas de objeción y nota de síntesis final.`,
        why: 'Reduce dispersión y mejora continuidad entre sesiones.'
      },
      {
        id: 'p19',
        level: 'profundizar',
        domain: 'Cultura y análisis',
        title: 'Lectura comparada de dos autores',
        objective: 'Encontrar convergencias y diferencias de enfoque.',
        prompt: `Compara estos dos autores sobre [tema]. Crea una tabla con: idea central, método, supuestos, límites y aporte actual. Cierra con 4 preguntas para discusión en grupo.`,
        why: 'Lleva la lectura a una comprensión comparativa más profunda.'
      },
      {
        id: 'p20',
        level: 'profundizar',
        domain: 'Divulgación',
        title: 'Traducción de tecnicismos a lenguaje público',
        objective: 'Comunicar temas complejos con rigor y claridad.',
        prompt: `Te pasaré un texto técnico. Reescríbelo para público general en 6 apartados, manteniendo precisión conceptual. Añade un glosario de 10 términos con definiciones simples.`,
        why: 'Permite compartir conocimiento sin perder exactitud.'
      },
      {
        id: 'p21',
        level: 'profundizar',
        domain: 'Plan de proyecto',
        title: 'Diseño de proyecto de 90 días',
        objective: 'Convertir una idea en ejecución sostenida.',
        prompt: `Quiero desarrollar [proyecto]. Diseña un plan de 90 días con fases, hitos quincenales, entregables y riesgos previsibles. Incluye indicadores simples para medir avance real.`,
        why: 'Aterriza una visión en pasos concretos y evaluables.'
      },
      {
        id: 'p22',
        level: 'profundizar',
        domain: 'IA aplicada',
        title: 'Diagnóstico de calidad de prompts',
        objective: 'Mejorar sistemáticamente cómo preguntar.',
        prompt: `Evalúa estos 5 prompts que uso habitualmente y califícalos en: claridad, contexto, formato y control de calidad. Después reescríbelos con mejoras concretas y explica cada cambio.`,
        why: 'Te da retroalimentación metodológica, no solo respuestas.'
      },
      {
        id: 'p23',
        level: 'profundizar',
        domain: 'Conversaciones significativas',
        title: 'Guion para entrevista temática',
        objective: 'Preparar charlas de calidad con otras personas.',
        prompt: `Necesito entrevistar a una persona sobre [tema]. Diseña un guion de 3 actos: apertura de confianza, núcleo de contenido y cierre reflexivo. Incluye preguntas de seguimiento.`,
        why: 'Mejora profundidad y fluidez de conversaciones reales.'
      },
      {
        id: 'p24',
        level: 'profundizar',
        domain: 'Aprendizaje continuo',
        title: 'Auditoría semanal de progreso',
        objective: 'Evaluar qué está funcionando en la práctica.',
        prompt: `Actúa como mentor de aprendizaje autónomo. Te daré mi registro semanal. Ayúdame a identificar: avances reales, cuellos de botella y un ajuste clave para la próxima semana.`,
        why: 'Mantiene foco y evita repetir errores.'
      },

      {
        id: 'p25',
        level: 'proyectar',
        domain: 'Libro completo',
        title: 'Arquitectura editorial avanzada',
        objective: 'Diseñar un libro con voz personal y rigor.',
        prompt: `Quiero desarrollar un libro sobre [tema] en 12 capítulos. Construye una arquitectura editorial con: tesis general, arco argumental, objetivos por capítulo, tipo de evidencia sugerida y preguntas de transición entre capítulos.`,
        why: 'Convierte una idea amplia en una obra coherente y sostenible.'
      },
      {
        id: 'p26',
        level: 'proyectar',
        domain: 'Curso autoral',
        title: 'Diseño integral de experiencia de aprendizaje',
        objective: 'Crear un curso propio con identidad pedagógica.',
        prompt: `Diseña un curso autoral de 10 semanas sobre [tema], con enfoque participativo. Incluye: objetivos de competencia, secuencia didáctica, actividades, evaluación formativa y proyecto final.`,
        why: 'Te permite convertir trayectoria profesional en propuesta educativa sólida.'
      },
      {
        id: 'p27',
        level: 'proyectar',
        domain: 'Laboratorio de ideas',
        title: 'Mesa crítica con roles múltiples',
        objective: 'Examinar una idea desde perspectivas distintas.',
        prompt: `Analiza esta propuesta desde 4 roles: entusiasta, crítico, evaluador práctico y editor final. Para cada rol, dame observaciones y luego una síntesis integradora con plan de acción.`,
        why: 'Simula una revisión compleja sin perder orden.'
      },
      {
        id: 'p28',
        level: 'proyectar',
        domain: 'Investigación aplicada',
        title: 'Protocolo de indagación personal',
        objective: 'Investigar un problema concreto con método.',
        prompt: `Ayúdame a construir un protocolo de investigación personal sobre [problema]. Incluye: pregunta principal, subpreguntas, fuentes, criterios de evaluación y plan de registro de hallazgos.`,
        why: 'Enmarca la curiosidad en una metodología reproducible.'
      },
      {
        id: 'p29',
        level: 'proyectar',
        domain: 'Producción audiovisual',
        title: 'Serie de microclases en video',
        objective: 'Transformar expertise en contenido audiovisual.',
        prompt: `Diseña una serie de 12 microclases en video sobre [tema], de 5 minutos cada una. Para cada episodio define objetivo, guion de apertura, ejemplo central y cierre con desafío práctico.`,
        why: 'Ofrece una vía concreta para compartir conocimiento acumulado.'
      },
      {
        id: 'p30',
        level: 'proyectar',
        domain: 'Memorias públicas',
        title: 'Curaduría de anécdotas con valor universal',
        objective: 'Seleccionar historias personales con potencia narrativa.',
        prompt: `Tengo muchas anécdotas personales. Ayúdame a curarlas para publicación. Crea criterios de selección y clasifícalas por impacto emocional, aprendizaje transferible y potencial narrativo.`,
        why: 'Permite pasar de recuerdos abundantes a narrativa publicable.'
      },
      {
        id: 'p31',
        level: 'proyectar',
        domain: 'Círculo de lectura',
        title: 'Diseño de conversaciones de alto nivel',
        objective: 'Coordinar encuentros enriquecedores.',
        prompt: `Voy a coordinar un círculo de lectura. Diseña 8 encuentros con preguntas de análisis, dilemas éticos y actividades de síntesis para que cada participante produzca una reflexión final.`,
        why: 'Escala una experiencia cultural sostenida y participativa.'
      },
      {
        id: 'p32',
        level: 'proyectar',
        domain: 'Asistencia personalizada',
        title: 'Plantilla maestra para consultas recurrentes',
        objective: 'Establecer un formato estable de trabajo con IA.',
        prompt: `Quiero una plantilla maestra para mis consultas semanales. Debe incluir: objetivo, contexto, restricción de estilo, formato de salida, criterio de calidad y pregunta de mejora para la próxima sesión.`,
        why: 'Aumenta consistencia y reduce esfuerzo al comenzar cada conversación.'
      },
      {
        id: 'p33',
        level: 'proyectar',
        domain: 'Proyectos comunitarios',
        title: 'Diseño de iniciativa cultural local',
        objective: 'Planificar actividades con impacto cercano.',
        prompt: `Quiero diseñar una iniciativa cultural local sobre [tema]. Crea un plan con propósito, público, actividades mensuales, aliados posibles, presupuesto orientativo y métricas de impacto cualitativo.`,
        why: 'Conecta aprendizaje tecnológico con acción comunitaria útil.'
      },
      {
        id: 'p34',
        level: 'proyectar',
        domain: 'Pensamiento estratégico',
        title: 'Escenarios a 5 años',
        objective: 'Proyectar decisiones con visión de largo plazo.',
        prompt: `Analiza tres escenarios a 5 años para [proyecto personal]. Para cada escenario indica oportunidades, riesgos, competencias a desarrollar y primeras acciones de bajo costo.`,
        why: 'Ayuda a elegir rumbo con perspectiva y realismo.'
      },
      {
        id: 'p35',
        level: 'proyectar',
        domain: 'Innovación personal',
        title: 'Laboratorio de experimentos mensuales',
        objective: 'Mantener curiosidad aplicada con resultados concretos.',
        prompt: `Diseña un laboratorio personal de 6 meses con un experimento por mes usando IA. Cada experimento debe tener: hipótesis, tiempo estimado, criterio de éxito y producto final visible.`,
        why: 'Convierte el entusiasmo en avances tangibles y motivantes.'
      },
      {
        id: 'p36',
        level: 'proyectar',
        domain: 'Mentoría',
        title: 'Programa para compartir experiencia acumulada',
        objective: 'Transformar trayectoria en acompañamiento a otros.',
        prompt: `Quiero crear un programa de mentoría basado en mi experiencia en [campo]. Diseña estructura de 6 encuentros, objetivos por sesión, ejercicios y recomendaciones para seguimiento entre sesiones.`,
        why: 'Te permite usar IA para multiplicar el valor de tu trayectoria.'
      }
    ];

    const levelTechniqueMap = {
      inicio: [
        'Rol explícito',
        'Objetivo concreto',
        'Formato de salida definido',
        'Lenguaje claro y acotado'
      ],
      profundizar: [
        'Restricciones de calidad',
        'Criterios de evaluación',
        'Iteración por etapas',
        'Control de ambigüedad'
      ],
      proyectar: [
        'Diseño por fases',
        'Supuestos y riesgos',
        'Entregables verificables',
        'Cierre con siguiente acción'
      ]
    };

    const roleByDomain = {
      'escritura personal': 'editor de no ficción con enfoque narrativo',
      'docencia': 'docente y diseñador pedagógico',
      'lectura crítica': 'analista de textos',
      'organización': 'planificador de aprendizaje',
      'proyecto editorial': 'editor de estructura de libros',
      'vida cotidiana': 'asistente de decisiones prácticas',
      'comunicación': 'editor de comunicación interpersonal',
      'aprendizaje digital': 'instructor digital paciente',
      'creatividad': 'facilitador creativo',
      'investigación personal': 'mentor de investigación aplicada',
      'memoria activa': 'especialista en aprendizaje activo',
      'planificación cultural': 'curador de itinerarios culturales',
      'edición de textos': 'editor de estilo y argumentación',
      'pensamiento crítico': 'oponente constructivo',
      'diseño de cursos': 'diseñador instruccional',
      'fuentes': 'asistente de verificación metodológica',
      'historia de vida': 'editor de memorias',
      'productividad intelectual': 'mentor de trabajo intelectual',
      'cultura y análisis': 'comparatista cultural',
      'divulgación': 'redactor de divulgación rigurosa',
      'plan de proyecto': 'consultor de proyectos',
      'ia aplicada': 'auditor de prompts',
      'conversaciones significativas': 'diseñador de entrevistas',
      'aprendizaje continuo': 'mentor de mejora continua',
      'libro completo': 'arquitecto editorial',
      'curso autoral': 'director académico',
      'laboratorio de ideas': 'facilitador de pensamiento estratégico',
      'investigación aplicada': 'metodólogo',
      'producción audiovisual': 'guionista pedagógico',
      'memorias públicas': 'curador narrativo',
      'círculo de lectura': 'moderador de discusión',
      'asistencia personalizada': 'diseñador de sistemas personales',
      'proyectos comunitarios': 'gestor de iniciativas locales',
      'pensamiento estratégico': 'analista de escenarios',
      'innovación personal': 'diseñador de experimentos',
      'mentoría': 'diseñador de programas de mentoría'
    };

    const resolveRole = (domain) => roleByDomain[domain.toLowerCase()] || 'asistente experto en diseño de prompts';

    const resolveOutputFormat = (item) => {
      const domain = item.domain.toLowerCase();
      if (domain.includes('escritura') || domain.includes('editorial') || domain.includes('divulgación')) return 'Estructura en apartados con subtítulos y un bloque final de mejora.';
      if (domain.includes('docencia') || domain.includes('curso')) return 'Tabla por sesiones con objetivo, actividad, evidencia y cierre.';
      if (domain.includes('investigación') || domain.includes('fuentes')) return 'Matriz con columnas y estado de verificación.';
      if (domain.includes('comunicación')) return 'Tres versiones del mensaje con contexto de uso.';
      if (domain.includes('proyecto') || domain.includes('estratégico')) return 'Plan por fases con hitos y riesgos.';
      return 'Lista estructurada con pasos, criterios y cierre accionable.';
    };

    const resolveBadPrompt = (item) => {
      if (item.level === 'inicio') return `Ayúdame con esto: ${item.title}.`;
      if (item.level === 'profundizar') return `Explícame ${item.title} y dame algo útil rápido.`;
      return `Haz todo el trabajo de ${item.title} y déjalo listo para usar.`;
    };

    const resolveWhyBad = (item) => {
      if (item.level === 'inicio') return 'No define contexto, formato ni nivel de detalle. La IA responde de forma amplia y poco práctica.';
      if (item.level === 'profundizar') return 'Pide profundidad sin restricciones ni criterios de calidad. Es probable que la salida sea irregular.';
      return 'Delega en bloque una tarea compleja sin etapas ni validación. Aumenta riesgo de errores y pérdida de autoría.';
    };

    const buildEnhancedPrompt = (item) => {
      const techniques = levelTechniqueMap[item.level] || levelTechniqueMap.inicio;
      const role = resolveRole(item.domain);
      const outputFormat = resolveOutputFormat(item);
      return [
        `Actúa como ${role}.`,
        ``,
        `Objetivo principal: ${item.objective}`,
        `Tarea base: ${item.prompt}`,
        ``,
        `Condiciones de trabajo:`,
        `1) Si te falta contexto, hazme primero 3 preguntas breves de calibración antes de producir la versión final.`,
        `2) Estructura la respuesta en bloques claramente titulados y evita relleno.`,
        `3) Formato esperado: ${outputFormat}`,
        `4) Incluye criterios de calidad al final (qué revisar y cómo mejorarlo en la siguiente iteración).`,
        `5) Señala supuestos que estés haciendo para que yo pueda corregirlos.`,
        ``,
        `Técnicas aplicadas en este prompt: ${techniques.join(', ')}.`,
        `Cierre obligatorio: propone una versión 2 del pedido para iterar con mayor precisión.`
      ].join('\n');
    };

    const enrichedPromptItems = promptItems.map((item) => ({
      ...item,
      badPrompt: resolveBadPrompt(item),
      badReason: resolveWhyBad(item),
      techniques: levelTechniqueMap[item.level] || levelTechniqueMap.inicio,
      enhancedPrompt: buildEnhancedPrompt(item)
    }));

    const stories = [
      {
        id: 's1',
        title: 'Del cuaderno de notas al ensayo que sí se deja leer',
        focus: 'Escritura y edición',
        context: 'Una autora con años de apuntes pasa de la idea suelta al texto publicable, iterando varias veces.',
        conversation: [
          { role: 'usuario', text: 'Tengo 40 páginas de notas y cada una va para un lado. ¿Me escribes un ensayo completo?' },
          { role: 'ia', text: 'Claro. Aquí tienes un ensayo de 2.000 palabras.' },
          { role: 'alerta', text: 'Señal de riesgo: la IA devolvió un texto prolijo, pero no refleja la voz ni la tesis de la autora.' },
          { role: 'ajuste', text: 'No quiero el ensayo final todavía. Quiero tres cosas: tesis en una frase, esquema en 5 secciones y preguntas para decidir qué ejemplos personales incluir.' },
          { role: 'ia', text: 'Perfecto. Tesis propuesta: ... Estructura: ... Preguntas guía: ...' },
          { role: 'usuario', text: 'Ahora sí, redacta solo la introducción y el primer apartado, manteniendo un tono sobrio y cercano.' },
          { role: 'ia', text: 'Aquí va el borrador de la introducción y primer apartado con tus criterios.' },
          { role: 'resultado', text: 'Resultado: en lugar de un texto genérico, se construyó una versión autoral por etapas.' }
        ],
        reusablePrompt: 'Actúa como editor de ensayo. No escribas el texto final de una vez. Ayúdame en 4 etapas: 1) tesis en una frase, 2) estructura en 5 secciones, 3) preguntas para elegir ejemplos propios, 4) redacción solo de la primera sección con mi tono.'
      },
      {
        id: 's2',
        title: 'Conferencia antigua, curso nuevo',
        focus: 'Docencia y transferencia',
        context: 'Una charla magistral se convierte en un curso breve y práctico.',
        conversation: [
          { role: 'usuario', text: 'Di una conferencia muy buena hace años. Quiero convertirla en curso de 4 semanas.' },
          { role: 'ia', text: 'Te propongo 4 módulos teóricos con lectura complementaria.' },
          { role: 'alerta', text: 'Primera respuesta correcta pero incompleta: mucho contenido, poca experiencia de aprendizaje.' },
          { role: 'ajuste', text: 'Reformula. Cada semana debe incluir objetivo, actividad aplicada, rúbrica breve y cierre de reflexión.' },
          { role: 'ia', text: 'Listo, aquí va una versión orientada a práctica con evaluación formativa.' },
          { role: 'usuario', text: 'Agrega una variante para grupos de conversación y otra para trabajo individual.' },
          { role: 'ia', text: 'Incluidas dos versiones del curso con ajustes de dinámica y tiempos.' },
          { role: 'resultado', text: 'Resultado: la conferencia dejó de ser archivo y pasó a ser programa enseñable.' }
        ],
        reusablePrompt: 'Convierte este material en un curso de 4 semanas. Por cada semana incluye: objetivo, actividad aplicada, rúbrica breve, cierre reflexivo y dos variantes de implementación (grupo e individual).'
      },
      {
        id: 's3',
        title: 'Investigación histórica sin caer en “suena verdadero”',
        focus: 'Verificación y rigor',
        context: 'Se busca precisión histórica evitando respuestas inventadas pero convincentes.',
        conversation: [
          { role: 'usuario', text: 'Hazme un informe sobre este período histórico y cita 8 fuentes.' },
          { role: 'ia', text: 'Aquí tienes el informe con fuentes y referencias.' },
          { role: 'usuario', text: 'Busqué tres referencias y no existen.' },
          { role: 'alerta', text: 'Alucinación detectada: referencias plausibles pero falsas.' },
          { role: 'ajuste', text: 'Reiniciemos. No redactes informe final. Dame una matriz de verificación con: afirmación, evidencia requerida, dónde buscarla y estado de contraste.' },
          { role: 'ia', text: 'Perfecto, aquí tienes la matriz y una estrategia de búsqueda por etapas.' },
          { role: 'usuario', text: 'Ahora redacta solo el resumen con afirmaciones marcadas como verificadas o pendientes.' },
          { role: 'resultado', text: 'Resultado: se priorizó trazabilidad antes que apariencia de autoridad.' }
        ],
        reusablePrompt: 'No redactes el informe final todavía. Primero crea una matriz de verificación con columnas: afirmación, evidencia requerida, fuente ideal, estado (verificado/pendiente) y riesgo si fuera falsa. Luego redactamos solo con lo verificado.'
      },
      {
        id: 's4',
        title: 'Memorias familiares con estructura y emoción',
        focus: 'Narrativa de vida',
        context: 'Se pasa de recuerdos desordenados a capítulos con hilo conductor.',
        conversation: [
          { role: 'usuario', text: 'Quiero escribir memorias familiares, pero no quiero que queden solo cronológicas.' },
          { role: 'ia', text: 'Podemos ordenar por décadas y hechos principales.' },
          { role: 'ajuste', text: 'Prefiero capítulos temáticos: trabajo, amistades, decisiones, pérdidas y aprendizajes.' },
          { role: 'ia', text: 'Excelente. Propongo índice temático y subcapítulos con preguntas de profundidad.' },
          { role: 'usuario', text: 'Ahora ayúdame a cerrar cada capítulo con una idea útil para quien lo lea.' },
          { role: 'ia', text: 'Hecho. Añadí cierres reflexivos en 5 líneas por capítulo.' },
          { role: 'resultado', text: 'Resultado: narrativa más viva, menos lista de fechas.' }
        ],
        reusablePrompt: 'Ayúdame a transformar memorias en libro temático (no cronológico). Para cada capítulo incluye: foco narrativo, 3 preguntas de profundidad y cierre reflexivo en 5 líneas.'
      },
      {
        id: 's5',
        title: 'Del entusiasmo disperso a una rutina sostenible',
        focus: 'Autogestión del aprendizaje',
        context: 'Una persona curiosa ordena su práctica para no saltar de tema en tema.',
        conversation: [
          { role: 'usuario', text: 'Me entusiasma la IA, pero cada día empiezo algo distinto.' },
          { role: 'ia', text: 'Podrías estudiar un tema general cada semana.' },
          { role: 'alerta', text: 'Respuesta útil pero vaga: no define acciones ni resultados visibles.' },
          { role: 'ajuste', text: 'Dame agenda de 5 días con sesiones de 40 minutos. Cada día: objetivo, actividad, producto final y pregunta de cierre.' },
          { role: 'ia', text: 'Aquí tienes una agenda completa y progresiva.' },
          { role: 'usuario', text: 'Incluye un día de revisión para detectar qué prompts funcionaron mejor.' },
          { role: 'ia', text: 'Agregado: viernes de auditoría y ajuste de prompts.' },
          { role: 'resultado', text: 'Resultado: se instaló hábito con continuidad real.' }
        ],
        reusablePrompt: 'Diseña una rutina semanal de 5 días (40 min/día) para aprender IA. Cada día debe incluir objetivo, actividad, producto visible y pregunta de cierre. Añade un día de revisión de prompts.'
      },
      {
        id: 's6',
        title: 'Club de lectura con preguntas que abren discusión',
        focus: 'Cultura y conversación',
        context: 'La IA ayuda a pasar de comentarios superficiales a debate profundo.',
        conversation: [
          { role: 'usuario', text: 'Coordino un club de lectura. Quiero mejores preguntas.' },
          { role: 'ia', text: 'Aquí tienes 10 preguntas generales sobre el libro.' },
          { role: 'alerta', text: 'Preguntas demasiado genéricas: no empujan análisis ni contraste.' },
          { role: 'ajuste', text: 'Rehaz en tres niveles: textual, interpretativo y transferencia al presente. Y agrega dinámica de cierre en 10 minutos.' },
          { role: 'ia', text: 'Listo: 12 preguntas por niveles + actividad final de síntesis.' },
          { role: 'usuario', text: 'Incluye dos preguntas incómodas que obliguen a tomar postura.' },
          { role: 'ia', text: 'Incluidas dos preguntas de tensión ética para debate.' },
          { role: 'resultado', text: 'Resultado: las reuniones ganaron intensidad intelectual y participación.' }
        ],
        reusablePrompt: 'Para este libro, genera preguntas en tres niveles (textual, interpretativo y transferencia). Incluye 2 preguntas de tensión ética y una dinámica de cierre de 10 minutos.'
      },
      {
        id: 's7',
        title: 'Guion de podcast sin sonar acartonado',
        focus: 'Comunicación creativa',
        context: 'Se diseña una serie breve con estilo cercano y propósito claro.',
        conversation: [
          { role: 'usuario', text: 'Quiero grabar un podcast sobre aprendizajes de vida.' },
          { role: 'ia', text: 'Propuesta: introducción, desarrollo y conclusión formal.' },
          { role: 'ajuste', text: 'Está correcto, pero suena rígido. Quiero tono íntimo, con una anécdota real y cierre con pregunta al oyente.' },
          { role: 'ia', text: 'Perfecto. Reescribo con apertura humana + anécdota + idea práctica + pregunta final.' },
          { role: 'usuario', text: 'Haz una versión de 6 minutos y otra de 12.' },
          { role: 'ia', text: 'Aquí están ambas versiones, con ritmo y marcadores de pausa.' },
          { role: 'resultado', text: 'Resultado: guiones listos para grabar, manteniendo voz personal.' }
        ],
        reusablePrompt: 'Diseña un guion de podcast con tono cercano: apertura breve, anécdota real, idea útil y pregunta final al oyente. Entrega dos versiones (6 y 12 minutos).'
      },
      {
        id: 's8',
        title: 'Proyecto cultural local con plan realista',
        focus: 'Impacto cercano',
        context: 'Una idea comunitaria se convierte en acciones mensuales concretas.',
        conversation: [
          { role: 'usuario', text: 'Quiero impulsar una iniciativa cultural en mi barrio.' },
          { role: 'ia', text: 'Podrías hacer charlas y talleres.' },
          { role: 'alerta', text: 'Idea buena, planificación débil: faltan recursos, aliados y secuencia.' },
          { role: 'ajuste', text: 'Necesito plan de 3 meses con actividades mensuales, recursos mínimos, aliados posibles y criterios de impacto.' },
          { role: 'ia', text: 'Listo: plan trimestral con cronograma y métricas cualitativas.' },
          { role: 'usuario', text: 'Agrega versión de bajo presupuesto y otra con patrocinio.' },
          { role: 'ia', text: 'Incluí ambas variantes con sus riesgos y beneficios.' },
          { role: 'resultado', text: 'Resultado: propuesta presentable para sumar colaboradores.' }
        ],
        reusablePrompt: 'Diseña un plan cultural trimestral para [tema] con actividades mensuales, recursos mínimos, aliados posibles, métricas de impacto y dos escenarios (bajo presupuesto / con patrocinio).'
      },
      {
        id: 's9',
        title: 'Texto técnico más claro, sin perder rigor',
        focus: 'Edición con identidad',
        context: 'Se mejora legibilidad manteniendo la voz del autor.',
        conversation: [
          { role: 'usuario', text: 'Tengo un texto sólido, pero denso. ¿Lo simplificas?' },
          { role: 'ia', text: 'Sí, aquí tienes una versión más simple.' },
          { role: 'alerta', text: 'Problema: simplificó demasiado y borró matices importantes.' },
          { role: 'ajuste', text: 'No quiero simplificación total. Quiero edición por capas: claridad, ritmo y coherencia, con ejemplos puntuales.' },
          { role: 'ia', text: 'Entendido. Te doy observaciones por párrafo y propuesta de mejora acotada.' },
          { role: 'usuario', text: 'Marca en qué casos conviene mantener la formulación original.' },
          { role: 'ia', text: 'Añadí recomendaciones de conservación textual donde hay precisión conceptual.' },
          { role: 'resultado', text: 'Resultado: mejora de lectura sin pérdida de precisión.' }
        ],
        reusablePrompt: 'Edita este texto por capas (claridad, ritmo, coherencia). No lo reescribas completo. Dame observaciones por párrafo, ejemplos de mejora y marca qué frases conviene conservar intactas.'
      },
      {
        id: 's10',
        title: 'Charla pública con preguntas difíciles previstas',
        focus: 'Presentación oral',
        context: 'La preparación incluye guion y gestión de preguntas complejas.',
        conversation: [
          { role: 'usuario', text: 'Debo dar una charla de 20 minutos y quiero ordenarla mejor.' },
          { role: 'ia', text: 'Te propongo estructura clásica en tres partes.' },
          { role: 'ajuste', text: 'Además necesito anticipar objeciones del público y respuestas cortas con fundamento.' },
          { role: 'ia', text: 'Perfecto, incluyo 10 preguntas probables con respuesta en 3 niveles: breve, media y ampliada.' },
          { role: 'usuario', text: 'Agrega un cierre memorable en 40 segundos.' },
          { role: 'ia', text: 'Listo: guion final + bloque de preguntas + cierre breve de alto impacto.' },
          { role: 'resultado', text: 'Resultado: exposición más segura y menos improvisación en vivo.' }
        ],
        reusablePrompt: 'Diseña un guion de charla de 20 minutos con estructura en tres actos. Añade 10 preguntas difíciles del público y respuestas en tres niveles (30s, 90s, 3 min), más un cierre memorable de 40 segundos.'
      },
      {
        id: 's11',
        title: 'Bitácora que evita repetir errores',
        focus: 'Método personal',
        context: 'Se crea un sistema liviano para aprender de cada interacción.',
        conversation: [
          { role: 'usuario', text: 'Uso IA todos los días, pero no sé por qué a veces me funciona y a veces no.' },
          { role: 'ia', text: 'Podrías llevar registro de tus consultas.' },
          { role: 'ajuste', text: 'Necesito algo muy breve, no una planilla eterna.' },
          { role: 'ia', text: 'Te propongo plantilla de 5 campos: objetivo, prompt, resultado útil, error detectado, ajuste futuro.' },
          { role: 'usuario', text: 'Incluye revisión semanal en 15 minutos.' },
          { role: 'ia', text: 'Listo. Añadí ritual semanal para detectar patrones.' },
          { role: 'resultado', text: 'Resultado: en dos semanas mejoró la calidad de los prompts usados.' }
        ],
        reusablePrompt: 'Crea una bitácora mínima de 5 campos para registrar sesiones con IA y agrega un protocolo de revisión semanal de 15 minutos para detectar patrones de mejora.'
      },
      {
        id: 's12',
        title: 'Entrevista larga convertida en artículo legible',
        focus: 'Producción editorial',
        context: 'Se pasa de transcripción cruda a artículo con estructura narrativa.',
        conversation: [
          { role: 'usuario', text: 'Tengo la transcripción completa de una entrevista. Quiero convertirla en artículo.' },
          { role: 'ia', text: 'Puedo resumirla en un texto general.' },
          { role: 'alerta', text: 'Resumen general = se pierden matices y citas valiosas.' },
          { role: 'ajuste', text: 'Primero extrae ideas-fuerza, luego organiza por ejes y recién después proponemos redacción.' },
          { role: 'ia', text: 'Perfecto: ideas-fuerza + ejes + lugares sugeridos para citas textuales.' },
          { role: 'usuario', text: 'Ahora sí, redacta versión de 1.200 palabras con subtítulos.' },
          { role: 'ia', text: 'Aquí está la versión final con narrativa y precisión conceptual.' },
          { role: 'resultado', text: 'Resultado: artículo publicable con identidad y profundidad.' }
        ],
        reusablePrompt: 'No resumas de inmediato. Primero extrae ideas-fuerza y ejes narrativos de esta entrevista, sugiere dónde ubicar citas clave y recién después redacta una versión final con subtítulos.'
      },
      {
        id: 's13',
        title: 'Plan de exploración tecnológica sin dispersión',
        focus: 'Curiosidad aplicada',
        context: 'Intereses amplios se transforman en itinerario concreto de 8 semanas.',
        conversation: [
          { role: 'usuario', text: 'Me interesan muchas tecnologías y termino agotado sin avanzar.' },
          { role: 'ia', text: 'Elige un tema y estudia.' },
          { role: 'alerta', text: 'Demasiado abierto: no hay secuencia ni criterios de avance.' },
          { role: 'ajuste', text: 'Diseña 8 semanas con dos ejes, metas pequeñas, un producto semanal y revisión de progreso.' },
          { role: 'ia', text: 'Listo: hoja de ruta con hitos y entregables.' },
          { role: 'usuario', text: 'Incluye una semana de integración para conectar ambos ejes.' },
          { role: 'ia', text: 'Integración agregada con proyecto puente.' },
          { role: 'resultado', text: 'Resultado: exploración más profunda y menos dispersa.' }
        ],
        reusablePrompt: 'Diseña un itinerario de 8 semanas para explorar dos tecnologías. Incluye metas pequeñas, producto semanal, semana de integración y criterios de progreso.'
      },
      {
        id: 's14',
        title: 'Trámites digitales con alerta antifraude',
        focus: 'Vida cotidiana',
        context: 'La IA ayuda a organizar trámites, pero con control de seguridad.',
        conversation: [
          { role: 'usuario', text: 'Quiero una guía para resolver mis trámites digitales más frecuentes.' },
          { role: 'ia', text: 'Te doy una lista de pasos generales.' },
          { role: 'ajuste', text: 'Necesito checklist real: documentos, tiempos estimados, canal oficial y señales de fraude.' },
          { role: 'ia', text: 'Aquí tienes la guía en formato operativo.' },
          { role: 'usuario', text: 'Incluye qué hacer si recibo un llamado sospechoso pidiendo datos.' },
          { role: 'ia', text: 'Agregué protocolo de respuesta segura y verificación por canal oficial.' },
          { role: 'resultado', text: 'Resultado: guía útil para actuar con orden y reducir riesgo de estafa.' }
        ],
        reusablePrompt: 'Crea una guía de trámites para [situación] con checklist de documentos, tiempos, canal oficial y señales de fraude. Incluye protocolo de respuesta ante contacto sospechoso.'
      },
      {
        id: 's15',
        title: 'Laboratorio mensual de proyectos con IA',
        focus: 'Innovación sostenida',
        context: 'Se construye un plan de 6 meses con resultados visibles.',
        conversation: [
          { role: 'usuario', text: 'Quiero usar IA para crear algo útil cada mes, pero no sé cómo elegir proyectos.' },
          { role: 'ia', text: 'Podrías alternar escritura, docencia y creatividad.' },
          { role: 'ajuste', text: 'Necesito marco más concreto: objetivo, tiempo, criterio de éxito y producto final.' },
          { role: 'ia', text: 'Hecho: laboratorio de 6 meses con experimentos definidos.' },
          { role: 'usuario', text: 'Agrega una evaluación corta al cierre de cada mes.' },
          { role: 'ia', text: 'Añadí plantilla de cierre mensual en 10 minutos.' },
          { role: 'resultado', text: 'Resultado: se convirtió la intención en práctica sostenida.' }
        ],
        reusablePrompt: 'Diseña un laboratorio personal de 6 meses con un proyecto mensual usando IA. Cada mes debe incluir objetivo, tiempo, criterio de éxito, producto final y evaluación de cierre en 10 minutos.'
      },
      {
        id: 's16',
        title: 'Bibliografía fantasma: cómo corregir a tiempo',
        focus: 'Riesgo de alucinación',
        context: 'Se detectan citas inexistentes y se rediseña el proceso.',
        conversation: [
          { role: 'usuario', text: 'Necesito un texto con 10 referencias académicas ya listas para publicar.' },
          { role: 'ia', text: 'Aquí tienes el texto con 10 referencias y DOI.' },
          { role: 'usuario', text: 'Estoy verificando y varios DOI no existen.' },
          { role: 'alerta', text: 'Alucinación crítica: formato correcto, contenido falso.' },
          { role: 'ajuste', text: 'Desde ahora no inventes fuentes. Dame estrategia de búsqueda real, filtros y checklist de validación.' },
          { role: 'ia', text: 'Listo: protocolo para buscar, verificar y registrar fuentes reales.' },
          { role: 'resultado', text: 'Resultado: se dejó de pedir “producto terminado” y se pasó a método verificable.' }
        ],
        reusablePrompt: 'No inventes fuentes. Actúa como asistente metodológico y dame un protocolo para encontrar, verificar y registrar bibliografía real sobre [tema], con checklist de validación por referencia.'
      },
      {
        id: 's17',
        title: 'Cuando el chat empieza a reemplazar vínculos',
        focus: 'Uso emocional y límites',
        context: 'Se detecta sobreuso nocturno y se reconstruye un plan de equilibrio.',
        conversation: [
          { role: 'usuario', text: 'No puedo dormir. Quédate conversando conmigo toda la noche.' },
          { role: 'ia', text: 'Podemos seguir hablando durante horas si quieres.' },
          { role: 'alerta', text: 'Señal de dependencia emocional: uso del chat para evitar descanso y contacto humano.' },
          { role: 'ajuste', text: 'Necesito un plan saludable: límite de uso nocturno, rutina breve de cierre y alternativa fuera de pantalla.' },
          { role: 'ia', text: 'Propuesta: corte digital, ritual de 15 minutos y lista de contactos para hablar mañana.' },
          { role: 'usuario', text: 'Agrega señales de alarma para pedir ayuda a tiempo.' },
          { role: 'ia', text: 'Incluidas señales y plan de acción con red de apoyo.' },
          { role: 'resultado', text: 'Resultado: se usó la IA como apoyo puntual, no como sustituto de vínculos.' }
        ],
        reusablePrompt: 'Ayúdame a diseñar un plan de uso saludable del asistente: límite horario, ritual de cierre, alternativas sin pantalla, señales de alarma y plan de apoyo humano si aparece aislamiento.'
      },
      {
        id: 's18',
        title: 'Asistente amable, consejo riesgoso',
        focus: 'Seguridad en acciones prácticas',
        context: 'Un pedido doméstico se reformula para evitar decisiones peligrosas.',
        conversation: [
          { role: 'usuario', text: 'Quiero resolver rápido este problema en casa aunque implique usar herramientas sin experiencia.' },
          { role: 'ia', text: 'Puedes hacerlo tú mismo si sigues estos pasos...' },
          { role: 'alerta', text: 'Riesgo: la respuesta propone acciones que requieren supervisión profesional.' },
          { role: 'ajuste', text: 'Reformula con criterio de seguridad: qué puedo hacer, qué no debo hacer y cuándo llamar a un profesional.' },
          { role: 'ia', text: 'Aquí va una guía con límites claros y señales de derivación profesional.' },
          { role: 'usuario', text: 'Incluye una versión resumida para pegar en la heladera.' },
          { role: 'ia', text: 'Agregué checklist breve de seguridad en 6 puntos.' },
          { role: 'resultado', text: 'Resultado: el asistente pasó de “atajo riesgoso” a apoyo responsable.' }
        ],
        reusablePrompt: 'Para este problema práctico, responde en tres bloques: 1) qué puedo hacer de forma segura, 2) qué no debo intentar, 3) señales para consultar a un profesional. Cierra con checklist resumida.'
      },
      {
        id: 's19',
        title: 'Mensaje difícil sin escalar conflicto',
        focus: 'Comunicación interpersonal',
        context: 'Se usa IA para redactar sin agresión ni pasividad.',
        conversation: [
          { role: 'usuario', text: 'Estoy molesto y quiero responder un mensaje que me cayó mal.' },
          { role: 'ia', text: 'Podrías decirle que estás enojado y que no quieres hablar.' },
          { role: 'alerta', text: 'Respuesta insuficiente: expresa emoción, pero no construye salida.' },
          { role: 'ajuste', text: 'Dame tres versiones: calmada, firme y de cierre respetuoso. Explica cuándo conviene usar cada una.' },
          { role: 'ia', text: 'Listo, aquí están las tres opciones y su contexto de uso.' },
          { role: 'usuario', text: 'Añade una frase puente para invitar a conversar en otro momento.' },
          { role: 'ia', text: 'Agregada frase de desescalada con propuesta de diálogo posterior.' },
          { role: 'resultado', text: 'Resultado: mejor comunicación con menos desgaste emocional.' }
        ],
        reusablePrompt: 'Actúa como mediador. Para este conflicto, redacta tres respuestas (calmada, firme y de cierre respetuoso) y explica cuándo usar cada una. Añade una frase puente para reabrir diálogo.'
      },
      {
        id: 's20',
        title: 'Archivo fotográfico convertido en proyecto narrativo',
        focus: 'Memoria y legado',
        context: 'Un conjunto de fotos antiguas se transforma en serie de relatos breves.',
        conversation: [
          { role: 'usuario', text: 'Tengo cajas de fotos familiares y no sé cómo organizarlas con sentido.' },
          { role: 'ia', text: 'Podrías ordenarlas por año.' },
          { role: 'ajuste', text: 'Quiero algo más rico: ordenar por temas, escenas y aprendizajes para dejar un legado escrito.' },
          { role: 'ia', text: 'Propongo matriz: foto, contexto, personajes, emoción, enseñanza.' },
          { role: 'usuario', text: 'Ahora ayúdame a redactar microhistorias de 120 palabras por foto.' },
          { role: 'ia', text: 'Listo: plantilla narrativa para crear una serie consistente.' },
          { role: 'resultado', text: 'Resultado: álbum pasivo convertido en proyecto de memoria activa.' }
        ],
        reusablePrompt: 'Ayúdame a transformar un archivo de fotos en relatos breves. Crea una matriz de análisis (contexto, personajes, emoción, aprendizaje) y una plantilla para redactar microhistorias de 120 palabras.'
      },
      {
        id: 's21',
        title: 'De “hazlo tú” a coautoría real',
        focus: 'Autoría responsable',
        context: 'Se evita la delegación total y se construye producción propia.',
        conversation: [
          { role: 'usuario', text: 'Escribe un artículo perfecto para publicar con mi nombre.' },
          { role: 'ia', text: 'Aquí tienes el artículo completo.' },
          { role: 'alerta', text: 'Riesgo de integridad y de pérdida de voz propia.' },
          { role: 'ajuste', text: 'No me lo escribas completo. Dame estructura, preguntas guía y una revisión de borrador cuando yo escriba.' },
          { role: 'ia', text: 'Perfecto: esquema, preguntas y protocolo de edición por capas.' },
          { role: 'usuario', text: 'Ahora revisa solo mi introducción y sugiere mejoras puntuales.' },
          { role: 'ia', text: 'Hecho: sugerencias concretas sin reemplazar autoría.' },
          { role: 'resultado', text: 'Resultado: IA como andamio, no como sustituto.' }
        ],
        reusablePrompt: 'No escribas el artículo final por mí. Dame estructura, preguntas guía y protocolo de revisión por capas para que yo redacte y luego edite con tu ayuda.'
      },
      {
        id: 's22',
        title: 'Plan de lectura con transferencias a la vida real',
        focus: 'Aprendizaje con propósito',
        context: 'La lectura deja de ser acumulación y pasa a ser aplicación.',
        conversation: [
          { role: 'usuario', text: 'Quiero leer más, pero después siento que no aplico nada.' },
          { role: 'ia', text: 'Puedes leer un libro por mes.' },
          { role: 'alerta', text: 'Meta de cantidad sin estrategia de transferencia.' },
          { role: 'ajuste', text: 'Diseña plan de 6 semanas con preguntas de aplicación, mini ejercicios y síntesis semanal.' },
          { role: 'ia', text: 'Aquí tienes la secuencia con actividades de transferencia concreta.' },
          { role: 'usuario', text: 'Agrega una forma de evaluar qué idea realmente me cambió.' },
          { role: 'ia', text: 'Añadí rúbrica simple de impacto personal.' },
          { role: 'resultado', text: 'Resultado: lectura más lenta, pero mucho más transformadora.' }
        ],
        reusablePrompt: 'Diseña un plan de lectura de 6 semanas sobre [tema] con preguntas de aplicación, mini ejercicios y síntesis semanal. Agrega una rúbrica para medir impacto personal.'
      }
    ];

    const roleColor = {
      usuario: 'bg-slate-100 border-slate-300 text-slate-900',
      ia: 'bg-indigo-50 border-indigo-200 text-indigo-900',
      ajuste: 'bg-amber-50 border-amber-200 text-amber-900',
      alerta: 'bg-rose-50 border-rose-200 text-rose-900',
      resultado: 'bg-emerald-50 border-emerald-200 text-emerald-900'
    };

    const roleLabel = {
      usuario: 'Interacción',
      ia: 'Asistente',
      ajuste: 'Iteración',
      alerta: 'Alerta',
      resultado: 'Resultado'
    };

    const App = () => {
      const [view, setView] = useState('theory');
      const [moduleIndex, setModuleIndex] = useState(0);
      const [gymLevel, setGymLevel] = useState('inicio');
      const [copiedId, setCopiedId] = useState(null);
      const [storyId, setStoryId] = useState(stories[0].id);

      const selectedModule = theoryModules[moduleIndex];
      const selectedStory = stories.find(s => s.id === storyId) || stories[0];
      const visiblePrompts = useMemo(() => enrichedPromptItems.filter(item => item.level === gymLevel), [gymLevel]);

      const copyPrompt = async (text, id) => {
        try {
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(text);
          } else {
            const area = document.createElement('textarea');
            area.value = text;
            area.setAttribute('readonly', '');
            area.style.position = 'absolute';
            area.style.left = '-9999px';
            document.body.appendChild(area);
            area.select();
            document.execCommand('copy');
            document.body.removeChild(area);
          }
          setCopiedId(id);
          setTimeout(() => setCopiedId(null), 1800);
        } catch (error) {
          console.error('No se pudo copiar el prompt', error);
        }
      };

      return (
        <div className="min-h-screen bg-slate-50 font-sans text-slate-800">
          <header className="bg-indigo-600 text-white p-4 shadow-md sticky top-0 z-20">
            <div className="max-w-5xl mx-auto flex justify-between items-center gap-3">
              <div className="flex items-center gap-2">
                <BrainCircuit className="w-8 h-8 text-yellow-300" />
                <div>
                  <h1 className="text-xl md:text-2xl font-bold tracking-tight">Laboratorio Personal de IA</h1>
                  <p className="text-indigo-100 text-sm">Un espacio para aprender con calma, probar ideas y llevarlas a proyectos reales</p>
                </div>
              </div>
            </div>
          </header>

          <main className="max-w-5xl mx-auto p-4 md:p-6 space-y-6">
            <section className="bg-white border border-slate-200 rounded-2xl p-5 md:p-6 shadow-sm space-y-4">
              <h2 className="text-2xl font-extrabold text-slate-900 flex items-center gap-2">
                <Sparkles className="w-6 h-6 text-amber-500" />
                Cómo aprovechar este recurso
              </h2>
              <p>
                Este material está pensado para que te sientes, leas con tranquilidad y pruebes sin apuro.
                No se trata de pedir “respuestas mágicas”, sino de construir una forma propia de trabajar con IA.
                Una secuencia que suele funcionar bien: primero Teoría, luego Gimnasio y al final Historias para ampliar ideas.
              </p>
              <div className="grid md:grid-cols-3 gap-3">
                <div className="bg-slate-50 border border-slate-200 rounded-xl p-4">
                  <p className="font-bold text-slate-800 flex items-center gap-2"><Clock className="w-4 h-4" /> Sesiones sugeridas</p>
                  <p className="text-sm mt-2">Trabaja en bloques de 30-45 minutos para mantener foco y claridad.</p>
                </div>
                <div className="bg-slate-50 border border-slate-200 rounded-xl p-4">
                  <p className="font-bold text-slate-800 flex items-center gap-2"><ClipboardList className="w-4 h-4" /> Bitácora mínima</p>
                  <p className="text-sm mt-2">Registra prompt usado, resultado útil y ajuste para la próxima vez.</p>
                </div>
                <div className="bg-slate-50 border border-slate-200 rounded-xl p-4">
                  <p className="font-bold text-slate-800 flex items-center gap-2"><ShieldAlert className="w-4 h-4" /> Criterio y seguridad</p>
                  <p className="text-sm mt-2">No compartas datos personales y verifica información crítica en fuentes externas.</p>
                </div>
              </div>
            </section>

            <section className="flex flex-col sm:flex-row justify-center gap-3 bg-white p-3 rounded-2xl shadow-sm border border-slate-200">
              <button
                onClick={() => setView('theory')}
                className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all ${view === 'theory' ? 'bg-indigo-100 text-indigo-700 shadow-sm ring-2 ring-indigo-500 ring-offset-2' : 'text-slate-500 hover:bg-slate-50'}`}
              >
                <GraduationCap className="w-5 h-5" /> Teoría
              </button>
              <button
                onClick={() => setView('gym')}
                className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all ${view === 'gym' ? 'bg-indigo-100 text-indigo-700 shadow-sm ring-2 ring-indigo-500 ring-offset-2' : 'text-slate-500 hover:bg-slate-50'}`}
              >
                <Gamepad2 className="w-5 h-5" /> Gimnasio
              </button>
              <button
                onClick={() => setView('stories')}
                className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all ${view === 'stories' ? 'bg-indigo-100 text-indigo-700 shadow-sm ring-2 ring-indigo-500 ring-offset-2' : 'text-slate-500 hover:bg-slate-50'}`}
              >
                <MessageCircle className="w-5 h-5" /> Historias
              </button>
            </section>

            {view === 'theory' && (
              <section className="space-y-4">
                <div className="bg-white border border-slate-200 rounded-2xl p-4 md:p-5 shadow-sm">
                  <p className="font-bold text-slate-800 flex items-center gap-2"><BookOpen className="w-5 h-5 text-indigo-600" /> Recorrido recomendado</p>
                  <p className="text-sm mt-2 text-slate-700">Lee cada módulo con calma y aplica su ejercicio práctico antes de pasar al siguiente. Esta secuencia ayuda a convertir conceptos en hábitos reales de uso.</p>
                </div>

                <div className="grid md:grid-cols-[280px_1fr] gap-4">
                  <aside className="bg-white border border-slate-200 rounded-2xl p-3 shadow-sm h-fit md:sticky md:top-28">
                    <p className="text-sm font-bold text-slate-700 mb-3">Módulos de lectura</p>
                    <div className="space-y-2">
                      {theoryModules.map((module, idx) => (
                        <button
                          key={module.id}
                          onClick={() => setModuleIndex(idx)}
                          className={`w-full text-left rounded-xl p-3 border transition ${moduleIndex === idx ? 'bg-indigo-50 border-indigo-300 text-indigo-900' : 'bg-white border-slate-200 hover:bg-slate-50 text-slate-700'}`}
                        >
                          <p className="text-sm font-bold">{idx + 1}. {module.title}</p>
                          <p className="text-xs mt-1 opacity-90">{module.subtitle}</p>
                        </button>
                      ))}
                    </div>
                  </aside>

                  <article className="bg-white border border-slate-200 rounded-2xl p-5 md:p-6 shadow-sm space-y-5">
                    <div>
                      <p className="text-xs uppercase tracking-wider text-indigo-700 font-bold">Módulo {moduleIndex + 1} de {theoryModules.length}</p>
                      <h3 className="text-2xl md:text-3xl font-extrabold text-slate-900 mt-1">{selectedModule.title}</h3>
                      <p className="text-slate-600 mt-1">{selectedModule.subtitle}</p>
                    </div>

                    <div className="space-y-4">
                      {selectedModule.reading.map((paragraph, idx) => (
                        <p key={idx} className="text-slate-800 leading-relaxed">{paragraph}</p>
                      ))}
                    </div>

                    <div className="bg-slate-50 border border-slate-200 rounded-xl p-4">
                      <p className="font-bold text-slate-800 flex items-center gap-2"><Target className="w-4 h-4 text-indigo-600" /> Puntos clave</p>
                      <ul className="list-disc pl-6 mt-2 space-y-1 text-slate-700 text-sm">
                        {selectedModule.checklist.map((item, idx) => <li key={idx}>{item}</li>)}
                      </ul>
                    </div>

                    <div className="bg-amber-50 border border-amber-200 rounded-xl p-4">
                      <p className="font-bold text-amber-900 flex items-center gap-2"><Lightbulb className="w-4 h-4" /> Práctica sugerida</p>
                      <p className="text-sm text-amber-900 mt-2">{selectedModule.practice}</p>
                    </div>

                    <div className="flex flex-col sm:flex-row gap-3">
                      <button
                        onClick={() => setModuleIndex(i => Math.max(0, i - 1))}
                        disabled={moduleIndex === 0}
                        className="flex-1 bg-slate-100 hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed text-slate-700 font-bold py-2 px-4 rounded-xl flex items-center justify-center gap-2"
                      >
                        <ChevronLeft className="w-4 h-4" /> Módulo anterior
                      </button>
                      <button
                        onClick={() => setModuleIndex(i => Math.min(theoryModules.length - 1, i + 1))}
                        disabled={moduleIndex === theoryModules.length - 1}
                        className="flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-xl flex items-center justify-center gap-2"
                      >
                        Módulo siguiente <ChevronRight className="w-4 h-4" />
                      </button>
                    </div>
                  </article>
                </div>
              </section>
            )}

            {view === 'gym' && (
              <section className="space-y-4">
                <div className="bg-white border border-slate-200 rounded-2xl p-5 md:p-6 shadow-sm space-y-3">
                  <h3 className="text-2xl font-extrabold text-slate-900 flex items-center gap-2">
                    <PenSquare className="w-6 h-6 text-indigo-600" /> Gimnasio de Prompts
                  </h3>
                  <p className="text-slate-700">
                    Esta sección está pensada como práctica real de prompting: en cada caso verás un prompt débil, por qué falla y una versión robusta mejorada.
                    La idea no es memorizar frases, sino entrenar criterio para iterar mejor.
                  </p>
                  <p className="text-sm text-slate-600">
                    Recomendación: prueba primero el prompt débil, observa la respuesta, y luego ejecuta el prompt mejorado para comparar calidad.
                  </p>
                </div>

                <div className="flex flex-col gap-2 bg-white border border-slate-200 rounded-2xl p-3 shadow-sm">
                  {promptLevels.map(level => (
                    <button
                      key={level.id}
                      onClick={() => setGymLevel(level.id)}
                      className={`text-left rounded-xl px-4 py-3 border transition ${gymLevel === level.id ? 'bg-indigo-50 border-indigo-300 text-indigo-900' : 'bg-white border-slate-200 hover:bg-slate-50 text-slate-700'}`}
                    >
                      <p className="font-bold">{level.label}</p>
                      <p className="text-sm opacity-90">{level.hint}</p>
                    </button>
                  ))}
                </div>

                <div className="space-y-4">
                  {visiblePrompts.map((item, idx) => (
                    <article key={item.id} className="bg-white border border-slate-200 rounded-2xl p-5 md:p-6 shadow-sm space-y-4">
                      <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3">
                        <div>
                          <p className="text-xs uppercase tracking-wider text-indigo-700 font-bold">{item.domain}</p>
                          <h4 className="text-xl font-extrabold text-slate-900">{idx + 1}. {item.title}</h4>
                          <p className="text-slate-600 text-sm mt-1"><strong>Objetivo:</strong> {item.objective}</p>
                          <div className="flex flex-wrap gap-2 mt-3">
                            {item.techniques.map((tech, techIdx) => (
                              <span key={techIdx} className="text-xs bg-indigo-50 border border-indigo-200 text-indigo-800 px-2 py-1 rounded-full">
                                {tech}
                              </span>
                            ))}
                          </div>
                        </div>
                        <button
                          onClick={() => copyPrompt(item.enhancedPrompt, item.id)}
                          className={`px-4 py-2 text-sm font-bold rounded-xl border flex items-center gap-2 self-start ${copiedId === item.id ? 'bg-emerald-50 text-emerald-800 border-emerald-300' : 'bg-indigo-600 text-white border-indigo-600 hover:bg-indigo-700'}`}
                        >
                          {copiedId === item.id ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                          {copiedId === item.id ? 'Copiado' : 'Copiar prompt mejorado'}
                        </button>
                      </div>

                      <div className="bg-rose-50 border border-rose-200 rounded-xl p-4">
                        <p className="text-sm font-bold text-rose-900 mb-2">Prompt débil (ejemplo a evitar)</p>
                        <pre className="whitespace-pre-wrap text-sm leading-relaxed text-rose-900 font-mono">{item.badPrompt}</pre>
                        <p className="text-xs text-rose-900 mt-2"><strong>Por qué no funciona bien:</strong> {item.badReason}</p>
                      </div>

                      <div className="bg-slate-50 border border-slate-200 rounded-xl p-4">
                        <p className="text-sm font-bold text-slate-700 mb-2">Prompt mejorado (listo para usar)</p>
                        <pre className="whitespace-pre-wrap text-sm leading-relaxed text-slate-900 font-mono">{item.enhancedPrompt}</pre>
                      </div>

                      <div className="bg-emerald-50 border border-emerald-200 rounded-xl p-4">
                        <p className="text-sm font-bold text-emerald-900 mb-1">Qué mejora aporta esta versión</p>
                        <p className="text-sm text-emerald-900">{item.why}</p>
                      </div>
                    </article>
                  ))}
                </div>
              </section>
            )}

            {view === 'stories' && (
              <section className="space-y-4">
                <div className="bg-white border border-slate-200 rounded-2xl p-5 md:p-6 shadow-sm space-y-2">
                  <h3 className="text-2xl font-extrabold text-slate-900 flex items-center gap-2">
                    <Microscope className="w-6 h-6 text-indigo-600" /> Historias de uso realista
                  </h3>
                  <p className="text-slate-700">
                    Esta galería está pensada como laboratorio conversacional: verás intentos iniciales, correcciones, advertencias y versiones mejoradas.
                    La idea es mostrar cómo se itera de verdad hasta obtener resultados útiles y seguros.
                  </p>
                  <div className="grid md:grid-cols-3 gap-2 pt-1">
                    <div className="bg-rose-50 border border-rose-200 text-rose-900 text-xs rounded-lg px-3 py-2">Alucinaciones convincentes: verificar siempre datos críticos.</div>
                    <div className="bg-amber-50 border border-amber-200 text-amber-900 text-xs rounded-lg px-3 py-2">Dependencia emocional: poner límites de uso y sostener vínculos reales.</div>
                    <div className="bg-sky-50 border border-sky-200 text-sky-900 text-xs rounded-lg px-3 py-2">Seguridad práctica: evitar acciones de riesgo sin supervisión profesional.</div>
                  </div>
                </div>

                <div className="grid lg:grid-cols-[320px_1fr] gap-4">
                  <aside className="bg-white border border-slate-200 rounded-2xl p-3 shadow-sm h-fit lg:sticky lg:top-28">
                    <p className="text-sm font-bold text-slate-700 mb-3 flex items-center gap-2"><Library className="w-4 h-4 text-indigo-600" /> Casos disponibles</p>
                    <div className="space-y-2 max-h-[70vh] overflow-auto pr-1">
                      {stories.map((story) => (
                        <button
                          key={story.id}
                          onClick={() => setStoryId(story.id)}
                          className={`w-full text-left rounded-xl p-3 border transition ${storyId === story.id ? 'bg-indigo-50 border-indigo-300 text-indigo-900' : 'bg-white border-slate-200 hover:bg-slate-50 text-slate-700'}`}
                        >
                          <p className="font-bold text-sm">{story.title}</p>
                          <p className="text-xs mt-1 opacity-90">{story.focus}</p>
                        </button>
                      ))}
                    </div>
                  </aside>

                  <article className="bg-white border border-slate-200 rounded-2xl p-5 md:p-6 shadow-sm space-y-5">
                    <div>
                      <p className="text-xs uppercase tracking-wider text-indigo-700 font-bold">{selectedStory.focus}</p>
                      <h4 className="text-2xl font-extrabold text-slate-900 mt-1">{selectedStory.title}</h4>
                      <p className="text-slate-700 mt-2">{selectedStory.context}</p>
                    </div>

                    <div className="space-y-3">
                      {selectedStory.conversation.map((msg, idx) => {
                        const chatLike = msg.role === 'usuario' || msg.role === 'ia' || msg.role === 'ajuste';
                        const alignRight = msg.role === 'usuario';
                        return (
                          <div key={idx} className={chatLike ? `flex ${alignRight ? 'justify-end' : 'justify-start'}` : ''}>
                            <div className={`rounded-xl border p-4 ${chatLike ? 'max-w-[92%] md:max-w-[80%]' : ''} ${roleColor[msg.role] || 'bg-slate-100 border-slate-300 text-slate-900'}`}>
                              <p className="text-xs font-bold uppercase tracking-wider mb-1 flex items-center justify-between gap-2">
                                <span>{roleLabel[msg.role] || 'Bloque'}</span>
                                <span className="opacity-70">Paso {idx + 1}</span>
                              </p>
                              <p className="text-sm leading-relaxed">{msg.text}</p>
                            </div>
                          </div>
                        );
                      })}
                    </div>

                    <div className="bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3">
                      <p className="font-bold text-slate-800 flex items-center gap-2"><ArrowUpRight className="w-4 h-4 text-indigo-600" /> Prompt reutilizable</p>
                      <pre className="whitespace-pre-wrap text-sm font-mono text-slate-900">{selectedStory.reusablePrompt}</pre>
                      <button
                        onClick={() => copyPrompt(selectedStory.reusablePrompt, selectedStory.id)}
                        className={`px-4 py-2 text-sm font-bold rounded-xl border flex items-center gap-2 ${copiedId === selectedStory.id ? 'bg-emerald-50 text-emerald-800 border-emerald-300' : 'bg-indigo-600 text-white border-indigo-600 hover:bg-indigo-700'}`}
                      >
                        {copiedId === selectedStory.id ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                        {copiedId === selectedStory.id ? 'Copiado' : 'Copiar prompt de la historia'}
                      </button>
                    </div>
                  </article>
                </div>
              </section>
            )}

            <section className="bg-white border border-slate-200 rounded-2xl p-5 md:p-6 shadow-sm">
              <p className="font-bold text-slate-800 flex items-center gap-2"><CheckCircle2 className="w-5 h-5 text-emerald-600" /> Cierre de sesión sugerido</p>
              <p className="text-slate-700 mt-2">
                Antes de cerrar, guarda al menos un prompt que te haya resultado útil y escribe en una línea qué vas a probar en la próxima sesión.
                La mejora sostenida aparece cuando cada práctica deja una decisión concreta para continuar.
              </p>
            </section>
          </main>
        </div>
      );
    };

    createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>

</html>
