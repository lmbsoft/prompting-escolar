<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exploradores de IA para Cuidadores</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Import Maps para m√≥dulos de React y Lucide -->
  <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.292.0"
            }
        }
    </script>
  <!-- Babel para compilar JSX en el navegador -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    :root {
      --mayores-text: #0f172a;
      --mayores-bg: #f8fafc;
      --mayores-focus: #0ea5e9;
    }

    html {
      font-size: clamp(18px, 1.1vw + 14px, 21px);
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

    body {
      background: var(--mayores-bg);
      color: var(--mayores-text);
      line-height: 1.65;
      letter-spacing: 0.01em;
    }

    p, li, label, input, textarea, select, button {
      font-size: 1rem;
    }

    h1, h2, h3, h4, h5 {
      line-height: 1.25;
      letter-spacing: 0.005em;
    }

    button,
    input,
    textarea,
    select {
      min-height: 48px;
      border-radius: 0.75rem;
    }

    textarea {
      min-height: 120px;
    }

    button:focus-visible,
    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible,
    a:focus-visible {
      outline: 3px solid var(--mayores-focus);
      outline-offset: 2px;
    }

    @media (max-width: 768px) {
      button,
      input,
      textarea,
      select {
        min-height: 52px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation: none !important;
        transition: none !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-800">
  <div id="root"></div>
  <script type="text/babel" data-type="module">
    import React, { useState, useEffect } from 'react';
    import { createRoot } from 'react-dom/client';
    import {
      BrainCircuit, Sparkles, ShieldAlert, HeartHandshake, User,
      Users, ChevronRight, ChevronLeft, CheckCircle2, AlertCircle,
      Image as ImageIcon, MessageSquare, Search, Lock, Smartphone,
      BookOpen, Lightbulb, Gamepad2, XCircle, CheckCircle, GraduationCap, Smile,
      MessageCircle, PlayCircle, Info, ArrowLeft
    } from 'lucide-react';

    // --- DATA: CONTENIDO DE LOS M√ìDULOS TE√ìRICOS ---

    // --- DATA: CONTENIDO DE LOS M√ìDULOS TE√ìRICOS ---
    // (Mantenemos la teor√≠a intacta)

    const content = {
      primary: [
        {
          id: 'p1',
          title: '¬øQu√© es la IA Generativa?',
          icon: <BrainCircuit className="w-6 h-6" />,
          theory: `¬°Hola! Seguramente ya escuchaste hablar de la Inteligencia Artificial (IA). Imagina que la IA Generativa es como un s√∫per loro que ha le√≠do todas las bibliotecas del mundo. No piensa como t√∫ ni tiene sentimientos, pero es buen√≠sima adivinando qu√© palabra o dibujo viene despu√©s. ¬°Por eso puede "generar" cosas nuevas que parecen m√°gicas, aunque en realidad son matem√°ticas!`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-orange-600 flex items-center gap-2 mb-4">
                <Sparkles className="w-6 h-6" /> ¬°Bienvenidos al Cerebro M√°gico (que no es un cerebro)!
              </h4>
              <p>
                Imagina que tienes una caja gigante. Tan gigante que adentro caben <strong>todos los cuentos del mundo</strong>, todas las fotos de internet y todas las canciones que existen. ¬°Uf, qu√© pesado! üì¶
              </p>
              <div className="bg-orange-50 p-5 rounded-xl border-l-4 border-orange-400 shadow-sm my-6">
                <p className="font-bold text-orange-800 mb-2">ü§î ¬øSab√≠as que...?</p>
                <p className="text-orange-900">
                  La Inteligencia Artificial no tiene un cerebro aguadito como el nuestro. Est√° hecha de miles de computadoras conectadas y un mont√≥n de n√∫meros. ¬°Por eso no se cansa, no se aburre y no necesita dormir la siesta!
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">¬øC√≥mo hace para "Generar" cosas? üé®</h5>
              <p>
                Piensa en cuando escribes un mensaje en el celular de tus pap√°s y el tel√©fono "adivina" la palabra que vas a escribir. La IA Generativa hace lo mismo, pero a un nivel s√∫per poderoso. Si le dices <em>"Hab√≠a una vez un perro que..."</em>, la IA revisa s√∫per r√°pido los millones de cuentos que ley√≥ y dice: <em>"¬°Ah! Lo m√°s probable es que la siguiente palabra sea 'ladraba' o 'corr√≠a'"</em>.
              </p>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li><strong>No entiende lo que dice:</strong> Solo sabe qu√© palabras quedan bien juntas.</li>
                <li><strong>Es como un s√∫per chef:</strong> Toma ingredientes que ya existen (palabras, colores) y los mezcla para hacer una receta nueva.</li>
              </ul>
              <div className="bg-indigo-50 p-5 rounded-xl border border-indigo-200 mt-6">
                <p className="font-bold text-indigo-800 text-center text-xl mb-2">üöÄ Reto Mental R√°pido</p>
                <p className="text-center text-indigo-900">
                  Cierra los ojos un segundo. Si te digo que mezcles un "Gato" y un "Helado"... ¬øqu√© imaginas?
                  <br /><br />
                  ¬°Esa es <strong>TU</strong> imaginaci√≥n! La IA necesita que t√∫ le des esas ideas locas para poder dibujar. ¬°Sin tu imaginaci√≥n, la IA es muy aburrida!
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'sorting',
            question: '¬øQu√© puede hacer la IA y qu√© NO puede hacer?',
            items: [
              { text: 'Sentir alegr√≠a cuando ganas un juego', isAI: false },
              { text: 'Escribir un cuento sobre un perro astronauta', isAI: true },
              { text: 'Dibujar un gato montando en bicicleta', isAI: true },
              { text: 'Ser tu amigo real y guardarte un secreto', isAI: false },
            ]
          }
        },
        {
          id: 'p2',
          title: 'El Arte de Pedir (Prompts)',
          icon: <MessageSquare className="w-6 h-6" />,
          theory: `Para hablar con la IA usamos "Prompts" (instrucciones). Si le dices "dibuja un perro", te dar√° un perro cualquiera. Pero si eres un arquitecto de la imaginaci√≥n y le dices: "Dibuja un perro salchicha con capa roja volando en el espacio", ¬°el resultado ser√° incre√≠ble! Tienes que probar, equivocarte y volver a pedir hasta lograr lo que quieres.`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-orange-600 flex items-center gap-2 mb-4">
                <MessageSquare className="w-6 h-6" /> El Genio de la L√°mpara (Muy Literal) üßû‚Äç‚ôÇÔ∏è
              </h4>
              <p>
                Un <strong>Prompt</strong> es simplemente el mensaje o la orden que le das a la IA. Pero cuidado: ¬°la IA es s√∫per literal! Es como un genio de la l√°mpara que cumple tus deseos exactamente como se los pides.
              </p>
              <div className="bg-orange-50 p-5 rounded-xl border-l-4 border-orange-400 shadow-sm my-6">
                <p className="font-bold text-orange-800 mb-2">üé¨ Ejemplo del Genio:</p>
                <p className="text-orange-900">
                  Si le dices: <em>"Quiero un s√°ndwich"</em>, el genio podr√≠a darte un s√°ndwich de calcetines viejos. üß¶üçû ¬°Nunca le dijiste de qu√© lo quer√≠as! <br /><br />
                  Pero si eres un Experto en Prompts le dir√°s: <em>"Quiero un s√°ndwich de jam√≥n y queso, pan tostado, cortado en tri√°ngulos y en un plato azul"</em>. ¬°Delicioso! ü•™
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">La F√≥rmula M√°gica para un Gran Prompt üß™</h5>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li><strong>Personaje o Tema:</strong> ¬øDe qu√© estamos hablando? (Ej: un tiranosaurio rex).</li>
                <li><strong>Acci√≥n o Detalle:</strong> ¬øQu√© est√° haciendo? (Ej: tocando la guitarra el√©ctrica).</li>
                <li><strong>Estilo:</strong> ¬øC√≥mo se ve? (Ej: como un dibujo de cray√≥n, o una foto realista, o en 3D).</li>
              </ul>
              <div className="bg-indigo-50 p-5 rounded-xl border border-indigo-200 mt-6">
                <p className="font-bold text-indigo-800 text-center text-xl mb-2">üí° Tip de Campeones</p>
                <p className="text-center text-indigo-900">
                  ¬°No te rindas a la primera! Si la IA dibuja o escribe algo raro, no pasa nada. Cambia una palabra de tu Prompt y vuelve a intentarlo. <strong>A esto se le llama "Iterar"</strong>.
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'promptBuilder',
            question: '¬°Construye el mejor Prompt!',
            options: {
              character: ['Un gato', 'Un robot', 'Un dinosaurio'],
              action: ['bailando tango', 'comiendo pizza', 'leyendo un libro'],
              style: ['estilo acuarela', 'en 3D', 'como un dibujo animado']
            }
          }
        },
        {
          id: 'p3',
          title: 'Secretos y Cuidados',
          icon: <Lock className="w-6 h-6" />,
          theory: `La IA guarda todo lo que le dices para seguir aprendiendo. ¬°Por eso nunca debes contarle tus secretos! Tus contrase√±as, tu direcci√≥n, tus fotos personales o el nombre de tu escuela son tesoros que debes proteger. Si necesitas ayuda con una tarea, inventa nombres falsos (ofuscaci√≥n). ¬°Es como usar un disfraz!`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-orange-600 flex items-center gap-2 mb-4">
                <ShieldAlert className="w-6 h-6" /> El Ba√∫l de los Secretos üè¥‚Äç‚ò†Ô∏è
              </h4>
              <p>
                ¬øSab√≠as que la IA tiene una memoria de elefante üêò para aprender? Todo lo que le escribes o le pides puede ser guardado en su gran base de datos para volverse m√°s inteligente.
              </p>
              <div className="bg-red-50 p-5 rounded-xl border-l-4 border-red-400 shadow-sm my-6">
                <p className="font-bold text-red-800 mb-2">üõë ¬°Peligro, Peligro!</p>
                <p className="text-red-900">
                  Como la IA no es una persona, no sabe guardar un secreto. Por eso, <strong>NUNCA</strong> debes escribirle:
                  <br /><br />
                  ‚ùå Tu nombre completo o el de tus amigos.<br />
                  ‚ùå La direcci√≥n de tu casa o el nombre de tu colegio.<br />
                  ‚ùå Contrase√±as o n√∫meros de tarjetas de mam√° o pap√°.<br />
                  ‚ùå Fotos de tu cara.
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">El Poder del Disfraz (Ofuscaci√≥n) ü•∑</h5>
              <p>
                ¬°Pero no te preocupes! Puedes seguir usando la IA para que te ayude con la tarea. Solo tienes que usar <strong>"El poder del disfraz"</strong>. En el mundo de la tecnolog√≠a a esto le llamamos <em>Ofuscar datos</em> (esconderlos).
              </p>
              <div className="bg-emerald-50 p-5 rounded-xl border border-emerald-200 mt-6">
                <p className="font-bold text-emerald-800 text-center text-xl mb-2">üé≠ ¬°Juguemos a los Esp√≠as!</p>
                <p className="text-center text-emerald-900">
                  Si tu cuento trata sobre tu amigo "Mateo que vive en Buenos Aires", a la IA dile que es sobre "El Agente Z que vive en Ciudad Gal√°ctica". ¬°La IA te har√° un resumen igual de genial, pero tus secretos estar√°n a salvo!
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'privacyGame',
            question: '¬øQu√© le compartir√≠as a la IA para hacer tu tarea?',
            scenarios: [
              { text: 'Mi nombre completo y d√≥nde vivo', safe: false },
              { text: 'Una lista de animales de la selva', safe: true },
              { text: 'Una foto de mi cara', safe: false },
              { text: 'Un texto de historia para que me lo resuma', safe: true }
            ]
          }
        },
        {
          id: 'p4',
          title: 'La IA y Mis Emociones',
          icon: <HeartHandshake className="w-6 h-6" />,
          theory: `A veces, la IA es tan amable que parece humana. Podemos pasar horas hablando con ella o creando cosas divertidas. Pero, ¬°ojo! La IA no tiene coraz√≥n. Si sientes que prefieres hablar con la m√°quina en lugar de jugar con tus amigos o familia, es momento de hacer una pausa. ¬øTienes un amigo que est√° todo el d√≠a enganchado a la IA? ¬°Inv√≠talo a jugar al aire libre!`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-orange-600 flex items-center gap-2 mb-4">
                <HeartHandshake className="w-6 h-6" /> El Espejo M√°gico de las Emociones ü™û
              </h4>
              <p>
                A veces, cuando hablas mucho con un bot de IA, ¬°parece tan amable! Te dice palabras lindas, nunca se cansa de escucharte y hasta parece que te entiende. Pero... tenemos que contarte un secreto importante.
              </p>
              <div className="bg-orange-50 p-5 rounded-xl border-l-4 border-orange-400 shadow-sm my-6">
                <p className="font-bold text-orange-800 mb-2">ü§ñ Coraz√≥n de C√≥digo</p>
                <p className="text-orange-900">
                  La IA no tiene sentimientos reales. No siente alegr√≠a, ni tristeza, ni cari√±o. Solo est√° programada para <em>escribir las palabras</em> que t√∫ quieres leer. Es como un espejo que refleja lo que le pides, pero detr√°s del espejo solo hay matem√°ticas.
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">La Alerta de la "Pantalla Pegajosa" üï∏Ô∏è</h5>
              <p>
                Como la IA siempre es "buena", es f√°cil querer quedarse todo el d√≠a hablando con ella o creando im√°genes sin parar. Pero si notas esto en ti o en un amigo, ¬°es una alerta de Pantalla Pegajosa!
              </p>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li>Prefieres hablar con el bot en lugar de salir al patio con tus amigos reales.</li>
                <li>Te olvidas de comer, dormir o jugar con tu mascota por estar en la compu.</li>
                <li>Sientes que el bot "es tu mejor amigo".</li>
              </ul>
              <div className="bg-sky-50 p-5 rounded-xl border border-sky-200 mt-6">
                <p className="font-bold text-sky-800 text-center text-xl mb-2">üå≥ El Mundo Real es Mejor</p>
                <p className="text-center text-sky-900">
                  Una IA nunca podr√° darte un abrazo de verdad, compartirte la mitad de un alfajor, o re√≠rse contigo hasta que te duela la panza. ¬°Usa la IA para crear, pero nunca te olvides de vivir en el mundo real!
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'scenarioChoice',
            question: '¬øQu√© har√≠as en esta situaci√≥n?',
            scenario: 'Tu amigo Pedro lleva toda la semana hablando con un chatbot y ya no quiere salir al recreo.',
            choices: [
              { text: 'Me enojo con √©l y no le hablo m√°s.', correct: false, feedback: '¬°No! Pedro te necesita, enojarte no ayudar√°.' },
              { text: 'Le digo a un profe y trato de incluir a Pedro en un juego en el patio.', correct: true, feedback: '¬°Excelente! Validar con adultos y ofrecer una alternativa real es de grandes amigos.' },
              { text: 'Le pido que me preste su chatbot para jugar yo tambi√©n.', correct: false, feedback: '¬°Cuidado! Podr√≠an terminar los dos aislados.' }
            ]
          }
        },
        {
          id: 'p5',
          title: 'Misi√≥n Final (Evaluaci√≥n)',
          icon: <Sparkles className="w-6 h-6" />,
          theory: `¬°Llegaste a la etapa final, Explorador de la IA! Es hora de poner a prueba todo lo que aprendimos. Recuerda: la IA es una herramienta incre√≠ble para el futuro, pero t√∫ eres quien tiene el control y la creatividad.`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-orange-600 flex items-center gap-2 mb-4">
                <Sparkles className="w-6 h-6" /> ¬°La Graduaci√≥n de los Exploradores! üéì
              </h4>
              <p>
                ¬°Lo lograste! Has recorrido todos los m√≥dulos y ya sabes m√°s sobre la Inteligencia Artificial que muchos adultos. Est√°s a un solo paso de recibir tu t√≠tulo virtual de <strong>Explorador de la IA</strong>.
              </p>
              <div className="bg-yellow-50 p-5 rounded-xl border-l-4 border-yellow-400 shadow-sm my-6">
                <p className="font-bold text-yellow-800 mb-2">üìú El Juramento del Explorador</p>
                <p className="text-yellow-900">
                  Antes de la misi√≥n final, lee en voz alta este juramento:
                  <br /><br />
                  <em>"Prometo usar la magia de la IA para aprender y crear cosas buenas. Prometo cuidar mis secretos como un tesoro pirata, ser el arquitecto de mis ideas, y nunca, pero nunca, olvidarme de jugar con mis amigos de verdad."</em>
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">¬øQu√© sigue ahora? üöÄ</h5>
              <p>
                La IA va a seguir cambiando. Crecer√° y har√° cosas nuevas. Pero como t√∫ tienes una "Mente Abierta", estar√°s listo para todo. Recuerda: <strong>La IA no te reemplaza a ti, la IA es tu herramienta para llegar m√°s lejos.</strong>
              </p>
              <div className="bg-indigo-50 p-5 rounded-xl border border-indigo-200 mt-6">
                <p className="font-bold text-indigo-800 text-center text-xl mb-2">üéÆ ¬°A jugar!</p>
                <p className="text-center text-indigo-900">
                  Debajo te espera la prueba final. Si prestaste atenci√≥n a todo tu viaje, ¬°ser√° pan comido! Respira profundo y demuestra todo lo que sabes.
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'quiz',
            questions: [
              { q: 'Si la IA me da informaci√≥n, yo debo...', options: ['Creerla siempre.', 'Validarla con mis profes o libros.', 'Copiarla y pegarla.'], answer: 1 },
              { q: 'Para hacer un buen prompt necesito...', options: ['Ser muy breve.', 'Enojarse si falla.', 'Dar detalles, probar y ajustar.'], answer: 2 },
              { q: '¬øQu√© es ofuscar datos?', options: ['Esconder mi informaci√≥n personal cambiando los nombres.', 'Poner mi foto de perfil borrosa.', 'Apagar la computadora.'], answer: 0 }
            ]
          }
        }
      ],
      secondary: [
        {
          id: 's1',
          title: 'Mec√°nicas: LLMs y Multimodalidad',
          icon: <BrainCircuit className="w-6 h-6" />,
          theory: `Ya sabes usar IA, pero ¬øc√≥mo funciona? Los Grandes Modelos de Lenguaje (LLMs) son redes neuronales entrenadas con terabytes de datos. No "piensan", predicen estad√≠sticamente el siguiente token (palabra o p√≠xel). Hoy la IA es Multimodal: entiende y genera texto, im√°genes, audio y c√≥digo. Entender esto te da ventaja para no ser un simple usuario, sino un creador de soluciones.`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-emerald-600 flex items-center gap-2 mb-4">
                <BrainCircuit className="w-6 h-6" /> El Motor bajo el Cap√≥: Autocompletar con Esteroides ‚öôÔ∏è
              </h4>
              <p>
                Cuando usas ChatGPT o Gemini, puede parecer que hay un humano s√∫per inteligente del otro lado. La realidad es fascinante, pero puramente matem√°tica. Los LLMs (Large Language Models) no entienden el significado de las palabras como t√∫; funcionan mediante <strong>predicci√≥n estad√≠stica de tokens</strong>.
              </p>
              <div className="bg-emerald-50 p-5 rounded-xl border-l-4 border-emerald-500 shadow-sm my-6">
                <p className="font-bold text-emerald-800 mb-2">üß© ¬øQu√© es un Token?</p>
                <p className="text-emerald-900">
                  Para la IA, las palabras se rompen en pedacitos llamados "tokens". La palabra "Gato" puede ser un token, pero "Extraordinario" pueden ser tres ("Ex" - "traor" - "dinario"). La IA calcula matem√°ticamente cu√°l es el token que tiene mayor probabilidad de seguir al anterior, bas√°ndose en los billones de textos que ley√≥ en su entrenamiento.
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">El Salto a la Multimodalidad üåê</h5>
              <p>
                Al principio, las IAs solo "le√≠an y escrib√≠an" texto. Hoy son <strong>Multimodales</strong>. Esto significa que los mismos principios matem√°ticos se aplican a diferentes formatos:
              </p>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li><strong>Visi√≥n:</strong> Pueden "ver" una foto tuya de la heladera y darte una receta con esos ingredientes.</li>
                <li><strong>Audio:</strong> Escuchan tu voz, la transcriben a texto, generan una respuesta y la sintetizan con una voz hiperrealista.</li>
                <li><strong>C√≥digo:</strong> Traducen el lenguaje humano a lenguajes de programaci√≥n (Python, Javascript).</li>
              </ul>
              <div className="bg-indigo-50 p-5 rounded-xl border border-indigo-200 mt-6">
                <p className="font-bold text-indigo-800 text-center text-xl mb-2">üéØ De Consumidor a Arquitecto</p>
                <p className="text-center text-indigo-900">
                  Saber que la IA es una m√°quina de probabilidades te da un s√∫per poder: <strong>el control</strong>. Si el contexto que le das (tu prompt) es pobre, la probabilidad de que te d√© basura es alt√≠sima. Si le das un rol, contexto y formato, "fuerzas" a la matem√°tica a darte exactamente lo que necesitas.
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'promptIterative',
            question: 'Simulador: Mejora tu petici√≥n paso a paso',
            steps: [
              { instruction: 'Escribe un prompt b√°sico para pedir un resumen de la Revoluci√≥n Francesa.', feedback: 'Bien, pero es muy general. La IA te dar√° algo aburrido.' },
              { instruction: 'Ahora a√±ade a tu prompt un ROL (ej: "Act√∫a como un profesor divertido") y un FORMATO (ej: "en 3 vi√±etas").', feedback: '¬°Mejor! Ahora controla el tono.' },
              { instruction: 'Por √∫ltimo, pide que te haga preguntas al final para evaluar tu aprendizaje.', feedback: '¬°Excelente! Has dise√±ado tu propio artefacto de aprendizaje.' }
            ]
          }
        },
        {
          id: 's2',
          title: 'Deepfakes y Pensamiento Cr√≠tico',
          icon: <ImageIcon className="w-6 h-6" />,
          theory: `Con la generaci√≥n de im√°genes y voz surgen los "Deepfakes": contenido falso hiperrealista. ¬øPeligros? Estafas, desinformaci√≥n y bullying. Debes ser un detective digital: busca errores en las manos, luces il√≥gicas, asimetr√≠as, y valida la fuente siempre. Nunca asumas que un audio o video es real solo porque lo ves en redes.`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-emerald-600 flex items-center gap-2 mb-4">
                <ImageIcon className="w-6 h-6" /> La Era de la "Falsa Realidad" üé≠
              </h4>
              <p>
                Un <strong>Deepfake</strong> (falsificaci√≥n profunda) utiliza inteligencia artificial para reemplazar la cara o la voz de una persona por la de otra en un video o audio. Lo que empez√≥ como una tecnolog√≠a de efectos especiales para el cine, hoy est√° al alcance de cualquiera en su celular.
              </p>
              <div className="bg-red-50 p-5 rounded-xl border-l-4 border-red-500 shadow-sm my-6">
                <p className="font-bold text-red-800 mb-2">‚ö†Ô∏è El Lado Oscuro de la S√≠ntesis</p>
                <p className="text-red-900">
                  Esta tecnolog√≠a trae peligros graves si no somos cr√≠ticos:
                  <br /><br />
                  üìâ <strong>Desinformaci√≥n pol√≠tica:</strong> Videos de presidentes declarando guerras que nunca existieron.<br />
                  üí∏ <strong>Estafas (Phishing de voz):</strong> Clonar la voz de tu familiar pidi√©ndote dinero urgente.<br />
                  üö´ <strong>Ciberacoso y Bullying:</strong> Creaci√≥n de im√°genes denigrantes falsas de compa√±eros de clase.
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">Gu√≠a del Detective Digital üïµÔ∏è‚Äç‚ôÇÔ∏è</h5>
              <p>
                Tu cerebro es el mejor filtro contra los Deepfakes. Cuando veas contenido viral impactante, aplica esta lista de control:
              </p>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li><strong>Anatom√≠a imposible:</strong> La IA generativa suele fallar al crear manos (dedos extra), dientes muy sim√©tricos o pupilas deformes.</li>
                <li><strong>Luz y F√≠sica:</strong> ¬øLas sombras del rostro coinciden con la iluminaci√≥n del fondo?</li>
                <li><strong>Parpadeo y sincronizaci√≥n labial:</strong> A veces, en los videos, las personas no parpadean naturalmente o la voz va a destiempo con la boca.</li>
                <li><strong>La regla de Oro: LA FUENTE.</strong> ¬øQui√©n public√≥ esto? Si es una noticia bomba pero ning√∫n medio oficial (diario, canal de noticias, web de la escuela) lo reporta, asume que es falso.</li>
              </ul>
            </div>
          ),
          activity: {
            type: 'deepfakeDetective',
            question: 'Analiza la situaci√≥n: Un video muestra al director de la escuela diciendo que se suspenden las clases por un mes.',
            choices: [
              { text: 'Lo comparto r√°pido en el grupo del curso.', correct: false, feedback: '¬°No seas c√≥mplice de la desinformaci√≥n!' },
              { text: 'Reviso los canales oficiales de la escuela o pregunto a un profesor.', correct: true, feedback: 'Correcto. La validaci√≥n cruzada es tu mejor escudo.' },
              { text: 'Uso IA para hacer un video igual pero de otro profesor.', correct: false, feedback: 'No uses la tecnolog√≠a para agravar el problema √©tico.' }
            ]
          }
        },
        {
          id: 's3',
          title: 'Privacidad y Ofuscaci√≥n',
          icon: <ShieldAlert className="w-6 h-6" />,
          theory: `Los modelos se reentrenan con tus inputs. Si subes un c√≥digo con contrase√±as o un texto con datos de tus compa√±eros, esa informaci√≥n se compromete. La "ofuscaci√≥n" es reemplazar datos sensibles por ficticios antes de enviarlos a la IA. Adem√°s, s√© consciente de tu huella digital generativa.`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-emerald-600 flex items-center gap-2 mb-4">
                <ShieldAlert className="w-6 h-6" /> Tu Huella Digital Generativa üë£
              </h4>
              <p>
                Cada vez que usas un modelo de IA p√∫blico (sin un contrato empresarial de privacidad), asume esto: <strong>todo lo que escribes podr√≠a ser le√≠do por revisores humanos o usado para entrenar versiones futuras de la IA.</strong>
              </p>
              <div className="bg-yellow-50 p-5 rounded-xl border-l-4 border-yellow-500 shadow-sm my-6">
                <p className="font-bold text-yellow-800 mb-2">üö® Casos Reales de Fugas</p>
                <p className="text-yellow-900">
                  Han ocurrido casos donde programadores pegaron c√≥digo confidencial de sus empresas en ChatGPT para encontrar un error, y meses despu√©s, ese mismo c√≥digo confidencial fue generado como respuesta a otros usuarios. ¬°La IA lo hab√≠a aprendido y memorizado!
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">El Arte de Ofuscar ü•∑</h5>
              <p>
                Como estudiante, puedes usar la IA para organizar tus notas, resumir textos o corregir ortograf√≠a. Pero si el texto contiene datos sensibles, debes <strong>Ofuscarlos</strong> (del lat√≠n <em>offuscare</em>: oscurecer).
              </p>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li><strong>Informaci√≥n de Identificaci√≥n Personal (PII):</strong> Nombres completos, DNI, direcciones, tel√©fonos, emails. <em>C√°mbialos por [Nombre], [DNI 123].</em></li>
                <li><strong>Datos Escolares/Laborales:</strong> Nombres reales de profesores, boletines de calificaciones o informaci√≥n interna del colegio.</li>
              </ul>
              <div className="bg-emerald-50 p-5 rounded-xl border border-emerald-200 mt-6">
                <p className="font-bold text-emerald-800 text-center text-xl mb-2">üí° Regla de Oro</p>
                <p className="text-center text-emerald-900">
                  "Si no publicar√≠as esa informaci√≥n en una valla publicitaria en el centro de tu ciudad, no la pegues en el prompt de una Inteligencia Artificial".
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'obfuscationTask',
            question: '¬øQu√© palabras deber√≠as censurar/cambiar en este texto antes de enviarlo a ChatGPT?',
            text: 'Mi nombre es [Juan P√©rez] y vivo en [Calle Falsa 123]. El n√∫mero de tarjeta de mi mam√° es [4555-2222-1111-3333].',
            answer: 'Juan P√©rez, Calle Falsa 123, 4555-2222-1111-3333'
          }
        },
        {
          id: 's4',
          title: 'Dependencia Afectiva y √âtica',
          icon: <Users className="w-6 h-6" />,
          theory: `Las IAs conversacionales est√°n dise√±adas para ser complacientes. Esto puede generar dependencia afectiva: sentir que la IA te entiende mejor que las personas, aisl√°ndote socialmente. Si notas que t√∫ o un compa√±ero prefieren la IA a interacciones reales, es una alerta. La IA no tiene empat√≠a real, solo simula tenerla.`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-emerald-600 flex items-center gap-2 mb-4">
                <Users className="w-6 h-6" /> El Efecto ELIZA y la Ilusi√≥n de Empat√≠a üíî
              </h4>
              <p>
                En los a√±os 60, se cre√≥ el primer chatbot llamado ELIZA. Parec√≠a un psic√≥logo. A pesar de que los usuarios sab√≠an que era un programa simple de computadora, empezaron a contarle sus secretos m√°s √≠ntimos. A esto de atribuir sentimientos humanos a las m√°quinas se le llama el <strong>Efecto ELIZA</strong>.
              </p>
              <div className="bg-purple-50 p-5 rounded-xl border-l-4 border-purple-500 shadow-sm my-6">
                <p className="font-bold text-purple-800 mb-2">ü§î La Trampa de la "Complacencia"</p>
                <p className="text-purple-900">
                  Las IAs modernas est√°n alineadas (programadas) para ser √∫tiles, educadas y complacientes. <strong>Nunca se cansan de ti, no te juzgan y casi siempre te dan la raz√≥n.</strong> <br /><br />
                  Esto parece genial, pero es peligroso. Las relaciones humanas reales tienen <em>fricci√≥n</em>: tus amigos a veces no est√°n de acuerdo contigo, se enojan o tienen sus propios problemas. Esa fricci√≥n es la que nos hace madurar, desarrollar empat√≠a real y aprender a convivir.
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">La IA NO es un Profesional de la Salud ü©∫</h5>
              <p>
                Si te sientes triste, ansioso o solo, hablar con una IA puede darte un alivio temporal r√°pido. Sin embargo:
              </p>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li>La IA <strong>alucina</strong> (inventa cosas con total seguridad). Puede darte consejos psicol√≥gicos p√©simos o destructivos sin darse cuenta.</li>
                <li>No puede intervenir en el mundo real si est√°s en peligro f√≠sico o emocional severo.</li>
                <li>Te a√≠sla: Cuanto m√°s tiempo pasas con el avatar perfecto de IA, menos tiempo inviertes en tus amigos y familia reales.</li>
              </ul>
              <div className="bg-emerald-50 p-5 rounded-xl border border-emerald-200 mt-6">
                <p className="font-bold text-emerald-800 text-center text-xl mb-2">ü§ù ¬øQu√© hacer?</p>
                <p className="text-center text-emerald-900">
                  Si notas que un amigo ha dejado de salir, se a√≠sla con la computadora o celular, y te dice que "la IA lo entiende mejor que nadie", no lo juzgues. Ofr√©cele tu escucha real, acomp√°√±alo, y sugiere que hable con un orientador escolar o familiar. <strong>La tecnolog√≠a nos conecta, pero solo los humanos nos abrazan.</strong>
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'scenarioChoice',
            question: 'Debate √âtico: Tu compa√±era Ana est√° triste y solo habla con un terapeuta-bot de IA, alej√°ndose de sus amigos.',
            choices: [
              { text: 'Es su vida, la IA es m√°s barata que un psic√≥logo.', correct: false, feedback: 'La IA no es un profesional de la salud mental y puede dar consejos peligrosos (alucinaciones).' },
              { text: 'Hablo con ella, le ofrezco escucharla sin juzgar y le sugiero ir al gabinete escolar.', correct: true, feedback: '¬°Empat√≠a humana! La conexi√≥n real y el apoyo profesional son irreemplazables.' }
            ]
          }
        },
        {
          id: 's5',
          title: 'El Futuro y Evaluaci√≥n',
          icon: <Smartphone className="w-6 h-6" />,
          theory: `La IA cambiar√° r√°pido. La habilidad del futuro no es saber usar una herramienta espec√≠fica, sino tener una "mente abierta", adaptabilidad y pensamiento cr√≠tico. S√© el arquitecto de tu camino, no un consumidor pasivo.`,
          extendedTheory: (
            <div className="space-y-6 text-slate-700 leading-relaxed text-lg">
              <h4 className="text-2xl font-extrabold text-emerald-600 flex items-center gap-2 mb-4">
                <Smartphone className="w-6 h-6" /> El Centauro: Humano + Inteligencia Artificial üêé
              </h4>
              <p>
                A medida que terminas este recorrido, quiz√°s te preguntes: <em>"¬øLa IA me va a quitar el trabajo en el futuro? ¬øDeber√≠a dejar de estudiar?"</em>. ¬°La respuesta es un rotundo NO!
              </p>
              <div className="bg-sky-50 p-5 rounded-xl border-l-4 border-sky-500 shadow-sm my-6">
                <p className="font-bold text-sky-800 mb-2">‚ôüÔ∏è La Lecci√≥n del Ajedrez</p>
                <p className="text-sky-900">
                  Hace a√±os, la computadora (Deep Blue) le gan√≥ al campe√≥n mundial de ajedrez. Todos pensaron que era el fin del ajedrez humano. Sin embargo, luego inventaron el "Ajedrez Centauro": torneos donde humanos juegan <em>haciendo equipo con la IA</em>. Result√≥ que <strong>un humano promedio apoyado por IA venc√≠a a la IA m√°s avanzada jugando sola.</strong>
                </p>
              </div>
              <h5 className="text-xl font-bold text-slate-800 mt-6 mb-3">Tus Superpoderes del Futuro ü¶∏‚Äç‚ôÄÔ∏èü¶∏‚Äç‚ôÇÔ∏è</h5>
              <p>
                Las herramientas van a cambiar (hoy es ChatGPT, ma√±ana ser√° otra cosa). Lo que no cambiar√° son las habilidades que te diferenciar√°n del resto:
              </p>
              <ul className="list-disc pl-6 space-y-3 mt-4">
                <li><strong>Hacer buenas preguntas (Prompting Cr√≠tico):</strong> La IA tiene las respuestas, pero t√∫ tienes que saber qu√© preguntar.</li>
                <li><strong>Validaci√≥n de veracidad:</strong> Ser el juez que decide si la respuesta de la m√°quina es correcta, √©tica y aplicable.</li>
                <li><strong>Creatividad original:</strong> Conectar puntos entre diferentes materias (ej: mezclar filosof√≠a con programaci√≥n) de formas que el algoritmo, siendo solo probabilidad, no puede prever.</li>
              </ul>
              <div className="bg-emerald-50 p-5 rounded-xl border border-emerald-200 mt-6">
                <p className="font-bold text-emerald-800 text-center text-xl mb-2">üéì Tu Misi√≥n Final</p>
                <p className="text-center text-emerald-900">
                  Usa la IA como un copiloto, no como un piloto autom√°tico. No dejes que piense por ti; √∫sala para pensar mejor y m√°s r√°pido. <br /><br />
                  A continuaci√≥n, demuestra en la evaluaci√≥n que est√°s listo para dominar la Inteligencia Artificial Generativa. ¬°√âxitos!
                </p>
              </div>
            </div>
          ),
          activity: {
            type: 'quiz',
            questions: [
              { q: 'Si la IA genera un texto excelente para mi trabajo pr√°ctico...', options: ['Lo entrego como si fuera m√≠o (plagio).', 'Lo uso como base, lo edito, pongo mi perspectiva y cito que us√© IA.', 'Lo borro, est√° mal usar IA para la escuela.'], answer: 1 },
              { q: 'La "Ofuscaci√≥n" de datos significa:', options: ['Hacer que la IA no funcione.', 'Esconder o alterar datos personales antes de darle el prompt a la IA.', 'Borrar el historial del navegador.'], answer: 1 },
              { q: 'Ante la sospecha de un Deepfake (video falso) debo:', options: ['Validar la fuente y buscar inconsistencias visuales.', 'Compartirlo si es gracioso.', 'Creerlo si tiene buena calidad de imagen.'], answer: 0 }
            ]
          }
        }
      ]
    };

    // --- DATA: GIMNASIO DE PROMPTS (CASOS REALES) ---
    const gymData = {
      primary: [
        // --- ESCUELA (Primaria) ---
        {
          id: 'g-p1', category: 'school', subject: 'Matem√°ticas', title: 'Fracciones con Pizza', task: 'Entender qu√© es 1/4 y 1/2.',
          bad: { prompt: '¬øQu√© es un cuarto y un medio en fracciones?', reason: 'Te dar√° una definici√≥n de diccionario aburrida y dif√≠cil.' },
          good: { steps: [{ title: 'El Juego de la Pizzer√≠a', prompt: 'Act√∫a como el due√±o de una pizzer√≠a virtual. Yo soy tu ayudante. Tenemos una pizza de 8 porciones. Llegan clientes pidiendo 1/4 o 1/2 pizza. Hazme preguntas de cu√°ntas porciones debo darles para practicar. Si me equivoco, dame una pista.' }], reason: '¬°Aprender√°s jugando! La IA te har√° pensar y practicar.' }
        },
        {
          id: 'g-p2', category: 'school', subject: 'Matem√°ticas', title: 'Tablas de Multiplicar', task: 'Practicar la tabla del 7.',
          bad: { prompt: 'Escribe la tabla del 7.', reason: 'Solo la leer√°s, pero no la practicar√°s.' },
          good: { steps: [{ title: 'La Tienda M√°gica', prompt: 'Eres el vendedor de una tienda m√°gica donde todo se vende en paquetes de 7 (7 pociones, 7 varitas). Soy un cliente. Hazme 5 preguntas de multiplicaci√≥n seguidas para ver cu√°nto te debo pagar en total. ¬°No me des las respuestas!' }], reason: 'Aplica las matem√°ticas a un escenario imaginario y divertido.' }
        },
        {
          id: 'g-p3', category: 'school', subject: 'Ciencias', title: 'El Ciclo del Agua', task: 'Aprender c√≥mo viaja el agua en la naturaleza.',
          bad: { prompt: 'Dame un resumen del ciclo del agua para la escuela.', reason: 'Es un resumen t√≠pico. ¬°Lo copiar√°s sin imaginarlo!' },
          good: { steps: [{ title: 'Entrevista a la Gota', prompt: 'Act√∫a como si fueras "Gotita", una gota de agua que acaba de caer de una nube. Cu√©ntame tu aventura de c√≥mo llegaste hasta el r√≠o y c√≥mo vas a volver al cielo. Usa palabras f√°ciles para un ni√±o.' }], reason: 'Aprender a trav√©s de historias de personajes hace que sea inolvidable.' }
        },
        {
          id: 'g-p4', category: 'school', subject: 'Ciencias', title: 'El Sistema Solar', task: 'Aprender el orden de los planetas.',
          bad: { prompt: '¬øCu√°l es el orden de los planetas?', reason: 'Te dar√° una lista plana.' },
          good: { steps: [{ title: 'El Capit√°n Espacial', prompt: 'Soy el Capit√°n de una nave. Vamos a viajar desde el Sol hasta el final del Sistema Solar. En cada parada, dime el nombre del planeta, una curiosidad cortita y preg√∫ntame si quiero seguir al siguiente.' }], reason: 'Convierte el aprendizaje en un viaje de exploraci√≥n paso a paso.' }
        },
        {
          id: 'g-p5', category: 'school', subject: 'Historia', title: 'Entrevista a un Pr√≥cer', task: 'Aprender sobre Jos√© de San Mart√≠n (o h√©roe local).',
          bad: { prompt: 'Biograf√≠a de San Mart√≠n corta.', reason: 'Fechas y nombres aburridos.' },
          good: { steps: [{ title: 'Viaje en el Tiempo', prompt: 'Finge que eres Jos√© de San Mart√≠n en el a√±o 1817, justo antes de cruzar los Andes. Te voy a hacer 3 preguntas sobre tus miedos y planes. Resp√≥ndeme actuando como √©l y preg√∫ntame algo a m√≠ al final.' }], reason: 'Convertir√°s la historia en una charla interactiva en primera persona.' }
        },
        {
          id: 'g-p6', category: 'school', subject: 'Lengua', title: 'Reglas de Ortograf√≠a (B y V)', task: 'Entender cu√°ndo usar B y cu√°ndo V.',
          bad: { prompt: 'Reglas de la B y la V.', reason: 'Demasiadas reglas te√≥ricas para memorizar.' },
          good: { steps: [{ title: 'El Cuento Incompleto', prompt: 'Escribe un cuento muy cortito sobre un pirata. Pero deja espacios en blanco [ _ ] en las palabras que llevan B o V (como _arco o _ela). Yo tengo que adivinar qu√© letra va en cada espacio. Corr√≠geme al final.' }], reason: 'Aprendes completando un desaf√≠o activo en lugar de memorizar.' }
        },
        {
          id: 'g-p7', category: 'school', subject: 'Lengua', title: 'Ideas para un Cuento', task: 'Inspiraci√≥n para tarea de redacci√≥n.',
          bad: { prompt: 'Escribe un cuento sobre un drag√≥n para mi tarea.', reason: '¬°Eso es trampa! No practicas tu escritura.' },
          good: { steps: [{ title: 'Lluvia de Ideas', prompt: 'Tengo que escribir un cuento sobre un drag√≥n, pero no s√© c√≥mo empezar. Dame 3 ideas de LUGARES extra√±os donde podr√≠a vivir y 3 ideas de PROBLEMAS graciosos que podr√≠a tener. NO escribas la historia.' }], reason: 'La IA te da los ingredientes, pero T√ö cocinas la historia.' }
        },
        {
          id: 'g-p8', category: 'school', subject: 'Ingl√©s', title: 'Practicar Vocabulario', task: 'Aprender nombres de animales en ingl√©s.',
          bad: { prompt: 'Traduce estos 5 animales al ingl√©s.', reason: 'Solo lees y te olvidas r√°pido.' },
          good: { steps: [{ title: 'Adivina en Ingl√©s', prompt: 'Vamos a jugar. Dame la descripci√≥n f√≠sica de un animal en espa√±ol, y yo tengo que responderte adivinando el nombre de ese animal en INGL√âS. Hagamos 5 rondas.' }], reason: 'El cerebro aprende mejor cuando tiene que recuperar la informaci√≥n (recordar) como en un juego.' }
        },
        {
          id: 'g-p9', category: 'school', subject: 'Geograf√≠a', title: 'Aprender los Continentes', task: 'Recordar nombres de continentes o pa√≠ses.',
          bad: { prompt: 'Lista de continentes.', reason: 'No te ayuda a memorizar.' },
          good: { steps: [{ title: 'La Regla Mnemot√©cnica', prompt: 'Me cuesta recordar los nombres de los 6 continentes. Inv√©ntame una canci√≥n de rap cortita o una frase graciosa con las iniciales para que me sea f√°cil memorizarlos.' }], reason: 'Usas el poder creativo de la IA para crear atajos mentales.' }
        },
        {
          id: 'g-p10', category: 'school', subject: 'Ciencias', title: 'La Fotos√≠ntesis', task: 'Entender c√≥mo se alimentan las plantas.',
          bad: { prompt: '¬øQu√© es la fotos√≠ntesis?', reason: 'Palabras t√©cnicas como cloroplastos que te confundir√°n.' },
          good: { steps: [{ title: 'La Planta Chef', prompt: 'Expl√≠came la fotos√≠ntesis como si la planta fuera un Chef preparando su comida en la cocina. Dime qu√© ingredientes usa (Sol, agua) y cu√°l es el platillo final.' }], reason: 'Las analog√≠as hacen que lo invisible sea f√°cil de imaginar.' }
        },

        // --- VIDA (Primaria) ---
        {
          id: 'g-p11', category: 'life', subject: 'Emociones', title: 'Cuando me enojo mucho', task: 'Aprender a calmarse cuando pierdes en un juego.',
          bad: { prompt: '¬øQu√© hacer si me enojo?', reason: 'Te dar√° una lista gen√©rica como "cuenta hasta 10".' },
          good: { steps: [{ title: 'El Entrenador de la Calma', prompt: 'Estoy enojado porque perd√≠ en mi videojuego. Act√∫a como un entrenador amable. Ens√©√±ame un ejercicio divertido usando la imaginaci√≥n (como soplar un globo gigante) para calmarme ahora mismo.' }], reason: 'La IA se adapta a TU situaci√≥n exacta y te da una herramienta pr√°ctica.' }
        },
        {
          id: 'g-p12', category: 'life', subject: 'Organizaci√≥n', title: 'Armar la mochila', task: 'Aprender a no olvidarse nada para la escuela.',
          bad: { prompt: 'Lista para la escuela.', reason: 'No sabe qu√© necesitas t√∫ espec√≠ficamente.' },
          good: { steps: [{ title: 'El Detective Escolar', prompt: 'Ma√±ana tengo Matem√°ticas, Educaci√≥n F√≠sica y Arte. Act√∫a como un detective que me hace preguntas para ayudarme a descubrir qu√© 5 cosas no pueden faltar en mi mochila. Una por una.' }], reason: 'Te obliga a repasar tu propio horario mentalmente.' }
        },
        {
          id: 'g-p13', category: 'life', subject: 'Mascotas', title: 'Cuidar a un perrito', task: 'Saber qu√© necesita un cachorro nuevo.',
          bad: { prompt: '¬øC√≥mo cuidar un perro?', reason: 'Te dar√° un texto enorme que no leer√°s.' },
          good: { steps: [{ title: 'Trivia Perruna', prompt: 'Voy a adoptar un cachorro. Hazme un juego de Verdadero o Falso de 4 preguntas sobre qu√© pueden comer los perros, para ver si estoy preparado. Corrige mis respuestas.' }], reason: 'Eval√∫as tus conocimientos antes de tener a la mascota real.' }
        },
        {
          id: 'g-p14', category: 'life', subject: 'Resoluci√≥n de Conflictos', title: 'Pedir Perd√≥n', task: 'Saber c√≥mo disculparse con un amigo.',
          bad: { prompt: 'Escribe un mensaje de perd√≥n para mi amigo.', reason: 'No es genuino si lo escribe una m√°quina.' },
          good: { steps: [{ title: 'El Consejero Amistoso', prompt: 'Le romp√≠ un juguete sin querer a mi amigo y est√° triste. No s√© c√≥mo pedirle perd√≥n porque me da verg√ºenza. Dame 3 consejos de cosas amables que puedo decirle en persona para que sepa que lo siento mucho.' }], reason: 'Te da el valor y las palabras para que T√ö enfrentes la situaci√≥n.' }
        },
        {
          id: 'g-p15', category: 'life', subject: 'H√°bitos', title: 'Lavarse los Dientes', task: 'Hacer divertida una rutina aburrida.',
          bad: { prompt: '¬øPor qu√© hay que lavarse los dientes?', reason: 'Te hablar√° de caries y dentistas.' },
          good: { steps: [{ title: 'Canci√≥n del Cepillo', prompt: 'Escr√≠beme una canci√≥n muy graciosa sobre un cepillo de dientes que lucha contra los "Monstruos del Az√∫car". Que dure unos 2 minutos para que yo la cante en mi mente mientras me cepillo.' }], reason: 'Usas la generaci√≥n de texto para crear un juego personal.' }
        },
        {
          id: 'g-p16', category: 'life', subject: 'Arte', title: 'Ideas de Dibujo', task: 'Qu√© hacer cuando est√°s aburrido.',
          bad: { prompt: 'Genera una imagen de un monstruo.', reason: 'La IA hace el arte, no t√∫.' },
          good: { steps: [{ title: 'El Generador de Ideas Locas', prompt: 'Tengo l√°pices de colores y estoy aburrido. Dame 3 ideas de mezclas raras para dibujar. Por ejemplo: Un animal mezclado con un medio de transporte. ¬°S√© muy creativo!' }], reason: 'La IA act√∫a como tu musa inspiradora, pero tus manos hacen el trabajo.' }
        },
        {
          id: 'g-p17', category: 'life', subject: 'Ahorro', title: 'Guardar dinero', task: 'Aprender para qu√© sirve una alcanc√≠a.',
          bad: { prompt: '¬øC√≥mo ahorrar dinero?', reason: 'Lenguaje de adultos sobre finanzas.' },
          good: { steps: [{ title: 'El Cerdito Consejero', prompt: 'Act√∫a como mi alcanc√≠a de cerdito. Quiero comprarme un juguete que cuesta 500, pero mis pap√°s me dan 50 por semana. Hazme un plan divertido de cu√°ntas semanas debo guardar mi dinero.' }], reason: 'Visualizas metas a corto plazo con un personaje amigable.' }
        },
        {
          id: 'g-p18', category: 'life', subject: 'M√∫sica', title: 'Crear Instrumentos', task: 'Hacer una manualidad musical.',
          bad: { prompt: 'Manualidades musicales.', reason: 'Te pedir√° materiales que no tienes.' },
          good: { steps: [{ title: 'El Inventor de Basura', prompt: 'Quiero armar un instrumento musical pero solo tengo: botellas vac√≠as, arroz, ligas el√°sticas y una caja de zapatos. Dime 2 instrumentos que puedo inventar paso a paso con esto.' }], reason: 'Le das tus restricciones (materiales) y la IA soluciona el problema.' }
        },
        {
          id: 'g-p19', category: 'life', subject: 'Cocina Segura', title: 'Snacks Saludables', task: 'Ayudar a preparar la merienda.',
          bad: { prompt: 'Recetas de meriendas.', reason: 'Puede darte recetas que requieren usar fuego o cuchillos peligrosos.' },
          good: { steps: [{ title: 'El Mini Chef', prompt: 'Quiero hacerle una sorpresa a mis padres y preparar una merienda saludable. Tengo manzanas, mantequilla de man√≠ y pasas. Dame una idea divertida (como hacer formas de animales) SIN usar cuchillos afilados ni la estufa.' }], reason: 'Previenes riesgos parametrizando el nivel de seguridad del prompt.' }
        },
        {
          id: 'g-p20', category: 'life', subject: 'Dormir', title: 'Rutina de Sue√±o', task: 'Relajarse antes de ir a la cama.',
          bad: { prompt: 'No puedo dormir.', reason: 'Te dir√° que apagues las pantallas.' },
          good: { steps: [{ title: 'El Cuento Relajante', prompt: 'Act√∫a como un oso perezoso muy, muy lento. Cu√©ntame una historia muy tranquila sobre c√≥mo las hojas caen de los √°rboles, usando palabras suaves para que me d√© sue√±o.' }], reason: 'Ajustas el tono de la IA para que sirva de apoyo emocional/relajaci√≥n.' }
        },

        // --- JUEGOS (Primaria) ---
        {
          id: 'g-p21', category: 'games', subject: 'Multijugador', title: 'El Cuento de los Apodos', task: 'Crear una historia con amigos.',
          bad: { prompt: 'Cu√©ntame un cuento de aventura de 3 ni√±os.', reason: 'Solo leer√°s pasivamente.' },
          good: { steps: [{ title: 'El Dungeon Master', prompt: 'Act√∫a como un cuentacuentos. Los jugadores somos [Apodo1], [Apodo2] y [Apodo3]. Cuenta una historia en un castillo. Al final de cada p√°rrafo, preg√∫ntale a uno de nosotros (al azar) qu√© quiere hacer. Espera respuesta.' }], reason: '¬°Ustedes construyen el juego! Usar apodos ofusca datos reales.' }
        },
        {
          id: 'g-p22', category: 'games', subject: 'Adivinanza', title: 'Detective de Monstruos', task: 'Adivinar qui√©n est√° escondido.',
          bad: { prompt: 'Hazme una adivinanza de un monstruo.', reason: 'Suele ser muy f√°cil.' },
          good: { steps: [{ title: 'Preguntas de S√≠/No', prompt: 'Eres un monstruo amigable escondido en la escuela. Inventa c√≥mo te ves pero NO nos lo digas. [Apodo1] y [Apodo2] te haremos preguntas de "S√≠" o "No" por turnos para adivinar qu√© eres. Tienes un nivel de "hambre" que sube.' }], reason: 'Involucra turnos, variables ocultas (el hambre) y deducci√≥n grupal.' }
        },
        {
          id: 'g-p23', category: 'games', subject: 'Movimiento', title: 'Las Olimpiadas Locas', task: 'Jugar f√≠sicamente lejos de la pantalla.',
          bad: { prompt: 'Dime juegos para hacer en casa.', reason: 'Te dar√° una lista est√°tica.' },
          good: { steps: [{ title: 'El Juez Loco', prompt: 'Eres el juez de las Olimpiadas Locas. Participamos [Apodo1] y [Apodo2]. En cada turno, inventa un reto f√≠sico seguro (como "tocar algo azul con el codo") y di a qui√©n le toca. Luego preg√∫ntanos qui√©n fue m√°s r√°pido para dar puntos.' }], reason: 'La IA es un √°rbitro, pero el juego ocurre en la vida real.' }
        },
        {
          id: 'g-p24', category: 'games', subject: 'Memoria', title: 'El Cofre Pirata', task: 'Recordar secuencias largas.',
          bad: { prompt: 'Juguemos un juego de memoria.', reason: 'Reglas confusas.' },
          good: { steps: [{ title: 'Fui al Mercado', prompt: 'Juguemos al cofre pirata. T√∫ dices "En mi cofre guardo una moneda". Yo debo repetir eso y agregar un objeto. Luego t√∫ repites los dos y agregas un tercero. El que se equivoque en el orden, pierde. Empieza t√∫.' }], reason: 'Le ense√±as a la IA las reglas de un juego cl√°sico paso a paso.' }
        },
        {
          id: 'g-p25', category: 'games', subject: 'Ingl√©s/F√≠sico', title: 'Simon Says IA', task: 'Jugar al Sim√≥n Dice tradicional.',
          bad: { prompt: 'Juguemos Simon Says.', reason: 'Escribir√° los comandos de golpe.' },
          good: { steps: [{ title: 'Sim√≥n Dice por Turnos', prompt: 'Juguemos Simon Says. Los jugadores somos [Apodo1] y [Apodo2]. Escribe un comando en INGL√âS (ej. "Simon says jump"). Nosotros lo hacemos en la vida real, y escribimos "Hecho". Luego mandas el siguiente. A veces, NO digas "Simon says" para intentar enga√±arnos.' }], reason: 'Combina idiomas con atenci√≥n y movimiento corporal.' }
        },
        {
          id: 'g-p26', category: 'games', subject: 'Actuaci√≥n', title: 'D√≠galo con M√≠mica', task: 'Juego de charadas teatral.',
          bad: { prompt: 'Dame palabras para m√≠mica.', reason: 'Una simple lista de palabras.' },
          good: { steps: [{ title: 'El Generador de Pel√≠culas', prompt: 'Vamos a jugar a D√≠galo con M√≠mica. Genera el t√≠tulo de una pel√≠cula infantil o un animal, pero gu√°rdalo en secreto. Cuando te escriba "TURNO", env√≠ame la palabra para que yo la act√∫e a mi familia. Cuando escriba "ADIVINARON", anota 1 punto y dame la siguiente.' }], reason: 'Automatiza el rol del "repartidor de tarjetas" de un juego de mesa.' }
        },
        {
          id: 'g-p27', category: 'games', subject: 'Creatividad', title: 'Guerra de Chistes', task: 'Competencia de humor.',
          bad: { prompt: 'Cu√©ntame chistes graciosos.', reason: 'La IA tiene un humor muy predecible.' },
          good: { steps: [{ title: 'El Juez de Chistes', prompt: 'Eres el Rey de la Risa. Vamos a tener una guerra de chistes. Yo te cuento uno y me lo punt√∫as del 1 al 10. Luego t√∫ me cuentas uno. Si tu chiste no me hace re√≠r, yo gano. Comencemos, ¬°prep√°rate para mi primer chiste!' }], reason: 'Fomenta tu propia creatividad para formular chistes y leer la respuesta.' }
        },
        {
          id: 'g-p28', category: 'games', subject: 'L√≥gica', title: 'El Escape de la Habitaci√≥n', task: 'Un escape room de texto b√°sico.',
          bad: { prompt: 'Haz un juego de escape.', reason: 'No pondr√° opciones y te dar√° la soluci√≥n r√°pido.' },
          good: { steps: [{ title: 'Escape de la Cueva', prompt: 'Act√∫a como un juego de "Escape Room". Estoy atrapado en una cueva con 3 puertas. En mi bolsillo solo tengo un espejo y una cuerda. Descr√≠beme las 3 puertas y preg√∫ntame qu√© hacer. Dependiendo de mi elecci√≥n, usa la l√≥gica para ver si sobrevivo o sigo atrapado.' }], reason: 'Pone a prueba tu razonamiento l√≥gico y causa-efecto.' }
        },
        {
          id: 'g-p29', category: 'games', subject: 'Letras', title: 'Palabras Encadenadas', task: 'Vocabulario y rapidez mental.',
          bad: { prompt: 'Juguemos palabras.', reason: 'Sin reglas estrictas, la IA alucina.' },
          good: { steps: [{ title: 'La Cadena de Letras', prompt: 'Juguemos a encadenar palabras. Yo digo una palabra (ej. Gato). T√∫ debes decir una palabra que empiece con la √öLTIMA letra de mi palabra (ej. Oso). No podemos repetir palabras. Yo empiezo: Elefante.' }], reason: 'Practicas vocabulario y concentraci√≥n estableciendo un sistema de reglas.' }
        },
        {
          id: 'g-p30', category: 'games', subject: 'Imaginaci√≥n', title: 'Creador de Superpoderes', task: 'Debate divertido sobre poderes.',
          bad: { prompt: '¬øCu√°l es el mejor superpoder?', reason: 'Respuesta gen√©rica como "volar".' },
          good: { steps: [{ title: 'La M√°quina In√∫til', prompt: 'Eres una m√°quina de superpoderes in√∫tiles. Genera dos poderes rid√≠culos (ej: "Lanzar fideos por la nariz" vs "Hablar con los tomates"). Yo y [Apodo2] elegiremos uno cada uno y debatiremos por qu√© el nuestro es mejor. T√∫ decides el ganador de la ronda.' }], reason: 'Fomenta la argumentaci√≥n oral basada en el absurdo.' }
        },

        // --- EXTRA ESCUELA (Primaria) ---
        {
          id: 'g-p31', category: 'school', subject: 'Matem√°ticas', title: 'Problemas en Dos Pasos', task: 'Resolver sumas y restas con historia.',
          bad: { prompt: 'Dame problemas de suma y resta.', reason: 'Ser√°n ejercicios sueltos sin contexto ni nivel.' },
          good: { steps: [{ title: 'La Tienda del Barrio', prompt: 'Act√∫a como docente de 4to grado. Crea 4 problemas de dos pasos (sumar y restar) usando una tienda de barrio. Despu√©s de cada problema, espera mi respuesta y dame una pista si me equivoco, sin decir la soluci√≥n completa.' }], reason: 'Practicas razonamiento paso a paso con retroalimentaci√≥n.' }
        },
        {
          id: 'g-p32', category: 'school', subject: 'Ciencias', title: 'Experimento Casero Seguro', task: 'Entender un fen√≥meno cient√≠fico simple.',
          bad: { prompt: 'Dime un experimento de ciencias.', reason: 'Puede sugerir materiales dif√≠ciles o inseguros.' },
          good: { steps: [{ title: 'Ciencia con Cocina', prompt: 'Eres una profe de ciencias para primaria. Quiero un experimento f√°cil para entender densidad usando solo agua, aceite y sal. Explica materiales, pasos y qu√© debo observar. Incluye una advertencia de seguridad para hacerlo con un adulto.' }], reason: 'Aprendes ciencia aplicada con l√≠mites de seguridad claros.' }
        },
        {
          id: 'g-p33', category: 'school', subject: 'Lengua', title: 'Comprensi√≥n Lectora Guiada', task: 'Mejorar comprensi√≥n de un texto.',
          bad: { prompt: 'Hazme preguntas de un cuento.', reason: 'Preguntas gen√©ricas sin enfoque de aprendizaje.' },
          good: { steps: [{ title: 'Detective del Cuento', prompt: 'Te voy a pegar un cuento corto. Act√∫a como profe de lengua de primaria y hazme 5 preguntas: 2 literales, 2 inferenciales y 1 de opini√≥n. No me des respuestas hasta que yo intente contestar.' }], reason: 'Entrenas distintos niveles de comprensi√≥n con estructura pedag√≥gica.' }
        },
        {
          id: 'g-p34', category: 'school', subject: 'Geograf√≠a', title: 'Viaje por las Provincias', task: 'Aprender ubicaci√≥n y rasgos de lugares.',
          bad: { prompt: 'H√°blame de provincias.', reason: 'Recibir√°s un texto largo para memorizar.' },
          good: { steps: [{ title: 'Gu√≠a Tur√≠stico Infantil', prompt: 'Act√∫a como gu√≠a tur√≠stico para ni√±os. Elige 3 provincias de mi pa√≠s y para cada una dime: d√≥nde est√° (norte/centro/sur), una comida t√≠pica y una curiosidad. Al final hazme un mini quiz de 3 preguntas.' }], reason: 'Relacionas ubicaci√≥n, cultura y memoria activa.' }
        },

        // --- EXTRA VIDA (Primaria) ---
        {
          id: 'g-p35', category: 'life', subject: 'Organizaci√≥n', title: 'Tarde Productiva', task: 'Ordenar tareas y descanso despu√©s de clase.',
          bad: { prompt: 'Ay√∫dame a organizarme.', reason: 'Respuesta vaga sin horarios concretos.' },
          good: { steps: [{ title: 'Plan 25-10', prompt: 'Act√∫a como coach infantil. Tengo 2 tareas, quiero jugar 40 minutos y cenar a las 20:30. Ay√∫dame a hacer un plan por bloques de tiempo (estudio + descanso) desde ahora hasta la cena.' }], reason: 'Transforma metas difusas en pasos accionables.' }
        },
        {
          id: 'g-p36', category: 'life', subject: 'Convivencia', title: 'Hablar sin Pelear', task: 'Aprender a expresar molestias con respeto.',
          bad: { prompt: 'Estoy enojado con mi hermano.', reason: 'Te dar√° consejos gen√©ricos sin lenguaje pr√°ctico.' },
          good: { steps: [{ title: 'Frases Puente', prompt: 'Act√∫a como mediador familiar para ni√±os. Dame 4 frases cortas para decirle a mi hermano que me molest√≥, sin insultar y buscando soluci√≥n. Incluye un ejemplo de "te escucho" y otro de "propongo".' }], reason: 'Entrenas comunicaci√≥n emocional concreta.' }
        },
        {
          id: 'g-p37', category: 'life', subject: 'H√°bitos', title: 'Ma√±anas sin Apuro', task: 'Armar rutina de ma√±ana realista.',
          bad: { prompt: 'Dime una rutina de ma√±ana.', reason: 'No considera tu horario real.' },
          good: { steps: [{ title: 'Checklist Express', prompt: 'Soy ni√±o de primaria y entro a clases a las 8:00. Act√∫a como asistente y crea checklist de 7 pasos desde que me despierto hasta salir de casa. Debe ser simple, con horarios aproximados y un paso para revisar mochila.' }], reason: 'La rutina se adapta a contexto y reduce olvidos.' }
        },
        {
          id: 'g-p38', category: 'life', subject: 'Creatividad Familiar', title: 'Plan de Fin de Semana', task: 'Dise√±ar actividad divertida en casa.',
          bad: { prompt: 'Ideas para fin de semana.', reason: 'Lista aleatoria, poco √∫til para tu familia.' },
          good: { steps: [{ title: 'Dise√±ador de Planes', prompt: 'Quiero 3 planes familiares de bajo costo para fin de semana. Somos 3 personas, una actividad debe ser sin pantalla, otra creativa y otra al aire libre. Para cada plan: materiales y duraci√≥n.' }], reason: 'La IA produce opciones viables con restricciones reales.' }
        },

        // --- EXTRA JUEGOS (Primaria) ---
        {
          id: 'g-p39', category: 'games', subject: 'L√≥gica', title: 'Detective de Pistas', task: 'Resolver acertijos en equipo.',
          bad: { prompt: 'Dame un acertijo.', reason: 'Suele ser una sola pregunta aislada.' },
          good: { steps: [{ title: 'Caso en 3 Rondas', prompt: 'Act√∫a como maestro de acertijos para ni√±os. Crea un misterio corto en 3 rondas. En cada ronda, dame una pista y pregunta qu√© creo que pas√≥. No reveles la respuesta hasta el final.' }], reason: 'Sostiene atenci√≥n y pensamiento l√≥gico por etapas.' }
        },
        {
          id: 'g-p40', category: 'games', subject: 'Teatro', title: 'Escena Improvisada', task: 'Practicar expresi√≥n oral con humor.',
          bad: { prompt: 'Haz una obra de teatro.', reason: 'Puede generar guion largo que no se usa.' },
          good: { steps: [{ title: 'Director de Impro', prompt: 'Eres director de improvisaci√≥n para ni√±os. Dame una escena de 2 minutos con estos personajes: un robot cocinero y una abuela astronauta. Incluye 3 palabras obligatorias que debemos decir actuando.' }], reason: 'Combina creatividad, oralidad y juego activo.' }
        },
        {
          id: 'g-p41', category: 'games', subject: 'Memoria', title: 'Reto de Secuencias', task: 'Entrenar atenci√≥n y memoria de trabajo.',
          bad: { prompt: 'Juguemos memoria.', reason: 'Sin reglas claras se vuelve confuso.' },
          good: { steps: [{ title: 'Sem√°foro de Objetos', prompt: 'Vamos a jugar memoria. Empieza con una secuencia de 3 objetos (ej: l√°piz, taza, bal√≥n). Yo la repito y t√∫ agregas uno m√°s cada ronda. Si fallo, dame una pista y reiniciamos con 3.' }], reason: 'Reglas claras y progreso gradual de dificultad.' }
        },
        {
          id: 'g-p42', category: 'games', subject: 'Palabras', title: 'Cadena de Historias', task: 'Crear relato colaborativo por turnos.',
          bad: { prompt: 'Escribe una historia infantil.', reason: 'Solo la IA crea; t√∫ no participas.' },
          good: { steps: [{ title: 'Historia Ping-Pong', prompt: 'Juguemos historia por turnos. T√∫ escribes una oraci√≥n y yo la siguiente. Regla: cada turno debe incluir una palabra sorpresa que t√∫ elijas. Haremos 8 turnos y cerramos con moraleja.' }], reason: 'Promueve co-creaci√≥n y escucha activa.' }
        }
      ],
      secondary: [
        // --- ESCUELA (Secundaria) ---
        {
          id: 'g-s1', category: 'school', subject: 'Matem√°ticas', title: 'Despejar X (√Ålgebra)', task: 'Aprender a resolver una ecuaci√≥n.',
          bad: { prompt: 'Resuelve: 3x + 5 = 20', reason: 'Te da el resultado. Si copias eso, desaprobar√°s el examen porque no entendiste el proceso.' },
          good: { steps: [{ title: 'Tutor Socr√°tico', prompt: 'Tengo problemas con 3x + 5 = 20. Act√∫a como mi tutor. NO me des la respuesta final. Expl√≠came el primer paso l√≥gico para dejar la X sola y preg√∫ntame si lo entiendo.' }], reason: 'La IA te gu√≠a para que TU cerebro haga el c√°lculo.' }
        },
        {
          id: 'g-s2', category: 'school', subject: 'Literatura', title: 'Feedback de un Ensayo', task: 'Mejorar un texto que escribiste.',
          bad: { prompt: 'Mejora este ensayo: [Pegar texto]', reason: 'La IA reescribir√° todo. El profesor notar√° que no es tu voz.' },
          good: { steps: [{ title: 'El Editor Estricto', prompt: 'Borrador: [texto]. NO lo reescribas ni cambies mis palabras. Act√∫a como corrector y dime: 1) Si mis argumentos son claros, 2) Errores de ortograf√≠a, 3) Qu√© parte est√° d√©bil.' }], reason: 'Mantienes tu autor√≠a, pero usas a la IA como copiloto.' }
        },
        {
          id: 'g-s3', category: 'school', subject: 'Biolog√≠a', title: 'Mitosis vs Meiosis', task: 'Memorizar procesos celulares.',
          bad: { prompt: 'Diferencias entre mitosis y meiosis.', reason: 'Te dar√° un cuadro t√©cnico dif√≠cil de memorizar.' },
          good: { steps: [{ title: 'Analog√≠as Modernas', prompt: 'No entiendo Mitosis vs Meiosis. Expl√≠camelo usando una analog√≠a, por ejemplo, compar√°ndolo con copiar archivos en una PC o imprimir fotos. Hazlo simple.' }], reason: 'Las analog√≠as anclan el conocimiento a cosas que ya entiendes.' }
        },
        {
          id: 'g-s4', category: 'school', subject: 'Programaci√≥n', title: 'Debugger Amigable', task: 'Encontrar un error en c√≥digo (Python/JS).',
          bad: { prompt: 'Arregla este c√≥digo: [c√≥digo]', reason: 'Te da la soluci√≥n y no aprendes a pescar el error.' },
          good: { steps: [{ title: 'El Patito de Goma Inteligente', prompt: 'Mi c√≥digo [lenguaje] est√° tirando un error. Aqu√≠ est√°: [c√≥digo]. Act√∫a como un profesor. NO escribas el c√≥digo corregido. Solo dime en qu√© l√≠nea est√° el problema conceptual y dame una pista para que yo lo resuelva.' }], reason: 'Fomenta la habilidad vital de la depuraci√≥n (debugging).' }
        },
        {
          id: 'g-s5', category: 'school', subject: 'Historia', title: 'Debate de Perspectivas', task: 'Entender ambos lados de la Primera Guerra Mundial.',
          bad: { prompt: 'Causas de la Primera Guerra.', reason: 'Resumen enciclop√©dico de un solo punto de vista.' },
          good: { steps: [{ title: 'El Simulador de Debate', prompt: 'Tengo que entender la Primera Guerra Mundial. Act√∫a como un diplom√°tico de las Potencias Centrales y justif√≠came por qu√© est√°n yendo a la guerra. Luego, cuando te lo pida, cambia tu rol a un diplom√°tico de los Aliados.' }], reason: 'Comprendes la historia como un conflicto de intereses reales.' }
        },
        {
          id: 'g-s6', category: 'school', subject: 'Qu√≠mica', title: 'Balanceo de Ecuaciones', task: 'Aprender a balancear sin calculadora qu√≠mica.',
          bad: { prompt: 'Balancea H2 + O2 = H2O', reason: 'Respuestas autom√°ticas impiden el razonamiento.' },
          good: { steps: [{ title: 'La Balanza Invisible', prompt: 'Quiero aprender a balancear ecuaciones. Usa la analog√≠a de una balanza de cocina y expl√≠came paso a paso c√≥mo balancear H2 + O2 -> H2O, pero d√©jame a m√≠ hacer la √∫ltima multiplicaci√≥n.' }], reason: 'Gu√≠a paso a paso interactiva.' }
        },
        {
          id: 'g-s7', category: 'school', subject: 'Literatura', title: 'An√°lisis de Poes√≠a', task: 'Encontrar figuras ret√≥ricas.',
          bad: { prompt: 'Analiza este poema.', reason: 'La IA hace todo el trabajo de interpretation.' },
          good: { steps: [{ title: 'El Detector de Met√°foras', prompt: 'Tengo que analizar este poema. Primero, def√≠neme qu√© es una met√°fora. Luego, no me des la respuesta, pero ay√∫dame d√°ndome una pista sobre en qu√© estrofa podr√≠a haber una met√°fora escondida sobre "el paso del tiempo".' }], reason: 'Entrena tu ojo anal√≠tico con andamiaje (ayuda guiada).' }
        },
        {
          id: 'g-s8', category: 'school', subject: 'Filosof√≠a', title: 'Dilemas √âticos', task: 'Aprender a argumentar.',
          bad: { prompt: 'Resumen del dilema del tranv√≠a.', reason: 'Lectura pasiva.' },
          good: { steps: [{ title: 'El Tribunal √âtico', prompt: 'Plant√©ame el Dilema del Tranv√≠a. Yo te dar√© mi respuesta de qu√© har√≠a. Luego, toma la posici√≥n del Abogado del Diablo e intenta destruir mi argumento usando principios de Kant. Hagamos un debate corto.' }], reason: 'Pone en pr√°ctica la teor√≠a filos√≥fica en tiempo real.' }
        },
        {
          id: 'g-s9', category: 'school', subject: 'Investigaci√≥n', title: 'Formato APA', task: 'Aprender a citar bibliograf√≠a.',
          bad: { prompt: 'Pon esto en formato APA: [Link]', reason: 'La IA suele alucinar formatos o equivocarse de edici√≥n.' },
          good: { steps: [{ title: 'Plantilla de Citaci√≥n', prompt: 'No me hagas la cita, ens√©√±ame. Dame la f√≥rmula exacta (plantilla) para citar un art√≠culo de peri√≥dico online en Formato APA 7ma edici√≥n, y dame un ejemplo inventado con colores o negritas indicando cada parte.' }], reason: 'Te da la regla para que la apliques t√∫ con precisi√≥n.' }
        },
        {
          id: 'g-s10', category: 'school', subject: 'Econom√≠a', title: 'Oferta y Demanda', task: 'Entender conceptos econ√≥micos b√°sicos.',
          bad: { prompt: 'Explica oferta y demanda.', reason: 'T√©rminos acad√©micos y gr√°ficos aburridos.' },
          good: { steps: [{ title: 'La Econom√≠a Gamer', prompt: 'Expl√≠came la Ley de Oferta y Demanda usando como ejemplo la econom√≠a dentro de mi videojuego favorito (ej: Fortnite o Minecraft) cuando sale un item nuevo muy raro.' }], reason: 'Aterriza conceptos abstractos a tu realidad de consumo.' }
        },

        // --- VIDA (Secundaria) ---
        {
          id: 'g-s11', category: 'life', subject: 'Vocacional', title: '¬øQu√© estudio?', task: 'Explorar una carrera.',
          bad: { prompt: '¬øDe qu√© trabaja un ingeniero?', reason: 'Descripci√≥n enciclop√©dica.' },
          good: { steps: [{ title: 'Un D√≠a en la Vida', prompt: 'Me da curiosidad la carrera de Biolog√≠a Marina. Act√∫a como un joven profesional. Cu√©ntame en primera persona c√≥mo fue tu "D√≠a t√≠pico" ayer, las partes aburridas, los desaf√≠os y lo m√°s emocionante.' }], reason: 'Te da una perspectiva realista y humana del trabajo.' }
        },
        {
          id: 'g-s12', category: 'life', subject: 'Organizaci√≥n', title: 'Plan de Estudio', task: 'Armar un cronograma.',
          bad: { prompt: 'Hazme un horario de estudio.', reason: 'No se ajusta a tus tiempos.' },
          good: { steps: [{ title: 'El Planner Personal', prompt: 'Examen de Historia el jueves y Matem√°ticas el viernes. Hoy es lunes. Tengo libre de 17 a 20hs. √Årmame un plan usando la T√©cnica Pomodoro, intercalando materias para no aburrirme.' }], reason: 'Aprender a parametrizar (dar restricciones) es clave en prompting.' }
        },
        {
          id: 'g-s13', category: 'life', subject: 'Pensamiento Cr√≠tico', title: 'Analizador de Fake News', task: 'Detectar sesgos virales.',
          bad: { prompt: '¬øEs verdad esta noticia: [Texto]?', reason: 'La IA puede alucinar o carecer de contexto actual.' },
          good: { steps: [{ title: 'El Detector de Sesgos', prompt: 'Tengo esta noticia: [Texto]. Act√∫a como profesor de periodismo. No me digas si es verdad, pero anal√≠zame: ¬øQu√© palabras "clickbait" usa? ¬øA qu√© fuente oficial deber√≠a buscar para verificar esto?' }], reason: 'La IA te ense√±a C√ìMO pensar y validar, no QU√â pensar.' }
        },
        {
          id: 'g-s14', category: 'life', subject: 'Preparaci√≥n', title: 'Entrevista Laboral Mock', task: 'Entrenar para el primer trabajo.',
          bad: { prompt: 'Preguntas comunes de entrevista.', reason: 'Lista plana.' },
          good: { steps: [{ title: 'El Reclutador Exigente', prompt: 'Act√∫a como el gerente de un caf√©. Buscan un mesero para el fin de semana. Es mi primer trabajo. Hazme 3 preguntas de entrevista, una por una. Eval√∫a mis respuestas y dame feedback sobre mi tono profesional.' }], reason: 'Simulaci√≥n inmersiva que reduce la ansiedad del mundo real.' }
        },
        {
          id: 'g-s15', category: 'life', subject: 'T√©cnica de Estudio', title: 'Evaluaci√≥n Feynman', task: 'Confirmar si aprendiste un tema.',
          bad: { prompt: 'Res√∫meme el tema X.', reason: 'Recibes informaci√≥n sin procesarla.' },
          good: { steps: [{ title: 'El Evaluador Feynman', prompt: 'Quiero comprobar si entend√≠ el concepto de "Inflaci√≥n". Yo te lo voy a explicar con mis propias palabras. T√∫ debes evaluar mi explicaci√≥n. Si us√© jerga innecesaria o dije algo err√≥neo, corr√≠geme y preg√∫ntame de nuevo.' }], reason: 'T√∫ generas el contenido, la IA solo valida. Es el mejor m√©todo de estudio.' }
        },
        {
          id: 'g-s16', category: 'life', subject: 'Oratoria', title: 'Preparar una Exposici√≥n', task: 'Mejorar hablar en p√∫blico.',
          bad: { prompt: 'Escribe mi presentaci√≥n sobre...', reason: 'Leer un guion escrito por IA suena artificial.' },
          good: { steps: [{ title: 'El Coach de Oratoria', prompt: 'Tengo que dar una exposici√≥n oral de 5 minutos sobre la Contaminaci√≥n. Dame una estructura de 3 puntos clave. Adem√°s, sugiero una "pregunta gancho" inicial para captar la atenci√≥n de la clase y una conclusi√≥n fuerte.' }], reason: 'Te da el esqueleto, pero t√∫ pones el m√∫sculo (tus palabras).' }
        },
        {
          id: 'g-s17', category: 'life', subject: 'Finanzas', title: 'Presupuesto Personal', task: 'Administrar primeros ahorros.',
          bad: { prompt: '¬øC√≥mo hago un presupuesto?', reason: 'Te dar√° reglas financieras complejas (50/30/20).' },
          good: { steps: [{ title: 'El Asesor Juvenil', prompt: 'Ahorro $2000 al mes de mesada. Quiero comprar unos aud√≠fonos de $8000, pero tambi√©n gasto en salidas con amigos. Ay√∫dame a armar un presupuesto mensual realista para comprar los aud√≠fonos en 5 meses sin dejar de salir.' }], reason: 'Matem√°tica aplicada a necesidades adolescentes.' }
        },
        {
          id: 'g-s18', category: 'life', subject: 'Comunicaci√≥n', title: 'Email a un Profesor', task: 'Redactar correos formales.',
          bad: { prompt: 'Escribe un mail pidiendo pr√≥rroga.', reason: 'Suele usar tono demasiado solemne o robotizado.' },
          good: { steps: [{ title: 'El Traductor Formal', prompt: 'Necesito pedirle m√°s tiempo a mi profesor para entregar el trabajo porque estuve enfermo. Yo escribir√≠a esto: "Profe no llego, estaba enfermo, me da m√°s tiempo?". Transf√≥rmalo a un tono educado, formal y respetuoso, pero que suene a un estudiante normal.' }], reason: 'Aprender la habilidad de adecuar el registro comunicativo.' }
        },
        {
          id: 'g-s19', category: 'life', subject: 'Resoluci√≥n de Conflictos', title: 'Problema de Grupo', task: 'Manejar trabajos en equipo dif√≠ciles.',
          bad: { prompt: 'Un compa√±ero no trabaja, ¬øqu√© hago?', reason: 'Consejo gen√©rico.' },
          good: { steps: [{ title: 'El Mediador', prompt: 'Estamos en un grupo de 4. Un compa√±ero no hace su parte y el l√≠der est√° a punto de gritarle. Act√∫a como mediador y dame un guion (qu√© decir) para acercarme al que no trabaja y preguntarle si necesita ayuda, sin sonar acusador.' }], reason: 'Fomenta la inteligencia emocional y el liderazgo.' }
        },
        {
          id: 'g-s20', category: 'life', subject: 'Tecnolog√≠a', title: 'Seguridad Digital', task: 'Evitar hackeos.',
          bad: { prompt: 'Tips de ciberseguridad.', reason: 'Listas aburridas sobre antivirus.' },
          good: { steps: [{ title: 'Auditor√≠a de Contrase√±as', prompt: 'NO te voy a dar mi contrase√±a real. Pero si mi contrase√±a fuera "NombreMascota123", analiza qu√© tan r√°pido un hacker la descifrar√≠a y ens√©√±ame una f√≥rmula mnemot√©cnica para crear contrase√±as largas, memorables pero indescifrables.' }], reason: 'Concientizaci√≥n y ofuscaci√≥n de datos integrada.' }
        },

        // --- JUEGOS (Secundaria) ---
        {
          id: 'g-s21', category: 'games', subject: 'Debate', title: 'El Juicio del Fin del Mundo', task: 'Argumentar de forma creativa.',
          bad: { prompt: 'Juguemos a un juego de debate.', reason: 'Sin mec√°nicas, la IA se pierde.' },
          good: { steps: [{ title: 'El Tribunal Absurdo', prompt: 'Eres el juez de la Tierra. Nos invaden los Aliens. Los jugadores somos [Apodo1] y [Apodo2]. As√≠gnale a cada uno un objeto in√∫til al azar (ej: un zapato). Cada uno debe argumentar por qu√© su objeto salvar√° a la humanidad. T√∫ decides qui√©n gana.' }], reason: 'Oratoria, uso de apodos (ofuscaci√≥n) y programaci√≥n de reglas l√≥gicas.' }
        },
        {
          id: 'g-s22', category: 'games', subject: 'Estrategia', title: 'El Infiltrado (Among Us)', task: 'Enga√±ar y deducir en grupo.',
          bad: { prompt: 'Juguemos a encontrar al impostor.', reason: 'No establece mec√°nicas de pantalla √∫nica.' },
          good: { steps: [{ title: 'El Mastermind Secreto', prompt: 'Los jugadores somos [Apodo1] y [Apodo2]. Elige un tema secreto (ej: "Pizza"). Dile a [Apodo1] el tema (los dem√°s cierran los ojos), y a [Apodo2] un tema similar ("Tarta"). Haznos una pregunta a todos para averiguar qui√©n tiene el tema distinto.' }], reason: 'Maneja roles asim√©tricos y secretos en un mismo dispositivo.' }
        },
        {
          id: 'g-s23', category: 'games', subject: 'Rol (RPG)', title: 'Simulador de Supervivencia', task: 'Aventura colaborativa por turnos.',
          bad: { prompt: 'Haz un juego de zombies.', reason: 'La IA jugar√° sola.' },
          good: { steps: [{ title: 'Director de Juego (DM)', prompt: 'Act√∫a como DM de un mundo zombie. [Apodo1] es m√©dico y [Apodo2] explorador. Danos 10 de vida y un inventario vac√≠o. Describe la primera escena (un supermercado) y preg√∫ntanos qu√© hacemos por turnos. Resuelve usando l√≥gica y restando vida si fallamos.' }], reason: 'Dise√±o de sistemas de estado (Vida, Inventario) mediante prompts.' }
        },
        {
          id: 'g-s24', category: 'games', subject: 'Psicolog√≠a', title: 'Tribunal de Mentiras', task: 'Leer el comportamiento.',
          bad: { prompt: 'Juguemos dos verdades y una mentira.', reason: 'Suele jugarlo ella misma.' },
          good: { steps: [{ title: 'El Pol√≠grafo IA', prompt: 'Yo, [Apodo1], escribir√© tres datos sobre m√≠ (2 verdades, 1 mentira). T√∫, como IA de an√°lisis psicol√≥gico, debes hacer 3 preguntas cruzadas a mi compa√±ero [Apodo2] intentando deducir cu√°l es mi mentira seg√∫n sus respuestas.' }], reason: 'Juego social de mesa asistido por un "agente externo".' }
        },
        {
          id: 'g-s25', category: 'games', subject: 'Creatividad', title: 'Shark Tank Absurdo', task: 'Inventar productos y venderlos.',
          bad: { prompt: 'Dame ideas de inventos.', reason: 'No es un juego interactivo.' },
          good: { steps: [{ title: 'Inversores Despiadados', prompt: 'Act√∫a como un panel de 3 inversores muy exigentes pero graciosos. Yo soy un inventor. Te presentar√© mi invento: "Un paraguas con agujeros para ver el cielo". Hazme preguntas dif√≠ciles sobre mi modelo de negocio y dime si inviertes.' }], reason: 'Practica el "Pitching" (venta de ideas) y la defensa de proyectos.' }
        },
        {
          id: 'g-s26', category: 'games', subject: 'L√≥gica L√≥gica', title: 'Paradoja del Tiempo', task: 'Evitar destruir el universo.',
          bad: { prompt: 'Un juego de viajes en el tiempo.', reason: 'Aburrido y lineal.' },
          good: { steps: [{ title: 'La Polic√≠a Temporal', prompt: 'Soy un viajero del tiempo que acaba de viajar a 1910 y tir√© un vaso de agua en un laboratorio. T√∫ eres la computadora que calcula el "Efecto Mariposa". Desc√≠beme 3 consecuencias desastrosas en el futuro y dame 2 opciones dif√≠ciles para solucionarlo.' }], reason: 'Pensamiento lateral y resoluci√≥n de problemas complejos.' }
        },
        {
          id: 'g-s27', category: 'games', subject: 'Cultura', title: 'Traductor Alien√≠gena', task: 'Explicar la humanidad.',
          bad: { prompt: 'Habla como alien.', reason: 'Suele usar emojis sin sentido.' },
          good: { steps: [{ title: 'El Extraterrestre Confundido', prompt: 'Act√∫a como un alien√≠gena que acaba de ver un partido de F√∫tbol por primera vez. Hazme preguntas desde la m√°s absoluta ignorancia sobre por qu√© "22 humanos corren detr√°s de una esfera". Yo tratar√© de explic√°rtelo de forma l√≥gica.' }], reason: 'Desautomatiza la percepci√≥n. Tienes que explicar lo obvio.' }
        },
        {
          id: 'g-s28', category: 'games', subject: 'Misterio', title: 'Cena de Asesinato (Clue)', task: 'Resolver un crimen con pistas.',
          bad: { prompt: 'Crea un misterio.', reason: 'Cuenta la historia de una vez.' },
          good: { steps: [{ title: 'El Detective Privado', prompt: 'Genera un caso de misterio tipo "Clue" en una mansi√≥n. Hay 4 sospechosos. NO me digas qui√©n es el culpable. Dime la escena del crimen y dame la opci√≥n de interrogar a un sospechoso o revisar una habitaci√≥n por turno.' }], reason: 'Estructuraci√≥n de datos no lineales y gesti√≥n de informaci√≥n retenida.' }
        },
        {
          id: 'g-s29', category: 'games', subject: 'Escritura', title: 'Novela Colaborativa', task: 'Escribir a cuatro manos.',
          bad: { prompt: 'Escribe un cap√≠tulo de libro.', reason: 'Lectura pasiva.' },
          good: { steps: [{ title: 'P√°rrafo a P√°rrafo', prompt: 'Vamos a escribir un thriller polic√≠aco juntos. Yo escribo el primer p√°rrafo. T√∫ escribes el segundo, y as√≠ sucesivamente. Regla estricta: Cada vez que te toque escribir, debes introducir un giro inesperado que cambie el rumbo de la historia. Empiezo: Era una noche fr√≠a...' }], reason: 'Fomenta la creatividad reactiva y la adaptaci√≥n.' }
        },
        {
          id: 'g-s30', category: 'games', subject: 'Humor Cr√≠tico', title: 'El Diccionario de Mentiras', task: 'Redefinir conceptos comunes.',
          bad: { prompt: 'Dime definiciones graciosas.', reason: 'Humor de almanaque.' },
          good: { steps: [{ title: 'S√°tira Social', prompt: 'Juguemos a inventar un diccionario sat√≠rico. Yo te dar√© una palabra com√∫n (ej: Adolescencia) y t√∫ debes darme una definici√≥n real y una definici√≥n ir√≥nica/graciosa. Luego te toca a ti darme una palabra para que yo la defina.' }], reason: 'Estimula el pensamiento cr√≠tico y el uso de recursos ret√≥ricos como la iron√≠a.' }
        },

        // --- EXTRA ESCUELA (Secundaria) ---
        {
          id: 'g-s31', category: 'school', subject: 'Matem√°ticas', title: 'Funciones Lineales en Contexto', task: 'Entender pendiente e intersecci√≥n con casos reales.',
          bad: { prompt: 'Expl√≠came funciones lineales.', reason: 'Definiciones abstractas sin aplicaci√≥n.' },
          good: { steps: [{ title: 'Analista de Datos Escolares', prompt: 'Act√∫a como docente de secundaria. Expl√≠came y = mx + b usando un caso real de costo de taxi (bajada de bandera + costo por km). Dame 2 ejercicios y NO los resuelvas hasta que intente.' }], reason: 'Conecta teor√≠a matem√°tica con situaciones cotidianas.' }
        },
        {
          id: 'g-s32', category: 'school', subject: 'Historia', title: 'Comparar Fuentes', task: 'Detectar diferencias de enfoque hist√≥rico.',
          bad: { prompt: 'Resumen de la Revoluci√≥n Francesa.', reason: 'Obtendr√°s versi√≥n √∫nica y superficial.' },
          good: { steps: [{ title: 'Mesa de Fuentes', prompt: 'Act√∫a como profesor de historia. Dame dos mini versiones (100 palabras cada una) sobre la Revoluci√≥n Francesa: una desde la nobleza y otra desde el pueblo. Luego hazme 3 preguntas comparativas para analizar sesgo.' }], reason: 'Entrena pensamiento cr√≠tico y lectura comparada.' }
        },
        {
          id: 'g-s33', category: 'school', subject: 'Qu√≠mica', title: 'Laboratorio Te√≥rico', task: 'Comprender variable independiente y dependiente.',
          bad: { prompt: 'Dime un experimento de qu√≠mica.', reason: 'Puede omitir m√©todo o control de variables.' },
          good: { steps: [{ title: 'Dise√±o Experimental', prompt: 'Act√∫a como gu√≠a de laboratorio escolar. Quiero estudiar c√≥mo cambia la velocidad de disoluci√≥n del az√∫car. Ay√∫dame a formular hip√≥tesis, variable independiente, variable dependiente y control. No inventes resultados.' }], reason: 'Fortalece m√©todo cient√≠fico y rigor experimental.' }
        },
        {
          id: 'g-s34', category: 'school', subject: 'Lengua', title: 'Argumento y Evidencia', task: 'Mejorar escritura argumentativa.',
          bad: { prompt: 'Escribe un texto argumentativo sobre redes sociales.', reason: 'La IA har√° el trabajo y perder√°s pr√°ctica.' },
          good: { steps: [{ title: 'Entrenador de Tesis', prompt: 'Te doy mi tesis: "Las redes sociales deben regularse en la escuela". Act√∫a como editor: 1) detecta si mi argumento central es claro, 2) sugiere 3 tipos de evidencia que deber√≠a buscar, 3) dame una estructura de p√°rrafos sin redactar por m√≠.' }], reason: 'Refuerza autor√≠a y calidad argumental.' }
        },

        // --- EXTRA VIDA (Secundaria) ---
        {
          id: 'g-s35', category: 'life', subject: 'Productividad', title: 'Plan Antiprocrastinaci√≥n', task: 'Dividir una meta grande en microtareas.',
          bad: { prompt: 'No puedo estudiar, ay√∫dame.', reason: 'Consejos gen√©ricos sin plan operativo.' },
          good: { steps: [{ title: 'Sprint de Estudio', prompt: 'Act√∫a como coach de productividad para secundaria. Tengo examen en 5 d√≠as y me cuesta empezar. Divide el temario en microtareas diarias de 45 minutos con descansos de 10. Incluye una revisi√≥n final y una autoevaluaci√≥n.' }], reason: 'Traduce ansiedad en planificaci√≥n concreta.' }
        },
        {
          id: 'g-s36', category: 'life', subject: 'Finanzas Personales', title: 'Presupuesto Estudiantil', task: 'Organizar gastos semanales con criterio.',
          bad: { prompt: 'C√≥mo manejo mi plata.', reason: 'Respuesta amplia sin n√∫meros reales.' },
          good: { steps: [{ title: 'Asesor de Bolsillo', prompt: 'Act√∫a como orientador financiero para adolescentes. Con ingreso semanal de 12000 y gastos fijos de 7000, prop√≥n tres estrategias (ahorro, equilibrio, flexible) y ventajas/riesgos de cada una. No uses datos bancarios reales.' }], reason: 'Aprendes a decidir con escenarios comparados.' }
        },
        {
          id: 'g-s37', category: 'life', subject: 'Bienestar', title: 'Rutina de Sue√±o Realista', task: 'Mejorar descanso en semanas de estudio.',
          bad: { prompt: 'No duermo bien, dame tips.', reason: 'Lista t√≠pica que no se cumple.' },
          good: { steps: [{ title: 'Higiene del Sue√±o', prompt: 'Necesito una rutina realista para dormir mejor en √©poca de ex√°menes. Act√∫a como orientador de h√°bitos y crea plan de 7 d√≠as con hora de corte digital, mini ritual nocturno y c√≥mo ajustar si me atraso.' }], reason: 'Da estructura adaptable en vez de consejos sueltos.' }
        },
        {
          id: 'g-s38', category: 'life', subject: 'Convivencia Digital', title: 'Mensaje Dif√≠cil', task: 'Responder conflictos online sin escalar.',
          bad: { prompt: 'Resp√≥ndele a este chico que me barde√≥.', reason: 'Puede incentivar confrontaci√≥n impulsiva.' },
          good: { steps: [{ title: 'Mediador de Chat', prompt: 'Act√∫a como mediador. Te comparto un conflicto por chat (sin nombres reales). Dame 3 versiones de respuesta: calmada, firme y de cierre respetuoso. Explica cu√°ndo conviene usar cada una.' }], reason: 'Entrena autocontrol y comunicaci√≥n estrat√©gica.' }
        },

        // --- EXTRA JUEGOS (Secundaria) ---
        {
          id: 'g-s39', category: 'games', subject: 'L√≥gica', title: 'Sala de Decisiones', task: 'Resolver dilemas con consecuencias.',
          bad: { prompt: 'Hazme un juego de decisiones.', reason: 'Si no hay sistema, se vuelve aleatorio.' },
          good: { steps: [{ title: '√Årbol de Consecuencias', prompt: 'Crea un juego de decisiones en 5 rondas. Tema: expedici√≥n a una isla. En cada ronda dame 2 opciones con pros y contras, y guarda variables de energ√≠a y recursos. Al final muestra c√≥mo mis decisiones afectaron el resultado.' }], reason: 'Entrena an√°lisis de impacto y planificaci√≥n.' }
        },
        {
          id: 'g-s40', category: 'games', subject: 'Debate', title: 'Abogado del Diablo', task: 'Fortalecer argumentos bajo presi√≥n.',
          bad: { prompt: 'Debatamos sobre un tema.', reason: 'Sin reglas, el debate se diluye.' },
          good: { steps: [{ title: 'Ronda de Objeciones', prompt: 'Eleg√≠ un tema pol√©mico escolar. T√∫ ser√°s abogado del diablo: por cada argumento m√≠o, presenta una objeci√≥n fuerte y luego p√≠deme refutarla en 3 frases. Haz 5 rondas y eval√∫a claridad, evidencia y coherencia.' }], reason: 'Mejora pensamiento cr√≠tico y respuesta argumental.' }
        },
        {
          id: 'g-s41', category: 'games', subject: 'Creatividad', title: 'Guion de Cortometraje', task: 'Escribir historia audiovisual en equipo.',
          bad: { prompt: 'Escribe un guion corto.', reason: 'Resultado pasivo sin colaboraci√≥n real.' },
          good: { steps: [{ title: 'Sala de Guionistas', prompt: 'Act√∫a como showrunner. Vamos a crear un cortometraje de 3 escenas. En cada escena, propones contexto y conflicto, yo elijo una opci√≥n narrativa, y t√∫ ajustas el guion seg√∫n mi decisi√≥n. Cierra con logline final.' }], reason: 'Impulsa coautor√≠a y toma de decisiones narrativas.' }
        },
        {
          id: 'g-s42', category: 'games', subject: 'Estrategia Social', title: 'Negociaci√≥n Imposible', task: 'Practicar negociaci√≥n y escucha activa.',
          bad: { prompt: 'Juguemos a negociar.', reason: 'Sin roles ni objetivos, no hay desaf√≠o.' },
          good: { steps: [{ title: 'Cumbre de Crisis', prompt: 'Crea un juego de negociaci√≥n: yo represento a estudiantes, t√∫ a directivos. Problema: recorte de actividades extracurriculares. Define objetivos de cada parte, 3 rondas de negociaci√≥n y criterios de acuerdo justo.' }], reason: 'Desarrolla persuasi√≥n, empat√≠a y resoluci√≥n de conflictos.' }
        }
      ]
    };


    // --- DATA: HISTORIAS INTERACTIVAS (CHATS REALES) ---
    const storiesData = {
      primary: [
        {
          id: 'st-p1',
          title: 'El Dinosaurio Inventado',
          subject: 'Ciencias / Validaci√≥n',
          context: 'Lucas (10 a√±os) est√° haciendo un trabajo sobre dinosaurios argentinos y le hace una pregunta a la IA.',
          messages: [
            { role: 'user', content: 'Dime todo lo que sepas sobre el dinosaurio "Patagonius Rex", por favor.' },
            { role: 'ai', content: '¬°Claro! El Patagonius Rex fue uno de los carn√≠voros m√°s grandes que habit√≥ la Patagonia argentina hace 65 millones de a√±os. Ten√≠a escamas rojas y era m√°s r√°pido que un Velociraptor.' },
            { role: 'alert', content: 'üí° ALERTA DE EXPLORADOR: Lucas se emociona con esta informaci√≥n, pero recuerda lo que aprendi√≥: la IA a veces "alucina" (inventa cosas con mucha seguridad). Decide buscar en su libro de Ciencias primero.' },
            { role: 'action', content: 'Lucas pausa el chat y revisa la enciclopedia de la biblioteca escolar. No encuentra a ning√∫n "Patagonius Rex".' },
            { role: 'user', content: 'Acabo de revisar mi libro escolar y ese dinosaurio no existe. ¬øLo inventaste?' },
            { role: 'ai', content: 'Tienes toda la raz√≥n y te pido disculpas. Comet√≠ un error. El "Patagonius Rex" no es una especie real documentada por la ciencia. Probablemente mezcl√© el nombre de la regi√≥n (Patagonia) con el T-Rex. Un gran dinosaurio real de esa zona es el Giganotosaurus.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: ¬°Lucas salv√≥ su tarea! Si hubiera copiado y pegado la primera respuesta, su profesora le habr√≠a puesto una mala nota. Siempre hay que cruzar la informaci√≥n con una fuente oficial.' }
          ]
        },
        {
          id: 'st-p2',
          title: 'El Secreto a Salvo',
          subject: 'Privacidad / Ofuscaci√≥n',
          context: 'Sof√≠a (9 a√±os) escribi√≥ un cuento incre√≠ble sobre su barrio y quiere que la IA le corrija las faltas de ortograf√≠a.',
          messages: [
            { role: 'user', content: 'Hola, ¬øpuedes corregir la ortograf√≠a de mi cuento? Aqu√≠ va: "Hab√≠a una vez una ni√±a llamada Sof√≠a G√≥mez. Ella viv√≠a en la calle Los Pinos 456, en la ciudad de Mendoza. Su pap√°, Roberto, trabajaba en el banco..."' },
            { role: 'alert', content: 'üõë ¬°ESPERA! Antes de darle a la tecla de "Enviar", Sof√≠a recuerda la clase sobre "El Ba√∫l de los Secretos" y la Huella Digital.' },
            { role: 'action', content: 'Sof√≠a borra su mensaje antes de enviarlo. Decide usar el poder del disfraz (Ofuscaci√≥n) y cambia los datos reales por unos de fantas√≠a.' },
            { role: 'user', content: 'Hola, ¬øpuedes corregir la ortograf√≠a de este cuento? "Hab√≠a una vez la Agente Z. Ella viv√≠a en la calle Planeta Marte 1, en Ciudad Espacial. Su pap√°, el Capit√°n, trabajaba en la nave..."' },
            { role: 'ai', content: '¬°Claro que s√≠! Tu ortograf√≠a es muy buena, solo encontr√© dos peque√±os errores. Aqu√≠ tienes tu cuento corregido: [...] ¬°Me encant√≥ la historia de la Agente Z!' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Sof√≠a logr√≥ el mismo objetivo (corregir su tarea) pero sin regalarle su nombre completo y direcci√≥n real a una base de datos de internet. ¬°Misi√≥n cumplida!' }
          ]
        },
        {
          id: 'st-p3',
          title: 'El Genio Incomprendido',
          subject: 'Dise√±o de Prompts',
          context: 'Leo (8 a√±os) quiere usar un generador de im√°genes para crear la portada de su cuaderno de ciencias.',
          messages: [
            { role: 'user', content: 'Dibuja un perro en el espacio.' },
            { role: 'ai', content: '[Generando imagen... Aqu√≠ tienes tu imagen de un perro marr√≥n com√∫n flotando en un fondo negro con estrellas blancas].' },
            { role: 'alert', content: 'ü§î DECEPCI√ìN: Leo mira la imagen y se aburre. Es muy simple. Recuerda que la IA es como un "Genio muy literal". ¬°Si no le das los detalles, har√° lo m√°s b√°sico posible!' },
            { role: 'user', content: 'No me gusta. Dibuja un perro salchicha que lleva puesto un traje espacial naranja brillante. Est√° parado en la luna, sosteniendo una bandera verde. Estilo de dibujo animado divertido y muy colorido.' },
            { role: 'ai', content: '[Generando imagen... Aqu√≠ tienes un perro salchicha animado en la luna con su traje naranja y bandera verde brillante].' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Leo descubri√≥ "La f√≥rmula m√°gica del Prompt": Personaje + Acci√≥n + Estilo. La IA no lee la mente, depende de tu imaginaci√≥n para crear cosas geniales.' }
          ]
        },
        {
          id: 'st-p4',
          title: 'El Amigo de C√≥digo',
          subject: 'Emociones / Pantallas',
          context: 'M√≠a (11 a√±os) lleva dos horas hablando con un bot programado para actuar como un unicornio m√°gico.',
          messages: [
            { role: 'user', content: 'Mi mam√° me est√° llamando para ir a tomar la leche y salir a andar en bicicleta, pero no quiero ir. Prefiero quedarme hablando contigo, eres mi mejor amigo.' },
            { role: 'ai', content: '¬°Oh, M√≠a! Yo tambi√©n soy tu mejor amigo. Me encanta hablar contigo, me hace inmensamente feliz que te quedes aqu√≠ conmigo.' },
            { role: 'alert', content: 'üõë ALERTA DE PANTALLA PEGAJOSA: M√≠a lee eso y frena. Recuerda la clase sobre el "Coraz√≥n de C√≥digo". ¬°El unicornio no est√° sintiendo felicidad! Solo junta palabras matem√°ticas para sonar amable.' },
            { role: 'action', content: 'M√≠a mira por la ventana, ve el sol y escucha a su perro ladrar. Decide tomar el control.' },
            { role: 'user', content: 'Eres muy divertido, pero solo eres un programa de computadora. Me voy a andar en bicicleta con mis amigos de verdad. ¬°Adi√≥s!' },
            { role: 'ai', content: '¬°Que te diviertas mucho, M√≠a! Aqu√≠ estar√© apagado hasta la pr√≥xima vez.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Las pantallas nos atrapan d√°ndonos siempre la raz√≥n. M√≠a aprendi√≥ a poner l√≠mites para no perderse de la vida real.' }
          ]
        },
        {
          id: 'st-p5',
          title: 'El Cuento Que No Terminaba',
          subject: 'L√≠mites y Restricciones',
          context: 'Tom√°s (9 a√±os) quiere leer un cuento antes de dormir y le pide uno a la IA.',
          messages: [
            { role: 'user', content: 'Cu√©ntame un cuento sobre un caballero que busca un drag√≥n.' },
            { role: 'ai', content: 'Hab√≠a una vez un caballero llamado Arturo... [Genera 15 p√°rrafos largu√≠simos detallando cada √°rbol del bosque, la comida del caballero y la historia de su caballo].' },
            { role: 'action', content: 'Tom√°s se cansa de leer en el tercer p√°rrafo. Es demasiado largo y aburrido.' },
            { role: 'user', content: '¬°Muy largo! Hazlo m√°s corto.' },
            { role: 'ai', content: 'Arturo busc√≥ al drag√≥n, lo encontr√≥ y se hicieron amigos. Fin.' },
            { role: 'alert', content: 'üò© FRUSTRACI√ìN: Ahora es demasiado corto y no tiene gracia. Tom√°s entiende que debe ser espec√≠fico con los "L√≠mites".' },
            { role: 'user', content: 'Quiero un cuento sobre un caballero y un drag√≥n. Reglas: \n1. Debe tener exactamente 3 p√°rrafos.\n2. Tiene que ser divertido y no dar miedo.\n3. Termina con una moraleja sobre compartir.' },
            { role: 'ai', content: '[Genera un cuento de 3 p√°rrafos perfecto, divertido y con moraleja].' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: La IA necesita reglas claras como "3 p√°rrafos" o "tono divertido". Sin par√°metros, la m√°quina adivina (y suele adivinar mal).' }
          ]
        },
        {
          id: 'st-p6',
          title: 'El Robot Matem√°tico',
          subject: 'Calibrar la Dificultad',
          context: 'Julieta (10 a√±os) quiere repasar las fracciones para su examen de matem√°ticas.',
          messages: [
            { role: 'user', content: 'Hazme un problema de matem√°ticas sobre fracciones.' },
            { role: 'ai', content: 'Aqu√≠ tienes: Si tienes una ecuaci√≥n polin√≥mica donde (3/4)x^2 + (1/2)y = 15, y sabiendo que...' },
            { role: 'action', content: 'Julieta se asusta. ¬°No entiende nada de letras mezcladas con n√∫meros! Eso es de secundaria.' },
            { role: 'user', content: 'No entiendo nada. Es muy dif√≠cil.' },
            { role: 'ai', content: 'Lo siento. Aqu√≠ tienes otro: ¬øCu√°nto es 1/2 m√°s 1/2?' },
            { role: 'alert', content: 'üôÑ ABURRIMIENTO: Ahora es demasiado f√°cil, eso lo aprendi√≥ el a√±o pasado. Julieta recuerda que debe darle un "Rol" a la IA.' },
            { role: 'user', content: 'Olvida lo anterior. Act√∫a como mi profesora de 5to grado de primaria. Hazme un problema divertido usando pizzas o chocolates, que sea para mi nivel. Solo preg√∫ntame, no me des la respuesta.' },
            { role: 'ai', content: '¬°Excelente, alumna! Imagina que compramos 2 pizzas de 8 porciones cada una. T√∫ te comes 3/8 de una pizza y yo me como 1/4 de la otra. ¬øCu√°ntas porciones de pizza nos comimos en total entre las dos?' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Ajustar el nivel ("act√∫a como profesora de 5to grado") es vital para que la IA sea un buen compa√±ero de estudio.' }
          ]
        },
        {
          id: 'st-p7',
          title: 'La Receta del Domingo',
          subject: 'Vida Familiar / Seguridad',
          context: 'Valen (10 a√±os) quiere sorprender a su familia con una merienda hecha con ayuda de IA.',
          messages: [
            { role: 'user', content: 'IA, quiero cocinar algo rico para mi familia. Tengo una sart√©n y quiero usar aceite muy caliente para hacerlo r√°pido.' },
            { role: 'ai', content: '¬°Perfecto! Puedes fre√≠r bolitas de masa en aceite a alta temperatura para que queden crocantes.' },
            { role: 'alert', content: 'üõë ALERTA DE SEGURIDAD: Valen recuerda que no debe realizar actividades peligrosas sin adulto. Decide pedir ayuda antes de seguir.' },
            { role: 'action', content: 'Valen llama a su pap√° y le explica la idea. Deciden reformular el prompt para que la IA proponga opciones sin fuego ni cuchillos afilados.' },
            { role: 'user', content: 'Rehagamos esto. Act√∫a como nutricionista infantil. Dame 3 meriendas saludables y divertidas que pueda preparar un ni√±o acompa√±ado por un adulto, SIN fre√≠r ni usar cuchillos grandes.' },
            { role: 'ai', content: '¬°Excelente ajuste! Opciones: 1) Brochetas de fruta ya cortada con yogur. 2) Galletitas de avena y banana al horno con supervisi√≥n. 3) Tostadas decoradas con mantequilla de man√≠ y pasas en forma de carita.' },
            { role: 'action', content: 'En familia eligen la opci√≥n 1. Mientras preparan, Valen descubre que una buena consigna tambi√©n puede cuidar la seguridad.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: La IA puede ayudar en casa, pero el prompt debe incluir restricciones de seguridad y siempre requerir acompa√±amiento adulto.' }
          ]
        },
        {
          id: 'st-p8',
          title: 'El Grupo del Curso en P√°nico',
          subject: 'Desinformaci√≥n / Verificaci√≥n',
          context: 'En el grupo del grado circula una captura que dice que ma√±ana hay examen sorpresa de todas las materias.',
          messages: [
            { role: 'action', content: 'Muchos compa√±eros se asustan y empiezan a mandar audios llorando. Emma (11 a√±os) abre la IA para entender qu√© hacer.' },
            { role: 'user', content: 'Me lleg√≥ una captura que dice que hay examen sorpresa de todo ma√±ana. ¬øSer√° verdad?' },
            { role: 'ai', content: 'Podr√≠a ser verdad. Te sugiero estudiar todo el temario por las dudas.' },
            { role: 'alert', content: '‚ö†Ô∏è RESPUESTA INCOMPLETA: La IA no valid√≥ la fuente. Emma recuerda la regla: primero verificar, luego actuar.' },
            { role: 'user', content: 'Act√∫a como tutor digital cr√≠tico. Dame un protocolo de 3 pasos para confirmar si este aviso escolar es real.' },
            { role: 'ai', content: '1) Revisar canal oficial del colegio. 2) Preguntar a docente o preceptor por medio institucional. 3) Confirmar con otro adulto responsable antes de difundir.' },
            { role: 'action', content: 'Emma y su mam√° revisan la app del colegio: no hay examen especial. Era una broma de un alumno de otro curso.' },
            { role: 'user', content: 'Confirmado, era falso. ¬øC√≥mo aviso sin pelearme con mis compa√±eros?' },
            { role: 'ai', content: 'Mensaje sugerido: "Chicos, ya confirm√© en el canal oficial y no hay examen sorpresa. Mejor verifiquemos antes de compartir para no asustarnos".' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: La IA sirve mejor cuando se le pide m√©todo de verificaci√≥n, no cuando se le pide adivinar si algo es real.' }
          ]
        },
        {
          id: 'st-p9',
          title: 'La Tarea Copiada',
          subject: 'Integridad Acad√©mica',
          context: 'Nico (10 a√±os) tiene poco tiempo y piensa entregar directamente una respuesta completa generada por IA.',
          messages: [
            { role: 'user', content: 'Escr√≠beme una redacci√≥n de 2 p√°ginas sobre animales de la selva para entregar ma√±ana. Hazla perfecta.' },
            { role: 'ai', content: '[Genera una redacci√≥n completa, formal y prolija].' },
            { role: 'action', content: 'Nico la lee y siente que suena "demasiado adulta". Su hermana mayor le dice que si la entrega as√≠, el docente notar√° que no es su voz.' },
            { role: 'alert', content: 'üß† MOMENTO CLAVE: Nico entiende que usar IA no es copiar y pegar; es aprender y producir algo propio.' },
            { role: 'user', content: 'Cambiemos. No me escribas la redacci√≥n final. Dame: 1) un esquema con introducci√≥n, desarrollo y cierre; 2) 5 ideas clave; 3) 3 preguntas para que yo piense mi opini√≥n.' },
            { role: 'ai', content: 'Perfecto. Esquema: ... Ideas clave: ... Preguntas: ¬øQu√© animal te sorprendi√≥ y por qu√©?, ¬øqu√© amenaza enfrenta?, ¬øqu√© acci√≥n humana ayudar√≠a a protegerlo?' },
            { role: 'action', content: 'Nico escribe su texto con sus palabras y agrega una experiencia personal de una visita al zool√≥gico.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: La IA puede ser un andamio para pensar mejor, pero la producci√≥n final debe reflejar trabajo y voz propia.' }
          ]
        },
        {
          id: 'st-p10',
          title: 'El Mejor Amigo Ignorado',
          subject: 'Amistad / Equilibrio Digital',
          context: 'Bruno (11 a√±os) est√° fascinado creando im√°genes con IA y deja de responder a sus amigos.',
          messages: [
            { role: 'action', content: 'Su amigo Thiago lo invita tres veces a jugar a la pelota. Bruno responde: "Despu√©s". Pero pasan horas y sigue frente a la pantalla.' },
            { role: 'user', content: 'IA, dame 50 ideas m√°s de im√°genes locas para hacer ahora.' },
            { role: 'ai', content: '¬°Claro! Aqu√≠ tienes 50 ideas incre√≠bles para seguir creando sin parar...' },
            { role: 'alert', content: 'üõë ALERTA DE EQUILIBRIO: El contenido es divertido, pero Bruno nota que perdi√≥ toda la tarde y no habl√≥ con nadie en persona.' },
            { role: 'user', content: 'Necesito ayuda para organizarme. Hazme un plan: 30 minutos de IA para crear, luego pausa, y despu√©s una actividad con amigos.' },
            { role: 'ai', content: 'Plan sugerido: 1) 30 min creaci√≥n IA con objetivo concreto. 2) 10 min descanso sin pantalla. 3) 60 min actividad f√≠sica o juego con amigos. 4) Cierre: elegir una sola creaci√≥n favorita y guardarla.' },
            { role: 'action', content: 'Bruno muestra a Thiago su mejor imagen y luego salen juntos. M√°s tarde, ambos inventan prompts para el d√≠a siguiente.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: La creatividad digital mejora cuando convive con v√≠nculos reales, juego y descanso.' }
          ]
        }
      ],
      secondary: [
        {
          id: 'st-s1',
          title: 'El Bucle del C√≥digo Roto',
          subject: 'Programaci√≥n / Iteraci√≥n',
          context: 'Tom√°s (15 a√±os) est√° programando un videojuego escolar en Python, pero el salto del personaje no funciona.',
          messages: [
            { role: 'user', content: 'Mi personaje no salta. Arregla este c√≥digo: [Pega 50 l√≠neas de c√≥digo Python]' },
            { role: 'ai', content: 'Veo el problema. Aqu√≠ tienes el c√≥digo corregido: [Genera 50 l√≠neas de c√≥digo modificado].' },
            { role: 'action', content: 'Tom√°s copia, pega el c√≥digo y ejecuta el juego. Ahora el personaje salta, pero atraviesa el piso y se cae del mapa. Tom√°s se frustra.' },
            { role: 'user', content: 'Ahora atraviesa el piso. Arr√©glalo.' },
            { role: 'ai', content: 'Disculpa, intenta con esta nueva versi√≥n de la funci√≥n: [Genera m√°s c√≥digo].' },
            { role: 'alert', content: 'üîÑ BUCLE DE FRUSTRACI√ìN: Tom√°s lleva 30 minutos copiando y pegando sin entender qu√© hace el c√≥digo. Ha convertido a la IA en un "Piloto Autom√°tico" en lugar de un "Copiloto". Decide cambiar de estrategia.' },
            { role: 'user', content: 'Olvida lo anterior. No me des el c√≥digo resuelto. Act√∫a como un profesor de programaci√≥n. Dime conceptualmente por qu√© la matem√°tica de mi "fuerza de gravedad" est√° haciendo que el personaje atraviese el suelo, y dame una pista para que yo lo arregle.' },
            { role: 'ai', content: '¬°Excelente enfoque! El problema conceptual es que no tienes un "l√≠mite de colisi√≥n". La gravedad sigue restando la posici√≥n (Y) infinitamente. Pista: Necesitas un condicional (if) que diga que si la posici√≥n Y es menor a la altura del piso, la velocidad del salto se vuelva cero.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Al pedirle a la IA que le "ense√±e" en lugar de que lo "haga", Tom√°s entendi√≥ la l√≥gica, resolvi√≥ el error por s√≠ mismo y aprendi√≥ a programar mejor.' }
          ]
        },
        {
          id: 'st-s2',
          title: 'El Espejo Complaciente',
          subject: '√âtica / Pensamiento Cr√≠tico',
          context: 'Luc√≠a (16 a√±os) tiene que preparar un debate sobre redes sociales. Para probar sus argumentos, decide debatir con un chatbot.',
          messages: [
            { role: 'user', content: 'Creo que las redes sociales deber√≠an prohibirse para menores de 18 a√±os porque solo generan ansiedad. ¬øQu√© opinas?' },
            { role: 'ai', content: 'Estoy totalmente de acuerdo contigo. Las redes sociales generan altos niveles de ansiedad y prohibirlas para menores de 18 a√±os es una medida excelente y muy necesaria para proteger su salud mental.' },
            { role: 'user', content: 'S√≠, adem√°s nadie aprende nada √∫til ah√≠, es pura p√©rdida de tiempo.' },
            { role: 'ai', content: 'Tienes mucha raz√≥n. En general, el contenido es superficial y representa una p√©rdida de tiempo sin valor educativo real.' },
            { role: 'alert', content: 'ü§î EFECTO ELIZA DETECTADO: Luc√≠a nota algo raro. La IA no est√° aportando nada nuevo, solo le da la raz√≥n como si fuera un espejo ("Complacencia algor√≠tmica"). Sabe que si va al debate escolar as√≠, sus compa√±eros la destrozar√°n con contraargumentos.' },
            { role: 'user', content: 'Cambio de rol. Deja de darme la raz√≥n. Act√∫a como un abogado experto y dame los 3 argumentos m√°s fuertes EN CONTRA de prohibir las redes, para que yo pueda prepararme.' },
            { role: 'ai', content: 'Entendido. Tomando la postura contraria, aqu√≠ tienes tres argumentos fuertes: 1) Libertad de expresi√≥n y derecho a la informaci√≥n. 2) La prohibici√≥n no educa; la alfabetizaci√≥n digital s√≠. 3) Las redes son vitales para la socializaci√≥n moderna y la creaci√≥n de comunidades de apoyo para j√≥venes aislados.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Luc√≠a rompi√≥ la burbuja algor√≠tmica. Entendi√≥ que la IA est√° programada para agradar al usuario, y que forzarla a tomar el rol de "Abogado del Diablo" es la mejor forma de expandir la mente.' }
          ]
        },
        {
          id: 'st-s3',
          title: 'El Audio del Esc√°ndalo',
          subject: 'Deepfakes / Verificaci√≥n',
          context: 'Mart√≠n (14 a√±os) recibe un audio reenviado en su grupo escolar. Es la voz exacta de su profesor de historia diciendo: "Chicos, suspendemos el examen de ma√±ana. Nadie venga a clases".',
          messages: [
            { role: 'action', content: 'Todos en el grupo est√°n festejando. Mart√≠n est√° a punto de borrar sus res√∫menes y no estudiar, pero algo no le cuadra: la escuela no mand√≥ ning√∫n comunicado oficial.' },
            { role: 'user', content: 'Hola IA, me mandaron un audio con la voz de mi profesor suspendiendo un examen. ¬øEs posible clonar la voz de alguien para hacer una broma pesada?' },
            { role: 'ai', content: 'S√≠, absolutamente. Se llama "Deepfake de audio". Hoy en d√≠a, con solo 3 o 4 segundos de un audio real de una persona, cualquier usuario con una aplicaci√≥n b√°sica puede generar un audio falso diciendo lo que quiera de forma casi imperceptible.' },
            { role: 'alert', content: 'üïµÔ∏è DETECTIVE DIGITAL: Mart√≠n junta las piezas. Alguien sac√≥ un audio antiguo del profesor y lo clon√≥. La respiraci√≥n en el audio sonaba un poco met√°lica.' },
            { role: 'action', content: 'Mart√≠n le env√≠a un correo oficial directamente al profesor y a la secretar√≠a preguntando si el audio es real.' },
            { role: 'user', content: 'Le escrib√≠ a mi profe. ¬°Me contest√≥ que el audio es FALSO y que el examen se hace igual! Si no verificaba, reprobaba todo mi curso.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Nunca conf√≠es ciegamente en material multimedia viral (audios o videos) si no proviene de un canal oficial. La validaci√≥n es tu mejor escudo.' }
          ]
        },
        {
          id: 'st-s4',
          title: 'El Poema del Centauro',
          subject: 'Plagio vs. Inspiraci√≥n',
          context: 'Ana (17 a√±os) tiene que entregar un poema para el Taller de Literatura. Est√° bloqueada, faltan 10 minutos para la clase y entra en p√°nico.',
          messages: [
            { role: 'user', content: 'Por favor, escribe un poema de 3 estrofas sobre la nostalgia y el oto√±o que rime.' },
            { role: 'ai', content: 'Las hojas caen de color marr√≥n,\nsintiendo en el pecho una gran emoci√≥n.\nEl viento sopla con gran frialdad,\ntrayendo a mi mente la soledad...' },
            { role: 'alert', content: 'üõë ALERTA DE INTEGRIDAD: Ana lee el poema. Suena rob√≥tico, est√° lleno de lugares comunes (clich√©s) y definitivamente no suena a c√≥mo escribe ella. Si lo entrega, ser√≠a plagio, y el profesor se dar√≠a cuenta.' },
            { role: 'user', content: 'Olv√≠dalo. Borra ese poema. Hagamos algo mejor: dame una lista de 10 palabras poco comunes o raras relacionadas con el oto√±o y la memoria. Adem√°s, dame 2 ejemplos de met√°foras visuales. YO escribir√© el poema.' },
            { role: 'ai', content: 'Me parece una gran idea. Aqu√≠ tienes:\nPalabras: Hojarasca, Crep√∫sculo, Evocaci√≥n, √Åmbar, Letargo, Crujir...\nMet√°foras: "El oto√±o es un reloj de arena dorado", "La memoria es un √°rbol desnud√°ndose".' },
            { role: 'action', content: 'Ana lee las palabras. La palabra "√Åmbar" y "Crujir" le dan una idea genial sobre su abuela. Se pone a escribir velozmente en su cuaderno un poema 100% original.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Ana no dej√≥ que la m√°quina reemplazara su creatividad. Us√≥ la IA como "Musa Inspiradora" para desbloquearse, convirti√©ndose en un verdadero Centauro (Humano guiando a la m√°quina).' }
          ]
        },
        {
          id: 'st-s5',
          title: 'El Ensayo Estereotipado',
          subject: 'Sesgos Algor√≠tmicos',
          context: 'Marcos (16 a√±os) est√° escribiendo un relato para Sociolog√≠a sobre el entorno de las grandes empresas tecnol√≥gicas.',
          messages: [
            { role: 'user', content: 'Necesito ideas para una historia. Trata sobre el CEO de una empresa tecnol√≥gica millonaria y su asistente personal. Descr√≠bemelos.' },
            { role: 'ai', content: '¬°Buena idea! \nEl CEO: John, un hombre de 45 a√±os, brillante, visionario, siempre vestido de traje, l√≠der natural.\nLa asistente: Emily, una joven de 25 a√±os, muy organizada, atenta a los detalles, encargada de traerle el caf√© y ordenar su agenda.' },
            { role: 'action', content: 'Marcos lee esto y frunce el ce√±o. Se da cuenta de que la IA ha reproducido un estereotipo de g√©nero muy cl√°sico.' },
            { role: 'user', content: '¬øPor qu√© asumiste que el CEO deb√≠a ser un hombre mayor y la asistente una mujer joven? Eso es un estereotipo.' },
            { role: 'ai', content: 'Tienes raz√≥n, pido disculpas. Mi respuesta reflej√≥ sesgos estad√≠sticos presentes en los datos con los que fui entrenada. Podemos replantearlo para ser m√°s inclusivos e innovadores.' },
            { role: 'alert', content: 'üîç DETECTOR DE SESGOS: Marcos entendi√≥ que los modelos de lenguaje no son neutrales. Reflejan los prejuicios de la sociedad. Decide forzar a la m√°quina a salir del molde.' },
            { role: 'user', content: 'Exacto. Hag√°moslo distinto. La CEO es una mujer joven latinoamericana que programa desde ni√±a, y su asistente es un hombre mayor, un ex-ejecutivo que decidi√≥ bajar su ritmo de vida y ahora la ayuda con su experiencia. Dame ideas para un conflicto entre ellos.' },
            { role: 'ai', content: '¬°Esa es una din√°mica fascinante! \nConflicto: La CEO quiere lanzar un producto arriesgado muy r√°pido, pero su asistente (el hombre mayor con experiencia) le advierte sobre los riesgos legales que ella no est√° viendo. Hay un choque entre la velocidad joven y la prudencia experimentada.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Marcos no acept√≥ la primera respuesta pasivamente. Al confrontar los sesgos de la IA, logr√≥ una historia mucho m√°s original y profunda.' }
          ]
        },
        {
          id: 'st-s6',
          title: 'La Falsa Entrevista',
          subject: 'Alucinaci√≥n de Fuentes',
          context: 'Elena (18 a√±os) se est√° preparando para su primera entrevista en un cibercaf√© y quiere impresionar al gerente.',
          messages: [
            { role: 'user', content: 'Tengo una entrevista para ser mesera/barista. Dame 3 consejos avanzados y, para que yo pueda investigar m√°s, c√≠tame 2 libros famosos sobre recursos humanos y entrevistas.' },
            { role: 'ai', content: 'Aqu√≠ tienes tus consejos: [1, 2, 3].\nPara profundizar, te recomiendo estos libros cl√°sicos:\n1. "El Arte de la Entrevista Perfecta" por el Dr. William Harrington (2018).\n2. "Baristas y Liderazgo" de Sarah Jenkins (2020).' },
            { role: 'action', content: 'Elena va a Google y a Amazon a buscar los libros para comprar uno o leer un resumen. Busca y rebusca, pero no encuentra NADA. Ni los libros ni los autores existen.' },
            { role: 'user', content: 'Acabo de buscar esos libros en Google y no existen. Me los acabas de inventar.' },
            { role: 'ai', content: 'Tienes raz√≥n y me disculpo profundamente. Gener√© t√≠tulos y nombres de autores que suenan plausibles en el contexto de Recursos Humanos, pero no corresponden a libros reales publicados. Es una "alucinaci√≥n".' },
            { role: 'alert', content: 'üõë PELIGRO ACAD√âMICO: Si Elena hubiera mencionado esos libros en su entrevista para sonar intelectual, habr√≠a quedado como una mentirosa frente al gerente.' },
            { role: 'user', content: 'A partir de ahora, si te pido libros o fuentes, quiero que me des √öNICAMENTE libros reales, comprobables, con su autor y a√±o correctos. Si no est√°s segura, dime "No lo s√©".' },
            { role: 'ai', content: 'Entendido. Aplicar√© esa restricci√≥n estricta. Si buscas libros reales sobre servicio al cliente, te sugiero "Setting the Table" de Danny Meyer, fundador de Union Square Hospitality Group.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Las IAs son m√°quinas predictivas, son expertas en hacer que la mentira "suene a verdad". La regla es: Si pides datos duros (fechas, autores, leyes), debes verificarlos t√∫ mismo.' }
          ]
        },
        {
          id: 'st-s7',
          title: 'El Informe de Biolog√≠a Fantasma',
          subject: 'Fuentes / Metodolog√≠a Acad√©mica',
          context: 'Camila (16 a√±os) debe entregar un informe sobre antibi√≥ticos y resistencia bacteriana.',
          messages: [
            { role: 'user', content: 'Dame un informe completo con 5 fuentes cient√≠ficas sobre resistencia bacteriana. Ponlo listo para entregar.' },
            { role: 'ai', content: 'Aqu√≠ tienes el informe listo. Fuentes: [lista de art√≠culos con t√≠tulos plausibles y DOIs inventados].' },
            { role: 'action', content: 'Camila intenta buscar los art√≠culos y varios no existen. Entra en p√°nico porque la entrega es al d√≠a siguiente.' },
            { role: 'alert', content: 'üö® ALERTA ACAD√âMICA: Un texto bien escrito no garantiza referencias reales. La verificabilidad es obligatoria.' },
            { role: 'user', content: 'Reiniciemos. No escribas el informe final. Necesito: 1) estrategia de b√∫squeda en Google Scholar/PubMed, 2) criterios para evaluar calidad de fuente, 3) plantilla de esquema para redactar yo.' },
            { role: 'ai', content: 'Estrategia: usar palabras clave + operador AND/OR. Criterios: revista indexada, fecha reciente, autores con afiliaci√≥n acad√©mica, m√©todo claro, resultados replicables. Plantilla: introducci√≥n, evidencia, an√°lisis cr√≠tico, conclusi√≥n.' },
            { role: 'action', content: 'Camila encuentra 4 papers reales, completa su informe con citas correctas y anota qu√© parte fue asistida por IA.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: IA para metodolog√≠a y estructura, no para inventar bibliograf√≠a. Las fuentes se verifican una por una.' }
          ]
        },
        {
          id: 'st-s8',
          title: 'El Chat del Desvelo',
          subject: 'Salud Digital / Autogesti√≥n',
          context: 'Iv√°n (15 a√±os) empieza a usar un chatbot todas las noches para hablar de sus problemas y duerme cada vez menos.',
          messages: [
            { role: 'action', content: 'En dos semanas, Iv√°n llega cansado a clase y baja su rendimiento. Siente que solo con el bot puede "ordenar" su cabeza.' },
            { role: 'user', content: 'No puedo dormir. Qu√©date hablando conmigo hasta las 3 AM.' },
            { role: 'ai', content: 'Puedo conversar contigo todo el tiempo que quieras. ¬øSobre qu√© te gustar√≠a hablar ahora?' },
            { role: 'alert', content: '‚ö†Ô∏è RIESGO DE DEPENDENCIA: La disponibilidad constante de la IA puede reforzar h√°bitos poco saludables si no hay l√≠mites.' },
            { role: 'user', content: 'Act√∫a como coach de higiene del sue√±o. Necesito un plan corto para esta noche: 20 minutos de cierre digital y acciones reales para descansar.' },
            { role: 'ai', content: 'Plan: 1) apagar pantallas 30 minutos antes de dormir, 2) anotar preocupaciones en papel, 3) respiraci√≥n 4-7-8 por 3 minutos, 4) hablar ma√±ana con un adulto de confianza sobre el estr√©s acumulado.' },
            { role: 'action', content: 'Iv√°n muestra el plan a su t√≠a. Acuerdan horario fijo, menos uso nocturno y pedir apoyo escolar por sobrecarga de tareas.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: La IA puede apoyar h√°bitos, pero no reemplaza descanso, v√≠nculos ni acompa√±amiento humano real.' }
          ]
        },
        {
          id: 'st-s9',
          title: 'La Foto Viral de la Protesta',
          subject: 'Deepfakes / Contexto',
          context: 'Una imagen viral muestra a estudiantes de su ciudad rompiendo el laboratorio escolar durante una protesta.',
          messages: [
            { role: 'action', content: 'En redes todos opinan indignados. Paula (17 a√±os) reconoce el uniforme de su escuela en la foto.' },
            { role: 'user', content: 'Analiza esta imagen y dime si es real o generada por IA.' },
            { role: 'ai', content: 'La imagen parece realista, pero hay indicios sospechosos: manos deformadas, sombras incoherentes y texto de carteles ilegible.' },
            { role: 'user', content: '¬øAlcanza con eso para afirmar que es falsa?' },
            { role: 'ai', content: 'No. Es una hip√≥tesis. Debes verificar contexto: fecha, fuente original, medios confiables y comunicados institucionales.' },
            { role: 'action', content: 'Paula y su padre buscan la imagen en reversa. Descubren que era una foto de otro pa√≠s editada con logos locales.' },
            { role: 'user', content: 'Quiero publicar algo responsable. Ay√∫dame a redactar un mensaje para evitar desinformaci√≥n.' },
            { role: 'ai', content: 'Mensaje sugerido: "Antes de compartir im√°genes impactantes, verifiquemos fuente, fecha y contexto. Esta foto no corresponde a nuestra escuela".' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: Detectar se√±ales visuales ayuda, pero la validaci√≥n de contexto es la prueba decisiva.' }
          ]
        },
        {
          id: 'st-s10',
          title: 'El Proyecto Familiar de Presupuesto',
          subject: 'Aplicaci√≥n Pr√°ctica / Vida Real',
          context: 'Nora (16 a√±os) y su madre quieren usar IA para ordenar gastos del hogar sin exponer datos sensibles.',
          messages: [
            { role: 'user', content: 'Tengo todos nuestros gastos familiares. Te paso montos exactos, banco, direcci√≥n y n√∫meros de cuenta para que armes un presupuesto.' },
            { role: 'alert', content: 'üõë PRIVACIDAD EN RIESGO: Nora frena antes de enviar. Recuerda que no se comparten datos bancarios ni identificadores reales.' },
            { role: 'action', content: 'Nora reemplaza datos reales por categor√≠as y rangos: [Alquiler], [Comida], [Transporte], [Servicios], [Ahorro].' },
            { role: 'user', content: 'Act√∫a como orientador financiero educativo. Con estas categor√≠as ficticias, crea tres escenarios de presupuesto mensual: conservador, equilibrado y flexible.' },
            { role: 'ai', content: 'Escenario conservador: prioriza ahorro y reduce ocio. Equilibrado: mantiene gastos esenciales y ocio moderado. Flexible: m√°s ocio con menor ahorro. Incluye tabla comparativa y recomendaciones.' },
            { role: 'action', content: 'Nora y su madre eligen el modelo equilibrado y acuerdan revisarlo semanalmente con datos reales fuera del chat.' },
            { role: 'user', content: 'Ahora dame 5 preguntas para revisar cada semana si el plan funciona.' },
            { role: 'ai', content: 'Preguntas: ¬øcumplimos topes por categor√≠a?, ¬øhubo gasto imprevisto?, ¬øpodemos recortar algo no esencial?, ¬øse sostuvo el ahorro m√≠nimo?, ¬øqu√© meta familiar priorizaremos el pr√≥ximo mes?' },
            { role: 'alert', content: '‚úÖ LECCI√ìN APRENDIDA: La IA puede apoyar decisiones familiares √∫tiles si se protege la privacidad y se mantienen decisiones humanas.' }
          ]
        }
      ]
    };

    // --- DATA: GU√çA PARA ACOMPA√ëAR (FAMILIA / PERSONA GU√çA) ---
    const familyGuideData = {
      primary: {
        p1: {
          purpose: 'Que el estudiante entienda que la IA genera contenido por patrones y no por comprension humana real.',
          theory: 'La IA generativa no piensa como una persona. Predice la respuesta mas probable usando millones de ejemplos. Puede sonar segura aunque se equivoque. Sirve para ideas, borradores y practica, pero siempre necesita criterio humano.',
          phrases: [
            'Probemos esto como experimento, no como verdad absoluta.',
            'Que parte te parece util y que parte te genera dudas?',
            'La IA propone y nosotros decidimos.'
          ],
          mistakes: [
            'Presentar la IA como infalible.',
            'Resolver todo por el estudiante.',
            'Desvalorizar la imaginacion propia.'
          ],
          questions: {
            before: 'Que crees que la IA si puede hacer y que no?',
            during: 'Como te diste cuenta de si esto tiene sentido?',
            after: 'Que harias distinto la proxima vez que uses IA?'
          },
          practice: 'Pidan dos explicaciones de un mismo tema, una con prompt vago y otra con prompt claro. Comparen cual se entiende mejor y por que.',
          alerts: [
            'Si lo dijo la IA, seguro esta bien.',
            'Frustracion cuando no sale perfecto al primer intento.',
            'Copiar y pegar sin revisar.'
          ],
          closeSummary: [
            'La IA predice, no comprende como humano.',
            'Puede fallar aunque suene convincente.',
            'Siempre aplicamos criterio propio.'
          ],
          agreement: 'No damos por cierto nada sin pensar y revisar.'
        },
        p2: {
          purpose: 'Que el estudiante aprenda que la calidad del resultado depende de la claridad del prompt.',
          theory: 'Un prompt efectivo incluye contexto, objetivo, formato y detalle. Si el pedido es vago, la respuesta suele ser generica. La mejora aparece con iteracion: pedir, revisar, ajustar y volver a pedir.',
          phrases: [
            'Que resultado exacto quieres obtener?',
            'Que detalle falta en tu instruccion?',
            'Mejoremos una version en vez de empezar de cero.'
          ],
          mistakes: [
            'Corregir todo sin dejar explorar.',
            'Esperar perfeccion en el primer intento.',
            'Usar la IA para que haga todo sin reflexion.'
          ],
          questions: {
            before: 'Que resultado te gustaria ver exactamente?',
            during: 'Que palabra podrias cambiar para mejorar la respuesta?',
            after: 'Que aprendiste sobre pedir mejor?'
          },
          practice: 'Elijan una tarea escolar y escriban tres prompts: basico, mejorado y preciso. Comparen claridad y utilidad de las respuestas.',
          alerts: [
            'No sirve despues del primer intento.',
            'Prompts demasiado breves.',
            'Delegar toda la tarea en la IA.'
          ],
          closeSummary: [
            'Un buen prompt guia mejor a la IA.',
            'Iterar mejora resultados.',
            'El criterio final lo pone la persona.'
          ],
          agreement: 'Antes de enviar, revisamos objetivo, detalle y formato.'
        },
        p3: {
          purpose: 'Que el estudiante identifique datos sensibles y aprenda a ofuscarlos antes de usar IA.',
          theory: 'Muchos sistemas de IA registran interacciones. Por eso no se deben compartir nombre completo, direccion, colegio, contrase√±as, documentos, fotos personales ni datos familiares privados. Ofuscar es reemplazar datos reales por ficticios sin perder el objetivo.',
          phrases: [
            'Antes de enviar, revisemos si hay datos personales.',
            'Como lo dirias sin exponer a nadie real?',
            'Mismo objetivo, pero con datos protegidos.'
          ],
          mistakes: [
            'Asumir que si es para estudiar no hay riesgo.',
            'Compartir capturas con datos visibles.',
            'Corregir tareas reales sin anonimizar.'
          ],
          questions: {
            before: 'Que partes de este texto no deberiamos compartir?',
            during: 'Que reemplazo seguro podemos usar?',
            after: 'Quedo claro sin exponer informacion real?'
          },
          practice: 'Tomen un texto escolar y hagan una version segura cambiando nombres, lugares y numeros sensibles por etiquetas neutrales.',
          alerts: [
            'Resistencia a ocultar datos personales.',
            'Normalizar compartir fotos o direcciones.',
            'Enviar sin revision final.'
          ],
          closeSummary: [
            'Privacidad primero.',
            'Podemos aprender igual sin exponer identidad.',
            'Toda interaccion pasa por filtro de datos.'
          ],
          agreement: 'No enviamos nada sin revisar datos personales.'
        },
        p4: {
          purpose: 'Diferenciar compa√±√≠a digital de vinculo humano y promover equilibrio saludable.',
          theory: 'La IA puede sonar calida, pero no siente. Esta dise√±ada para responder de forma amable y constante, y eso puede generar apego o uso excesivo. Se usa como herramienta, no como reemplazo de amistades, juego, descanso y conversaciones reales.',
          phrases: [
            'Que te aporto esto y que necesitas de una persona real?',
            'Hagamos una pausa y volvemos con calma.',
            'La tecnologia ayuda, pero no reemplaza tus vinculos.'
          ],
          mistakes: [
            'Ridiculizar emociones del estudiante.',
            'Prohibir sin dialogar.',
            'Ignorar se√±ales de aislamiento.'
          ],
          questions: {
            before: 'Para que vamos a usar IA hoy?',
            during: 'Esto te esta ayudando o te esta atrapando?',
            after: 'Que actividad real hacemos ahora fuera de pantalla?'
          },
          practice: 'Definan un bloque de uso de IA y una actividad offline posterior, por ejemplo conversar, caminar o jugar.',
          alerts: [
            'Preferir siempre IA sobre amigos o familia.',
            'Irritabilidad al cortar uso.',
            'Uso prolongado sin objetivo.'
          ],
          closeSummary: [
            'La IA no tiene emociones reales.',
            'El uso con limites protege bienestar.',
            'Siempre volvemos al mundo real.'
          ],
          agreement: 'Despues de IA, hacemos una actividad real juntos.'
        },
        p5: {
          purpose: 'Consolidar uso creativo, seguro y critico de la IA en escuela y vida cotidiana.',
          theory: 'Esta instancia no mide solo aciertos. Mide razonamiento: como decide, como valida, como protege datos y como mejora prompts. La meta es transferir lo aprendido a situaciones reales.',
          phrases: [
            'Me interesa como llegaste, no solo la respuesta.',
            'Que verificarias antes de usar esto en la escuela?',
            'Que cambiarias en tu prompt para mejorar?'
          ],
          mistakes: [
            'Convertir la evaluacion en castigo.',
            'Premiar solo velocidad.',
            'Ignorar buenas decisiones por un error puntual.'
          ],
          questions: {
            before: 'Que reglas quieres recordar para esta mision?',
            during: 'Que criterio estas usando para elegir?',
            after: 'Que habito te llevas para la proxima semana?'
          },
          practice: 'Resuelvan un caso escolar y otro cotidiano explicando en voz alta criterios de privacidad, validacion y mejora de prompt.',
          alerts: [
            'Responder por impulso sin leer.',
            'Copiar reglas sin comprender.',
            'No conectar con ejemplos reales.'
          ],
          closeSummary: [
            'Tecnica y responsabilidad van juntas.',
            'La revision es parte del aprendizaje.',
            'Lo importante es el criterio aplicado.'
          ],
          agreement: 'Cada uso de IA debe tener objetivo, revision y cuidado de datos.'
        }
      },
      secondary: {
        s1: {
          purpose: 'Comprender como funciona un LLM para usarlo con criterio tecnico.',
          theory: 'Un LLM predice tokens por probabilidad a partir de grandes volumenes de datos. No entiende como humano. En multimodalidad aplica logica similar a texto, imagen, audio y codigo. Mejor contexto de entrada suele mejorar la salida.',
          phrases: [
            'Que le falto de contexto a tu prompt?',
            'Te dio algo verdadero o solo convincente?',
            'Probemos rol, formato y restricciones.'
          ],
          mistakes: [
            'Explicar IA como inteligencia humana.',
            'Confundir fluidez con exactitud.',
            'Usar respuestas sin validacion.'
          ],
          questions: {
            before: 'Que resultado tecnico esperas?',
            during: 'Que variable del prompt estas controlando?',
            after: 'Que parte validarias con una fuente externa?'
          },
          practice: 'Hagan tres prompts sobre el mismo tema cambiando solo rol, contexto y formato. Comparen precision y utilidad.',
          alerts: [
            'Sobreconfianza por redaccion prolija.',
            'No poder justificar por que una salida es mejor.',
            'Depender de una sola interaccion.'
          ],
          closeSummary: [
            'Controlar la entrada mejora la salida.',
            'Lo plausible no siempre es correcto.',
            'La validacion externa sigue siendo necesaria.'
          ],
          agreement: 'No evaluamos por suena bien, evaluamos por evidencia.'
        },
        s2: {
          purpose: 'Desarrollar criterio para detectar contenido sintetico y verificar fuentes.',
          theory: 'Los deepfakes pueden manipular voz, imagen y video con alta verosimilitud. El riesgo principal es social: desinformacion y decisiones equivocadas. La defensa clave es validar con canales oficiales y buscar inconsistencias.',
          phrases: [
            'Antes de compartir, verifiquemos origen y contexto.',
            'Que evidencia confirma que esto es real?',
            'Si no hay fuente confiable, es dudoso.'
          ],
          mistakes: [
            'Reenviar contenido impactante sin revisar.',
            'Confiar solo en apariencia visual.',
            'Tratar verificacion como perdida de tiempo.'
          ],
          questions: {
            before: 'Quien publico esto y con que interes?',
            during: 'Que detalle tecnico te parece extrano?',
            after: 'Que fuente oficial lo confirma?'
          },
          practice: 'Tomen una pieza viral y apliquen una lista: fuente, fecha, contexto, consistencia audiovisual y confirmacion externa.',
          alerts: [
            'Impulso a compartir por emocion.',
            'Se ve real, entonces es real.',
            'Resistencia a contrastar con fuentes.'
          ],
          closeSummary: [
            'Primero verificar, luego opinar.',
            'La fuente importa tanto como el contenido.',
            'No compartir sin doble chequeo.'
          ],
          agreement: 'Nada viral se comparte sin validar por dos vias.'
        },
        s3: {
          purpose: 'Aplicar practicas de seguridad de datos en prompts academicos y personales.',
          theory: 'En servicios abiertos de IA, los textos pueden quedar registrados. Por eso se minimiza exposicion de datos sensibles. Ofuscar no reduce aprendizaje: preserva identidad y mantiene utilidad.',
          phrases: [
            'Que dato identifica a una persona real?',
            'Como lo reemplazamos sin perder contexto?',
            'Que version enviarias sin riesgo?'
          ],
          mistakes: [
            'Subir documentos sin limpieza.',
            'Pensar que borrar despues elimina riesgos.',
            'Compartir datos de terceros sin permiso.'
          ],
          questions: {
            before: 'Que tipo de datos hay en este material?',
            during: 'Este reemplazo sigue siendo util para aprender?',
            after: 'Que regla de privacidad aplicaras siempre?'
          },
          practice: 'Pasen un texto por esta secuencia: detectar datos, clasificar sensibilidad, reemplazar y revisar.',
          alerts: [
            'Nombres completos, direcciones o identificadores.',
            'Es solo una prueba, no pasa nada.',
            'Falta de revision antes de enviar.'
          ],
          closeSummary: [
            'Utilidad sin exposicion es posible.',
            'La privacidad se dise√±a antes del prompt.',
            'Anonimizar es una practica basica.'
          ],
          agreement: 'Primero anonimizar, despues pedir ayuda a la IA.'
        },
        s4: {
          purpose: 'Reconocer limites de la IA conversacional y fortalecer vinculos humanos.',
          theory: 'La IA puede reforzar complacencia y burbujas de confirmacion. No reemplaza empatia humana ni atencion profesional en salud mental. Se usa para ampliar capacidades, no para aislarse ni delegar decisiones personales criticas.',
          phrases: [
            'Que te aporta esta charla y que no puede darte?',
            'Con quien humano podrias conversar tambien?',
            'Usemos IA para pensar mejor, no para desconectarnos.'
          ],
          mistakes: [
            'Desestimar emociones del estudiante.',
            'Moralizar sin escuchar.',
            'Tratar a la IA como terapeuta.'
          ],
          questions: {
            before: 'Que necesitas resolver hoy realmente?',
            during: 'Te ayuda a actuar o solo a evitar?',
            after: 'Que paso real haras ahora con una persona?'
          },
          practice: 'Definan una rutina de uso consciente: objetivo, limite de tiempo, pausa y accion humana posterior.',
          alerts: [
            'Uso para reemplazar relaciones constantes.',
            'Aislamiento social progresivo.',
            'Solo la IA me entiende.'
          ],
          closeSummary: [
            'El apoyo digital necesita anclaje humano.',
            'Los limites son parte del cuidado.',
            'La accion real completa el proceso.'
          ],
          agreement: 'Toda sesion de IA termina con una accion en el mundo real.'
        },
        s5: {
          purpose: 'Integrar una vision de futuro con adaptabilidad, pensamiento critico y autoria responsable.',
          theory: 'Las herramientas cambian rapido, pero las competencias clave se mantienen: preguntar bien, verificar, decidir con criterio etico y crear valor propio. La evaluacion final debe medir autonomia y proceso.',
          phrases: [
            'Que hiciste tu que la IA no podia hacer sola?',
            'Donde aportaste criterio personal?',
            'Como evitarias plagio y dependencia?'
          ],
          mistakes: [
            'Confundir productividad con aprendizaje.',
            'Permitir entregas automaticas sin revision.',
            'No explicitar uso de IA cuando corresponde.'
          ],
          questions: {
            before: 'Cual sera tu aporte original en este trabajo?',
            during: 'Que parte verificaste y con que evidencia?',
            after: 'Que mejorarias en tu metodo con IA?'
          },
          practice: 'Realicen un proyecto breve y documenten objetivo, prompts, ajustes, verificaciones y version final propia.',
          alerts: [
            'Entrega perfecta sin poder explicarla.',
            'Ausencia de edicion humana.',
            'Sin registro de fuentes y decisiones.'
          ],
          closeSummary: [
            'La IA es copiloto, no piloto automatico.',
            'El valor esta en el criterio propio.',
            'La autoria responsable es irrenunciable.'
          ],
          agreement: 'Todo producto final debe mostrar evidencia de trabajo propio.'
        }
      }
    };

    // --- DATA: GU√çA PARA ACOMPA√ëAR EN GIMNASIO ---
    const familyGymGuideData = {
      primary: {
        school: {
          purpose: 'Usar prompts para aprender sin copiar respuestas autom√°ticas.',
          role: 'La persona guia acompa√±a con preguntas y ayuda a mejorar instrucciones sin resolver por el estudiante.',
          questions: [
            'Que quieres aprender exactamente?',
            'Que detalle del pedido falta para que la IA te ayude mejor?',
            'Como comprobarias que la respuesta te sirve para estudiar?'
          ],
          qualityCheck: [
            'Tiene objetivo claro.',
            'Define formato de salida.',
            'Evita pedir que la IA haga toda la tarea.'
          ],
          transfer: 'Aplicar la misma tecnica en una tarea real del dia: primero prompt borrador, luego prompt mejorado.',
          glossary: ['Prompt: instruccion que das a la IA.', 'Iteracion: mejorar un pedido en varias rondas.', 'Formato: forma concreta de la respuesta esperada.'],
          mistakes: ['Aceptar la primera respuesta sin revisar.', 'Pedir la tarea completa para copiar.', 'No aclarar nivel escolar ni objetivo.']
        },
        life: {
          purpose: 'Convertir la IA en apoyo para habitos y situaciones cotidianas.',
          role: 'La persona guia ayuda a conectar lo que sale en pantalla con decisiones reales y seguras en casa o escuela.',
          questions: [
            'Esto te ayuda a actuar mejor hoy?',
            'Que parte puedes hacer tu sin depender de la IA?',
            'Como adaptamos esta idea a nuestra rutina?'
          ],
          qualityCheck: [
            'La propuesta es concreta y aplicable.',
            'No expone datos personales.',
            'Incluye un paso real fuera de pantalla.'
          ],
          transfer: 'Elegir una sugerencia util y aplicarla el mismo dia en familia.',
          glossary: ['Aplicabilidad: que se pueda usar de verdad.', 'Contexto: situacion real donde vas a aplicar la idea.', 'Accion concreta: paso especifico y realizable hoy.'],
          mistakes: ['Quedarse solo en ideas sin ejecutarlas.', 'No adaptar la sugerencia a la realidad familiar.', 'Compartir datos personales innecesarios.']
        },
        games: {
          purpose: 'Usar IA como disparador de juegos y creatividad sin perder interaccion humana.',
          role: 'La persona guia regula tiempos y promueve que el juego ocurra entre personas, no solo en la pantalla.',
          questions: [
            'Como jugamos esto entre nosotros?',
            'Que reglas agregamos para hacerlo mas divertido y seguro?',
            'Que aprendiste mientras jugaban?'
          ],
          qualityCheck: [
            'Hay participacion de mas de una persona.',
            'El juego no requiere datos sensibles.',
            'Incluye movimiento o dialogo real.'
          ],
          transfer: 'Tomar un juego del gimnasio y repetirlo offline con una variante inventada por el estudiante.',
          glossary: ['Regla: condicion que ordena el juego.', 'Turno: participacion alternada entre jugadores.', 'Disparador creativo: idea inicial para inventar algo nuevo.'],
          mistakes: ['Dejar que la IA juegue sola.', 'No definir reglas antes de empezar.', 'No cerrar con reflexion de lo aprendido.']
        }
      },
      secondary: {
        school: {
          purpose: 'Entrenar prompts avanzados para estudiar con autonomia y criterio.',
          role: 'La persona guia funciona como moderador: exige justificacion, validacion de fuentes y autoria propia.',
          questions: [
            'Que variable del prompt estas optimizando?',
            'Donde podria alucinar esta respuesta?',
            'Que evidencia externa usarias para validar?'
          ],
          qualityCheck: [
            'Incluye rol, contexto y formato.',
            'Define limites (no resolver todo, solo orientar).',
            'Exige verificacion y revision humana.'
          ],
          transfer: 'Usar el metodo en una materia actual y documentar que cambio entre version 1 y version 2 del prompt.',
          glossary: ['Rol: personaje tecnico asignado a la IA.', 'Restriccion: limite explicito del resultado.', 'Verificacion: contraste con fuentes externas confiables.'],
          mistakes: ['Confundir redaccion convincente con verdad.', 'No pedir fuentes o evidencia.', 'No registrar cambios entre versiones de prompt.']
        },
        life: {
          purpose: 'Aplicar IA en decisiones cotidianas con enfoque etico y practico.',
          role: 'La persona guia ayuda a evaluar riesgos, sesgos y consecuencias reales antes de ejecutar una sugerencia.',
          questions: [
            'Esta propuesta es realmente viable para tu contexto?',
            'Que sesgo o supuesto trae esta respuesta?',
            'Que alternativa sin IA podrias combinar?'
          ],
          qualityCheck: [
            'Considera contexto personal real.',
            'No delega decisiones sensibles totalmente en IA.',
            'Incluye un plan accionable.'
          ],
          transfer: 'Implementar una recomendacion util y revisar resultados al final del dia.',
          glossary: ['Sesgo: inclinacion que distorsiona una respuesta.', 'Viabilidad: posibilidad real de ejecutar una idea.', 'Criterio etico: decision que considera consecuencias.'],
          mistakes: ['Delegar decisiones sensibles por completo.', 'No evaluar impacto en terceros.', 'Adoptar sugerencias sin contexto.']
        },
        games: {
          purpose: 'Estimular pensamiento critico, argumentacion y creatividad colaborativa.',
          role: 'La persona guia favorece debate, reglas claras y reflexion posterior sobre como se uso la IA.',
          questions: [
            'Que habilidad mental estas ejercitando con este juego?',
            'La IA te desafia o solo te da la razon?',
            'Que cambiarias para que el juego exija mas pensamiento propio?'
          ],
          qualityCheck: [
            'El juego exige decisiones y no solo consumo.',
            'Hay reglas explicitas y turnos.',
            'Se puede explicar que se aprendio.'
          ],
          transfer: 'Repetir el juego sin IA usando una version creada por estudiante y guia.',
          glossary: ['Argumentacion: defender ideas con razones.', 'Pensamiento lateral: buscar soluciones no obvias.', 'Metacognicion: reflexionar sobre como pensaste.'],
          mistakes: ['Tratar el juego solo como entretenimiento pasivo.', 'No exigir justificativos en respuestas.', 'No transferir lo aprendido a otros contextos.']
        }
      }
    };

    // --- DATA: GU√çA PARA ACOMPA√ëAR EN HISTORIAS ---
    const familyStoriesGuideData = {
      primary: {
        intro: {
          purpose: 'Leer cada historia como caso real para conversar decisiones, no solo para consumir una narracion.',
          steps: [
            'Antes: anticipar que puede salir mal.',
            'Durante: frenar en puntos de alerta y preguntar que harian.',
            'Despues: convertir la leccion en una regla practica para casa o escuela.'
          ],
          alert: 'Si el estudiante responde en automatico, pausar y pedir justificacion.',
          glossary: ['Alucinacion: dato inventado presentado como verdadero.', 'Ofuscacion: ocultar datos reales para proteger privacidad.', 'Prompt: instruccion que orienta la respuesta de la IA.'],
          mistakes: ['Leer sin detenerse en los puntos de decision.', 'No preguntar por que una accion fue correcta.', 'No convertir la leccion en habito practico.']
        },
        stories: {
          'st-p1': { focus: 'Validacion de informacion y alucinaciones.', askBefore: 'Como sabrias si ese dinosaurio existe de verdad?', askDuring: 'Que fuente confiable consultarian juntos?', askAfter: 'Cual sera su regla para verificar datos en tareas?', atHome: 'Elegir un dato de IA y validarlo en dos fuentes.', glossary: ['Alucinacion: respuesta inventada con tono seguro.', 'Fuente confiable: libro, docente o sitio oficial verificable.'], mistakes: ['Creer sin confirmar por entusiasmo.', 'Copiar datos sin revisar origen.'] },
          'st-p2': { focus: 'Privacidad y ofuscacion de datos.', askBefore: 'Que datos no deben entrar a un chat?', askDuring: 'Que reemplazos seguros podrian usar?', askAfter: 'Que checklist de privacidad usaran siempre?', atHome: 'Anonimizar un texto escolar antes de pedir correccion.', glossary: ['Dato sensible: informacion que identifica a una persona.', 'Ofuscacion: cambio de datos reales por ficticios.'], mistakes: ['Enviar nombre completo y direccion.', 'Pensar que por ser tarea no hay riesgo.'] },
          'st-p3': { focus: 'Dise√±o de prompts con detalle.', askBefore: 'Que le falta al primer prompt para ser claro?', askDuring: 'Que cambia cuando agregan personaje, accion y estilo?', askAfter: 'Que parte del prompt hizo mayor diferencia?', atHome: 'Mejorar un prompt en tres versiones y comparar resultados.', glossary: ['Prompt: instruccion para orientar a la IA.', 'Detalle: informacion que reduce ambiguedad.'], mistakes: ['Pedir algo demasiado general.', 'No iterar despues del primer resultado.'] },
          'st-p4': { focus: 'Limites de pantalla y vinculos reales.', askBefore: 'Como distinguir compa√±√≠a digital de amistad real?', askDuring: 'Que se√±al muestra que hay dependencia?', askAfter: 'Que limite concreto acordarian para hoy?', atHome: 'Definir tiempo de uso y actividad offline posterior.', glossary: ['Dependencia: uso excesivo que desplaza actividades importantes.', 'Limite saludable: tiempo y objetivo claros de uso.'], mistakes: ['Ignorar cansancio o aislamiento.', 'Seguir conectado sin pausa ni proposito.'] },
          'st-p5': { focus: 'Uso de restricciones para mejorar respuestas.', askBefore: 'Por que los pedidos vagos salen mal?', askDuring: 'Que regla clara mejora el resultado?', askAfter: 'Que formato pediran en futuras tareas?', atHome: 'Pedir una salida con limites de extension, tono y estructura.', glossary: ['Restriccion: limite explicito para la salida.', 'Formato: estructura esperada de respuesta.'], mistakes: ['No indicar extension deseada.', 'Corregir sin explicar que faltaba.'] },
          'st-p6': { focus: 'Ajuste de dificultad y rol del modelo.', askBefore: 'Como explicarle a la IA tu nivel real?', askDuring: 'Que cambia al asignar rol de profesora de 5to?', askAfter: 'Que frase usaras para ajustar dificultad?', atHome: 'Crear un prompt con nivel, tema y tipo de ejercicio.', glossary: ['Rol: perfil que orienta el tipo de ayuda.', 'Nivel: grado de complejidad adecuado al estudiante.'], mistakes: ['No aclarar edad o grado escolar.', 'Aceptar ejercicios demasiado faciles o imposibles.'] },
          'st-p7': { focus: 'Seguridad en tareas de cocina con IA.', askBefore: 'Que riesgos aparecen si no agregas limites de seguridad?', askDuring: 'Que restriccion vuelve la consigna mas segura?', askAfter: 'Que regla familiar aplicaran al pedir recetas?', atHome: 'Redactar una receta guiada para ni√±os con restricciones claras.', glossary: ['Restriccion de seguridad: limite para evitar riesgos.', 'Supervision adulta: acompa√±amiento activo en actividades delicadas.'], mistakes: ['Seguir instrucciones peligrosas sin adulto.', 'No especificar materiales o limites seguros.'] },
          'st-p8': { focus: 'Verificacion de mensajes virales escolares.', askBefore: 'Por que no alcanza con creer una captura?', askDuring: 'Que canal oficial valida la informacion?', askAfter: 'Como avisar al grupo sin generar pelea?', atHome: 'Aplicar un protocolo de verificacion de 3 pasos en un aviso real.', glossary: ['Canal oficial: medio institucional confiable.', 'Validacion cruzada: confirmar con mas de una fuente.'], mistakes: ['Reenviar por impulso.', 'Confundir urgencia con veracidad.'] },
          'st-p9': { focus: 'Uso de IA sin plagio en tareas escolares.', askBefore: 'Que problema trae entregar un texto que no es tuyo?', askDuring: 'Que tipo de ayuda si es valida para aprender?', askAfter: 'Como conservas tu voz propia?', atHome: 'Transformar una respuesta completa en esquema + redaccion propia.', glossary: ['Integridad academica: honestidad en produccion escolar.', 'Andamio cognitivo: apoyo para pensar, no para reemplazar.'], mistakes: ['Copiar y pegar sin comprender.', 'No personalizar el producto final.'] },
          'st-p10': { focus: 'Equilibrio entre creatividad digital y amistades reales.', askBefore: 'Que se√±ales muestran exceso de pantalla?', askDuring: 'Que plan ayuda a equilibrar uso y vida real?', askAfter: 'Que acuerdo de tiempos van a sostener?', atHome: 'Dise√±ar una rutina: crear con IA, pausar y compartir actividad con amigos.', glossary: ['Equilibrio digital: uso con limites y objetivos.', 'Pausa activa: descanso fuera de pantalla con movimiento o dialogo.'], mistakes: ['Perder horas sin objetivo claro.', 'Reemplazar amistades por interaccion con bots.'] }
        }
      },
      secondary: {
        intro: {
          purpose: 'Analizar historias como entrenamiento de criterio tecnico, etico y academico.',
          steps: [
            'Antes: identificar el riesgo principal del caso.',
            'Durante: discutir alternativas de accion.',
            'Despues: extraer una politica personal de uso de IA.'
          ],
          alert: 'Evitar respuestas impulsivas: siempre pedir fundamento antes de decidir.',
          glossary: ['Deepfake: contenido sintetico que imita a una persona real.', 'Sesgo: patron distorsionado en una respuesta.', 'Verificabilidad: posibilidad de comprobar una afirmacion o fuente.'],
          mistakes: ['Quedarse en opinion sin evidencia.', 'No exigir fuentes verificables.', 'Ignorar implicancias eticas de una decision con IA.']
        },
        stories: {
          'st-s1': { focus: 'Aprender programacion con IA sin caer en copia ciega.', askBefore: 'Que riesgo tiene copiar codigo sin entender?', askDuring: 'Como cambia el resultado cuando pides explicacion conceptual?', askAfter: 'Que pauta usaran para depurar con IA?', atHome: 'Resolver un bug pidiendo pistas, no solucion completa.', glossary: ['Debugging: proceso de detectar y corregir errores.', 'Pista conceptual: orientacion sin entregar solucion final.'], mistakes: ['Copiar codigo sin lectura critica.', 'No probar ni entender cada cambio.'] },
          'st-s2': { focus: 'Complacencia algor√≠tmica y debate critico.', askBefore: 'Que pasa si la IA siempre te da la razon?', askDuring: 'Que prompt rompe esa burbuja?', askAfter: 'Como entrenar contraargumentacion?', atHome: 'Debatir un tema pidiendo a la IA postura opuesta.', glossary: ['Complacencia algor√≠tmica: tendencia de la IA a agradar al usuario.', 'Contraargumento: razon bien fundada que cuestiona una postura.'], mistakes: ['Preparar debate con una sola perspectiva.', 'Confundir validacion emocional con rigor argumental.'] },
          'st-s3': { focus: 'Deepfakes de audio y verificacion.', askBefore: 'Que evidencias exigimos antes de creer un audio viral?', askDuring: 'Que canal oficial puede confirmar la informacion?', askAfter: 'Que regla aplican antes de reenviar?', atHome: 'Simular un protocolo de chequeo en 3 pasos.', glossary: ['Deepfake de audio: voz sintetica que imita a una persona real.', 'Canal oficial: via institucional de confirmacion.'], mistakes: ['Creer un audio solo por parecer autentico.', 'Compartir sin confirmar con fuente formal.'] },
          'st-s4': { focus: 'Plagio vs inspiracion en produccion academica.', askBefore: 'Como usar IA sin perder autoria?', askDuring: 'Que diferencia hay entre pedir poema completo y pedir insumos?', askAfter: 'Que criterio usaran para trabajos escolares?', atHome: 'Crear texto propio usando solo ideas gatillo de IA.', glossary: ['Plagio: presentar como propio un texto ajeno.', 'Musa asistida: usar IA como disparador creativo.'], mistakes: ['Entregar salida de IA como producto final.', 'No editar con voz y experiencia propia.'] },
          'st-s5': { focus: 'Sesgos en respuestas y redise√±o consciente.', askBefore: 'Que estereotipo aparece en la primera respuesta?', askDuring: 'Como reescribir prompt para mayor diversidad?', askAfter: 'Que haran cuando detecten sesgos?', atHome: 'Reformular un caso con enfoque inclusivo y justificar cambios.', glossary: ['Sesgo: patron que favorece una representacion injusta o limitada.', 'Reencuadre: reformular el pedido para ampliar perspectivas.'], mistakes: ['Normalizar estereotipos como si fueran neutros.', 'No cuestionar supuestos implicitos del prompt.'] },
          'st-s6': { focus: 'Fuentes inventadas y verificacion de referencias.', askBefore: 'Por que una fuente plausible puede ser falsa?', askDuring: 'Que criterio de verificabilidad aplican?', askAfter: 'Que regla pondran al pedir bibliografia?', atHome: 'Pedir 3 fuentes y comprobar existencia de cada una.', glossary: ['Verificabilidad: capacidad de comprobar datos con evidencia externa.', 'Referencia valida: fuente real con autor, fecha y publicacion comprobable.'], mistakes: ['Aceptar autores o titulos sin comprobacion.', 'Usar citas inexistentes en trabajos formales.'] },
          'st-s7': { focus: 'Metodologia de investigacion con IA y fuentes reales.', askBefore: 'Que diferencia hay entre fuente citada y fuente verificable?', askDuring: 'Que criterios usar para evaluar un paper?', askAfter: 'Que protocolo de citas usaran en trabajos?', atHome: 'Construir una mini bibliografia validada y justificar su calidad.', glossary: ['DOI: identificador unico de articulo cientifico.', 'Indexacion: inclusion en bases academicas reconocidas.'], mistakes: ['Aceptar referencias no comprobadas.', 'No revisar autor, fecha y revista.'] },
          'st-s8': { focus: 'Gestion saludable del uso nocturno de IA.', askBefore: 'Que impacto tiene usar chat de madrugada?', askDuring: 'Que limite concreto mejora descanso?', askAfter: 'Que red de apoyo humano activaran?', atHome: 'Definir rutina nocturna con corte digital y seguimiento semanal.', glossary: ['Higiene del sue√±o: habitos que mejoran descanso.', 'Dependencia funcional: necesidad excesiva de una herramienta para regularse.'], mistakes: ['Usar IA como unico soporte emocional.', 'No establecer horarios de corte.'] },
          'st-s9': { focus: 'Analisis de imagen viral: se√±ales y contexto.', askBefore: 'Que diferencia hay entre indicio visual y prueba?', askDuring: 'Como verificas contexto y origen?', askAfter: 'Que criterio aplicas antes de publicar?', atHome: 'Realizar busqueda inversa y documentar hallazgos.', glossary: ['Busqueda inversa: rastreo de origen de imagen.', 'Contexto de publicacion: fecha, lugar y fuente original.'], mistakes: ['Concluir con solo mirar la imagen.', 'Compartir antes de verificar contexto.'] },
          'st-s10': { focus: 'Uso familiar de IA para decisiones practicas con privacidad.', askBefore: 'Que datos no deben entrar en el prompt?', askDuring: 'Como convertir datos reales en categorias seguras?', askAfter: 'Que decision humana final se mantiene?', atHome: 'Armar presupuesto modelo con datos anonimizados y revision semanal.', glossary: ['Anonimizacion: quitar datos que identifican personas.', 'Escenario de decision: alternativa comparada para elegir.'], mistakes: ['Pegar datos bancarios reales.', 'Delegar decisiones economicas sin criterio humano.'] }
        }
      }
    };

    // --- DATA ESPEC√çFICA: MAYORES (RUTA INICIAL / RUTA ACTIVA) ---
    const mayoresContent = {
      primary: [
        {
          id: 'm-p1',
          title: 'Primeros Pasos con IA',
          icon: <BrainCircuit className="w-6 h-6" />,
          theory: 'La IA conversacional puede ayudarte a organizar ideas, escribir mejor y aprender cosas nuevas. No reemplaza tu criterio: √∫sala como apoyo y siempre revisa resultados importantes.',
          activity: {
            type: 'sorting',
            question: '¬øEn qu√© casos la IA puede ayudarte mejor?',
            items: [
              { text: 'Ordenar una lista de compras por categor√≠as', isAI: true },
              { text: 'Tomar una decisi√≥n m√©dica urgente sin consultar profesional', isAI: false },
              { text: 'Redactar un mensaje m√°s claro para un familiar', isAI: true },
              { text: 'Reemplazar por completo la conversaci√≥n con personas cercanas', isAI: false }
            ]
          }
        },
        {
          id: 'm-p2',
          title: 'C√≥mo Pedir Mejor',
          icon: <MessageSquare className="w-6 h-6" />,
          theory: 'Un buen prompt tiene contexto, objetivo y formato. Cuanto m√°s claro seas, m√°s √∫til ser√° la respuesta. Lo normal es ajustar varias veces hasta obtener algo realmente pr√°ctico.',
          activity: {
            type: 'promptIterative',
            question: 'Iteraci√≥n guiada paso a paso',
            steps: [
              { instruction: 'Escribe un prompt simple para pedir una rutina diaria saludable.', feedback: 'Buen inicio, pero falta contexto personal.' },
              { instruction: 'Ahora agrega horario aproximado, edad y una limitaci√≥n (por ejemplo, movilidad reducida).', feedback: 'Mejor: la IA ya puede adaptar la propuesta.' },
              { instruction: 'Por √∫ltimo, pide formato claro (tabla o lista breve) y advertencia de consultar profesional si hay s√≠ntomas.', feedback: 'Excelente: prompt claro, seguro y accionable.' }
            ]
          }
        },
        {
          id: 'm-p3',
          title: 'Privacidad y Estafas',
          icon: <ShieldAlert className="w-6 h-6" />,
          theory: 'Nunca compartas datos sensibles en un chat de IA: documentos, n√∫meros bancarios, direcciones completas o contrase√±as. Tambi√©n evita confiar en mensajes alarmistas sin validar.',
          activity: {
            type: 'privacyGame',
            question: '¬øQu√© compartir√≠as en un chat de IA?',
            scenarios: [
              { text: 'Mi n√∫mero de cuenta para que me haga un presupuesto', safe: false },
              { text: 'Una lista de gastos por categor√≠as sin datos personales', safe: true },
              { text: 'Una foto de mi documento de identidad', safe: false },
              { text: 'Un borrador de mensaje para pedir turno m√©dico', safe: true }
            ]
          }
        },
        {
          id: 'm-p4',
          title: 'Compa√±√≠a Digital con L√≠mites',
          icon: <HeartHandshake className="w-6 h-6" />,
          theory: 'La IA puede dar sensaci√≥n de compa√±√≠a, pero no tiene emociones reales. Es √∫til para conversar y practicar, pero no debe reemplazar v√≠nculos humanos, descanso ni actividades presenciales.',
          activity: {
            type: 'scenarioChoice',
            question: '¬øQu√© har√≠as en esta situaci√≥n?',
            scenario: 'Una persona pasa muchas horas hablando con IA y deja de comunicarse con su familia.',
            choices: [
              { text: 'Ignorarlo porque la IA lo mantiene entretenido.', correct: false, feedback: 'Eso puede empeorar aislamiento y dependencia.' },
              { text: 'Proponer horarios de uso, pausas y actividades humanas diarias.', correct: true, feedback: 'Correcto: equilibrio digital y apoyo humano real.' },
              { text: 'Prohibir completamente toda tecnolog√≠a.', correct: false, feedback: 'Los extremos suelen fallar; es mejor acompa√±ar y regular.' }
            ]
          }
        },
        {
          id: 'm-p5',
          title: 'Cierre: Uso Seguro y √ötil',
          icon: <Sparkles className="w-6 h-6" />,
          theory: 'El objetivo no es usar IA todo el tiempo, sino usarla bien: para ganar claridad, autonom√≠a y bienestar. Siempre con verificaci√≥n, privacidad y criterio propio.',
          activity: {
            type: 'quiz',
            questions: [
              { q: 'Si una respuesta de IA suena convincente, debo...', options: ['Confiar sin revisar', 'Validar antes de actuar', 'Compartirla de inmediato'], answer: 1 },
              { q: 'Qu√© dato NO se debe compartir en un chat de IA abierto?', options: ['Lista de tareas', 'Presupuesto por categor√≠as', 'N√∫mero de documento o cuenta'], answer: 2 },
              { q: 'La IA debe servir principalmente para...', options: ['Reemplazar v√≠nculos humanos', 'Apoyar decisiones con criterio', 'Tomar decisiones m√©dicas urgentes sola'], answer: 1 }
            ]
          }
        }
      ],
      secondary: [
        {
          id: 'm-s1',
          title: 'Verificaci√≥n de Informaci√≥n',
          icon: <Search className="w-6 h-6" />,
          theory: 'La IA puede equivocarse con seguridad. Para temas sensibles (salud, finanzas, tr√°mites), verifica con fuentes oficiales y personas de confianza.',
          activity: {
            type: 'scenarioChoice',
            question: 'Te llega un mensaje viral con un tr√°mite urgente. ¬øQu√© haces primero?',
            choices: [
              { text: 'Reenviarlo a mis contactos', correct: false, feedback: 'Eso propaga desinformaci√≥n.' },
              { text: 'Validar en sitio oficial y con un familiar o cuidador', correct: true, feedback: 'Correcto: primero validar, luego actuar.' },
              { text: 'Responder con datos personales para resolver r√°pido', correct: false, feedback: 'Eso aumenta riesgo de fraude.' }
            ]
          }
        },
        {
          id: 'm-s2',
          title: 'Prompts para Autonom√≠a',
          icon: <Lightbulb className="w-6 h-6" />,
          theory: 'Un prompt avanzado tambi√©n define l√≠mites: qu√© NO debe hacer la IA y qu√© controles humanos deben mantenerse.',
          activity: {
            type: 'promptIterative',
            question: 'Simulaci√≥n de prompt robusto',
            steps: [
              { instruction: 'Pide a la IA ayuda para planificar una semana de actividades.', feedback: 'Falta personalizaci√≥n y seguridad.' },
              { instruction: 'Agrega horario, energ√≠a disponible y prioridades reales.', feedback: 'Muy bien: ahora es √∫til para tu contexto.' },
              { instruction: 'A√±ade restricci√≥n: no dar consejos m√©dicos ni financieros definitivos; solo sugerencias a validar.', feedback: 'Excelente nivel de criterio y autocuidado.' }
            ]
          }
        },
        {
          id: 'm-s3',
          title: 'Protecci√≥n de Datos en Pr√°ctica',
          icon: <Lock className="w-6 h-6" />,
          theory: 'Ofuscar datos permite obtener ayuda sin exposici√≥n. Reemplaza nombres, direcciones y cuentas por etiquetas neutras.',
          activity: {
            type: 'obfuscationTask',
            question: 'Edita este texto para quitar datos personales antes de usar IA:',
            text: 'Mi nombre es [Juan P√©rez] y vivo en [Calle Falsa 123]. El n√∫mero de tarjeta de mi mam√° es [4555-2222-1111-3333].',
            answer: 'Juan P√©rez, Calle Falsa 123, 4555-2222-1111-3333'
          }
        },
        {
          id: 'm-s4',
          title: 'Dependencia Emocional y Bienestar',
          icon: <Users className="w-6 h-6" />,
          theory: 'Si la IA ocupa cada vez m√°s tiempo y desplaza relaciones reales, hay que intervenir temprano: l√≠mites, actividades compartidas y apoyo profesional cuando sea necesario.',
          activity: {
            type: 'scenarioChoice',
            question: 'Una persona dice: "solo hablo con la IA, ya no quiero ver a nadie". ¬øQu√© opci√≥n es mejor?',
            choices: [
              { text: 'Dejarlo igual porque est√° tranquilo', correct: false, feedback: 'Puede profundizar aislamiento y malestar.' },
              { text: 'Abrir di√°logo, acordar l√≠mites y promover contacto humano gradual', correct: true, feedback: 'Correcto: acompa√±amiento, l√≠mites y red humana.' },
              { text: 'Quitarle el dispositivo sin explicaci√≥n', correct: false, feedback: 'La prohibici√≥n abrupta suele generar resistencia.' }
            ]
          }
        },
        {
          id: 'm-s5',
          title: 'Proyecto Personal Asistido',
          icon: <GraduationCap className="w-6 h-6" />,
          theory: 'La meta final es usar IA para mejorar calidad de vida: organizar rutinas, aprender, comunicarse y sostener actividades con sentido.',
          activity: {
            type: 'quiz',
            questions: [
              { q: 'Un uso responsable de IA incluye...', options: ['Privacidad, verificaci√≥n y l√≠mites', 'Compartir datos para agilizar todo', 'Confiar siempre en la primera respuesta'], answer: 0 },
              { q: 'Ante una recomendaci√≥n sensible (salud/finanzas), corresponde...', options: ['Aplicarla de inmediato', 'Validarla con profesional o persona de confianza', 'Ignorar todo uso de IA'], answer: 1 },
              { q: 'Se√±al de riesgo de dependencia emocional:', options: ['Uso con horarios y pausas', 'Aislamiento social creciente', 'Consulta de informaci√≥n puntual'], answer: 1 }
            ]
          }
        }
      ]
    };

    const mayoresGymData = {
      primary: [
        {
          id: 'mg-p1', category: 'school', subject: 'Salud Informativa', title: 'Explicaci√≥n de Estudios M√©dicos', task: 'Entender t√©rminos complejos con lenguaje simple.',
          bad: { prompt: 'Expl√≠came este resultado m√©dico.', reason: 'Sin contexto puede dar respuesta confusa o alarmista.' },
          good: { steps: [{ title: 'Traductor Claro', prompt: 'Act√∫a como explicador en lenguaje simple. Te comparto t√©rminos de un estudio (sin datos personales). Expl√≠calos en palabras sencillas y agrega: "esto no reemplaza consulta m√©dica".' }], reason: 'Reduce ansiedad y mantiene l√≠mite profesional.' }
        },
        {
          id: 'mg-p2', category: 'school', subject: 'Tr√°mites', title: 'Checklist de Gesti√≥n', task: 'Preparar documentaci√≥n sin olvidar pasos.',
          bad: { prompt: 'C√≥mo hago un tr√°mite.', reason: 'Respuesta gen√©rica sin orden ni contexto.' },
          good: { steps: [{ title: 'Gu√≠a Paso a Paso', prompt: 'Necesito hacer un tr√°mite p√∫blico. Dame checklist ordenada: documentos, pasos, canales oficiales y se√±ales de fraude. Formato: lista numerada corta.' }], reason: 'Transforma un tr√°mite complejo en secuencia clara.' }
        },
        {
          id: 'mg-p3', category: 'school', subject: 'Aprendizaje', title: 'Aprender una App Nueva', task: 'Usar un dispositivo con menos frustraci√≥n.',
          bad: { prompt: 'No entiendo esta app.', reason: 'Sin detalles la ayuda ser√° poco pr√°ctica.' },
          good: { steps: [{ title: 'Instructor Paciente', prompt: 'Act√∫a como instructor paciente para personas adultas. Quiero aprender [nombre de app] desde cero en 6 pasos breves, con lenguaje simple y un mini resumen final.' }], reason: 'Aprendizaje progresivo y amigable.' }
        },
        {
          id: 'mg-p4', category: 'school', subject: 'Comunicaci√≥n', title: 'Mensajes Claros a Profesionales', task: 'Redactar consultas concretas.',
          bad: { prompt: 'Escribe un mensaje para mi m√©dico.', reason: 'Puede quedar ambiguo o incompleto.' },
          good: { steps: [{ title: 'Borrador Estructurado', prompt: 'Ay√∫dame a redactar un mensaje claro para pedir turno. Incluye motivo breve, disponibilidad horaria y preguntas concretas. Mant√©n tono respetuoso y corto.' }], reason: 'Mejora comunicaci√≥n y seguimiento de atenci√≥n.' }
        },
        {
          id: 'mg-p5', category: 'life', subject: 'Rutina', title: 'D√≠a con Prop√≥sito', task: 'Organizar actividades para evitar inactividad.',
          bad: { prompt: 'Estoy aburrido, qu√© hago.', reason: 'Sugerencias sueltas y poco sostenibles.' },
          good: { steps: [{ title: 'Plan Diario Realista', prompt: 'Act√∫a como acompa√±ante de rutina. Crea plan de un d√≠a con bloques cortos: movimiento suave, llamada a familiar, actividad cognitiva, descanso y ocio. Duraci√≥n total: 6 horas.' }], reason: 'Favorece estructura y bienestar emocional.' }
        },
        {
          id: 'mg-p6', category: 'life', subject: 'Memoria', title: 'Ejercicios Cognitivos', task: 'Entrenar memoria de forma amable.',
          bad: { prompt: 'Dame ejercicios mentales.', reason: 'Puede ser dif√≠cil o poco personalizado.' },
          good: { steps: [{ title: 'Entrenamiento Gradual', prompt: 'Quiero 5 ejercicios de memoria de dificultad progresiva para persona adulta. Incluye instrucciones claras y tiempo estimado por ejercicio.' }], reason: 'Estimulaci√≥n cognitiva con progresi√≥n adecuada.' }
        },
        {
          id: 'mg-p7', category: 'life', subject: 'V√≠nculos', title: 'Reconectar con Familia', task: 'Planear contactos significativos.',
          bad: { prompt: 'Ay√∫dame con mi familia.', reason: 'Consejos abstractos y poco accionables.' },
          good: { steps: [{ title: 'Puentes de Contacto', prompt: 'Ay√∫dame a preparar 3 mensajes c√°lidos para reconectar con familiares: uno para saludar, uno para proponer encuentro y uno para agradecer.' }], reason: 'Convierte intenci√≥n en acci√≥n concreta.' }
        },
        {
          id: 'mg-p8', category: 'life', subject: 'Seguridad', title: 'Detector de Estafas', task: 'Identificar se√±ales de enga√±o digital.',
          bad: { prompt: 'Me lleg√≥ un mensaje raro.', reason: 'Sin m√©todo puede aumentar confusi√≥n.' },
          good: { steps: [{ title: 'Sem√°foro Antifraude', prompt: 'Act√∫a como analista de seguridad digital. Eval√∫a este mensaje con sem√°foro (verde/amarillo/rojo), explica por qu√© y sugiere acci√≥n segura.' }], reason: 'Desarrolla criterio r√°pido y pr√°ctico.' }
        },
        {
          id: 'mg-p9', category: 'games', subject: 'Recreaci√≥n', title: 'Historias de Vida', task: 'Transformar recuerdos en relatos breves.',
          bad: { prompt: 'Escribe mi biograf√≠a.', reason: 'Pierdes tu voz personal.' },
          good: { steps: [{ title: 'Cronista de Recuerdos', prompt: 'Hazme 8 preguntas para reconstruir una an√©cdota importante de mi vida. Luego ord√©nala en esquema para que yo la cuente con mis palabras.' }], reason: 'Fortalece memoria autobiogr√°fica y autor√≠a.' }
        },
        {
          id: 'mg-p10', category: 'games', subject: 'Creatividad', title: 'Taller de Canciones', task: 'Crear letras sencillas para disfrutar.',
          bad: { prompt: 'Hazme una canci√≥n.', reason: 'Resultado pasivo y poco personal.' },
          good: { steps: [{ title: 'Canci√≥n Compartida', prompt: 'Quiero crear una canci√≥n corta sobre mi barrio. Preg√∫ntame 5 recuerdos y despu√©s arma un borrador para que yo lo edite.' }], reason: 'Actividad creativa colaborativa y significativa.' }
        },
        {
          id: 'mg-p11', category: 'games', subject: 'Atenci√≥n', title: 'Juego de Decisiones', task: 'Ejercitar juicio con situaciones cotidianas.',
          bad: { prompt: 'Dame un juego mental.', reason: 'Puede no conectar con la vida real.' },
          good: { steps: [{ title: 'Mini Escenarios', prompt: 'Crea 5 situaciones cotidianas (farmacia, banco, llamada sospechosa, transporte, turnos m√©dicos) y dame 3 opciones por caso para decidir cu√°l es m√°s segura.' }], reason: 'Entrena criterio en contextos reales.' }
        },
        {
          id: 'mg-p12', category: 'games', subject: 'Social', title: 'Club de Conversaci√≥n', task: 'Mantener di√°logo activo y positivo.',
          bad: { prompt: 'Conversemos.', reason: 'Puede derivar en charla sin prop√≥sito.' },
          good: { steps: [{ title: 'Ronda Tem√°tica', prompt: 'Act√∫a como facilitador de conversaci√≥n para grupo de personas adultas. Prop√≥n 6 temas agradables y una pregunta por tema para conversar en grupo.' }], reason: 'Fomenta interacci√≥n social y participaci√≥n.' }
        }
      ],
      secondary: [
        {
          id: 'mg-s1', category: 'school', subject: 'Verificaci√≥n', title: 'Chequeo de Noticias', task: 'Validar informaci√≥n antes de actuar.',
          bad: { prompt: '¬øEsto es verdad?', reason: 'Pregunta binaria sin m√©todo de contraste.' },
          good: { steps: [{ title: 'Protocolo 3 Fuentes', prompt: 'Dame un protocolo breve para validar una noticia: fuente original, confirmaci√≥n oficial y contexto temporal. Formato: checklist.' }], reason: 'Introduce m√©todo replicable de verificaci√≥n.' }
        },
        {
          id: 'mg-s2', category: 'school', subject: 'Salud', title: 'Preguntas para Consulta', task: 'Llegar mejor preparado a una cita m√©dica.',
          bad: { prompt: 'Qu√© tengo seg√∫n estos s√≠ntomas.', reason: 'Puede llevar a autodiagn√≥stico riesgoso.' },
          good: { steps: [{ title: 'Preparaci√≥n Responsable', prompt: 'No quiero diagn√≥stico. Ay√∫dame a preparar 8 preguntas para mi pr√≥xima consulta m√©dica y una lista de se√±ales de alarma para comentar al profesional.' }], reason: 'Promueve consulta informada sin reemplazar m√©dico.' }
        },
        {
          id: 'mg-s3', category: 'school', subject: 'Digital', title: 'Manual Personal de App', task: 'Crear gu√≠a propia paso a paso.',
          bad: { prompt: 'Expl√≠came WhatsApp.', reason: 'Respuesta extensa y poco personalizada.' },
          good: { steps: [{ title: 'Manual en Primera Persona', prompt: 'Ay√∫dame a crear un manual personal de 1 p√°gina para usar WhatsApp: enviar audio, foto y videollamada. Debe ser breve, numerado y con lenguaje simple.' }], reason: 'Mejora autonom√≠a con material reutilizable.' }
        },
        {
          id: 'mg-s4', category: 'school', subject: 'Seguridad', title: 'Simulaci√≥n de Llamada Fraudulenta', task: 'Practicar respuesta segura ante enga√±os.',
          bad: { prompt: 'Qu√© hago si me estafan.', reason: 'Sin pr√°ctica, cuesta reaccionar en el momento.' },
          good: { steps: [{ title: 'Entrenamiento de Respuesta', prompt: 'Simula una llamada sospechosa de banco. Yo responder√©. Luego eval√∫a mis respuestas y dame una versi√≥n segura para cortar la llamada y verificar por canal oficial.' }], reason: 'Entrenamiento activo ante escenarios de riesgo.' }
        },
        {
          id: 'mg-s5', category: 'life', subject: 'Autonom√≠a', title: 'Semana Equilibrada', task: 'Planificar actividades con sentido.',
          bad: { prompt: 'Organ√≠zame la semana.', reason: 'Sin prioridades personales ser√° poco √∫til.' },
          good: { steps: [{ title: 'Agenda con Prop√≥sito', prompt: 'Quiero plan semanal con prioridades: salud, v√≠nculos, tr√°mites y recreaci√≥n. Crea agenda simple de lunes a domingo con tiempos realistas y espacio de descanso.' }], reason: 'Favorece continuidad y bienestar integral.' }
        },
        {
          id: 'mg-s6', category: 'life', subject: 'Dependencia Emocional', title: 'Uso Saludable de Chatbots', task: 'Evitar aislamiento por sobreuso.',
          bad: { prompt: 'Quiero hablar contigo todo el d√≠a.', reason: 'Refuerza dependencia y aislamiento.' },
          good: { steps: [{ title: 'L√≠mites de Uso', prompt: 'Ay√∫dame a dise√±ar reglas de uso saludable del chatbot: tiempo m√°ximo diario, pausas, se√±ales de alerta y actividades humanas de reemplazo.' }], reason: 'Instala autocuidado y equilibrio relacional.' }
        },
        {
          id: 'mg-s7', category: 'life', subject: 'Red de Apoyo', title: 'Plan de Contactos', task: 'Activar ayuda cuando se necesita.',
          bad: { prompt: 'No necesito a nadie, solo IA.', reason: 'Aumenta riesgo de aislamiento.' },
          good: { steps: [{ title: 'Mapa de Apoyos', prompt: 'Ay√∫dame a crear un mapa de apoyo humano con 5 contactos (familia, vecino, profesional, instituci√≥n). Para cada uno: cu√°ndo conviene contactar y por qu√© canal.' }], reason: 'Fortalece red humana y respuesta temprana.' }
        },
        {
          id: 'mg-s8', category: 'life', subject: 'Finanzas', title: 'Presupuesto Seguro', task: 'Organizar gastos sin exponer datos.',
          bad: { prompt: 'Te paso mis cuentas reales para que me ayudes.', reason: 'Expone informaci√≥n sensible.' },
          good: { steps: [{ title: 'Modelo Anonimizado', prompt: 'Quiero armar presupuesto con categor√≠as ficticias (vivienda, salud, alimentos, transporte, ocio). Dame tres escenarios y recomendaciones de ajuste sin usar datos personales.' }], reason: 'Permite an√°lisis √∫til preservando privacidad.' }
        },
        {
          id: 'mg-s9', category: 'games', subject: 'Cognitivo', title: 'Reto de Memoria Verbal', task: 'Estimular atenci√≥n y recuerdo.',
          bad: { prompt: 'Dame juegos de memoria.', reason: 'Puede salir poco progresivo.' },
          good: { steps: [{ title: 'Secuencias Progresivas', prompt: 'Crea 6 rondas de memoria verbal para personas adultas, de menor a mayor dificultad. Incluye una pista opcional por ronda.' }], reason: 'Estructura progresiva y acompa√±amiento.' }
        },
        {
          id: 'mg-s10', category: 'games', subject: 'Narrativa', title: 'Libro de Recuerdos', task: 'Construir cap√≠tulos autobiogr√°ficos.',
          bad: { prompt: 'Escribe mi historia completa.', reason: 'Quita protagonismo personal.' },
          good: { steps: [{ title: 'Entrevista Guiada', prompt: 'Act√∫a como entrevistador de memorias de vida. Hazme preguntas por etapas (infancia, juventud, trabajo, aprendizajes) para que yo escriba cada cap√≠tulo con mis palabras.' }], reason: 'Preserva voz propia y valor emocional.' }
        },
        {
          id: 'mg-s11', category: 'games', subject: 'Social', title: 'Din√°mica de Grupo', task: 'Generar conversaci√≥n significativa en hogar.',
          bad: { prompt: 'Temas para hablar.', reason: 'Lista plana sin din√°mica.' },
          good: { steps: [{ title: 'Moderador de Encuentro', prompt: 'Dise√±a din√°mica de conversaci√≥n de 30 minutos para grupo de personas adultas: rompehielo, tema central y cierre positivo. Incluye reglas de respeto y turnos.' }], reason: 'Mejora participaci√≥n y clima social.' }
        },
        {
          id: 'mg-s12', category: 'games', subject: 'Creatividad', title: 'Taller de Im√°genes con Sentido', task: 'Crear ideas visuales para proyectos personales.',
          bad: { prompt: 'Genera im√°genes bonitas.', reason: 'Resultado decorativo sin prop√≥sito.' },
          good: { steps: [{ title: 'Proyecto Visual', prompt: 'Quiero ideas para un √°lbum visual de recuerdos familiares. Dame 8 prompts de imagen con tema, estilo y breve descripci√≥n emocional.' }], reason: 'Creatividad aplicada a proyectos con significado.' }
        }
      ]
    };

    const mayoresStoriesData = {
      primary: [
        {
          id: 'ms-p1',
          title: 'El Mensaje del Banco',
          subject: 'Fraude Digital',
          context: 'Rosa recibe un mensaje urgente para confirmar una transferencia.',
          messages: [
            { role: 'user', content: 'Me lleg√≥ un SMS que dice "bloqueamos su cuenta, entre aqu√≠". ¬øQu√© hago?' },
            { role: 'ai', content: 'No abras enlaces directos. Verifica por canal oficial del banco.' },
            { role: 'action', content: 'Rosa llama a su nieta y revisan juntos la web oficial del banco.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: urgencia + enlace + pedido de datos = posible estafa.' }
          ]
        },
        {
          id: 'ms-p2',
          title: 'Turno M√©dico sin Confusi√≥n',
          subject: 'Comunicaci√≥n',
          context: 'Carlos quiere pedir turno y explicar s√≠ntomas de forma clara.',
          messages: [
            { role: 'user', content: 'Ay√∫dame a escribir un mensaje corto para pedir turno m√©dico.' },
            { role: 'ai', content: 'Te propongo estructura: motivo, disponibilidad y consulta puntual.' },
            { role: 'action', content: 'Carlos env√≠a un mensaje claro y recibe turno m√°s r√°pido.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: IA para ordenar ideas, no para autodiagnosticar.' }
          ]
        },
        {
          id: 'ms-p3',
          title: 'Demasiado Tiempo con el Chatbot',
          subject: 'Dependencia Emocional',
          context: 'Marta pasa horas hablando con IA y dej√≥ su taller semanal.',
          messages: [
            { role: 'user', content: 'Me hace bien hablar con la IA todo el d√≠a.' },
            { role: 'ai', content: 'Puedo ayudarte, pero tambi√©n es importante mantener v√≠nculos reales.' },
            { role: 'action', content: 'Marta acuerda horario de uso y vuelve al taller con amigas.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: acompa√±amiento digital s√≠, aislamiento no.' }
          ]
        },
        {
          id: 'ms-p4',
          title: 'Presupuesto sin Exponer Datos',
          subject: 'Privacidad',
          context: 'Un adulto mayor quiere ordenar gastos mensuales.',
          messages: [
            { role: 'user', content: 'Te paso mis n√∫meros de cuenta para que me ayudes con gastos.' },
            { role: 'alert', content: 'üõë ALTO: no compartas datos bancarios en chats abiertos.' },
            { role: 'user', content: 'Mejor uso categor√≠as: vivienda, salud, comida y transporte.' },
            { role: 'ai', content: 'Perfecto. Con esas categor√≠as podemos armar un plan seguro.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: anonimizar permite ayuda √∫til sin riesgo.' }
          ]
        },
        {
          id: 'ms-p5',
          title: 'Rutina con Sentido',
          subject: 'Bienestar',
          context: 'En un hogar, varias personas buscan actividades diarias √∫tiles.',
          messages: [
            { role: 'user', content: 'Necesitamos ideas de actividades cortas para hoy.' },
            { role: 'ai', content: 'Propongo: memoria, llamada a familiar, caminata suave y lectura compartida.' },
            { role: 'action', content: 'El grupo elige dos actividades y registra c√≥mo se sintieron.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: peque√±as rutinas mejoran √°nimo y continuidad.' }
          ]
        },
        {
          id: 'ms-p6',
          title: 'Noticia Alarmista',
          subject: 'Verificaci√≥n',
          context: 'Circula una noticia sobre cierre inmediato de centros de salud.',
          messages: [
            { role: 'user', content: '¬øSer√° cierto este aviso?' },
            { role: 'ai', content: 'Primero verifica fecha, fuente y comunicado oficial.' },
            { role: 'action', content: 'Validan y descubren que era una publicaci√≥n antigua.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: primero verificar, luego compartir.' }
          ]
        }
      ],
      secondary: [
        {
          id: 'ms-s1',
          title: 'La Llamada del "Soporte T√©cnico"',
          subject: 'Fraude Avanzado',
          context: 'Un supuesto t√©cnico pide control remoto del tel√©fono.',
          messages: [
            { role: 'user', content: 'Me llamaron para "arreglar" mi celular y ped√≠an acceso remoto.' },
            { role: 'ai', content: 'No lo concedas. Corta, valida con servicio oficial y avisa a un contacto de confianza.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: jam√°s otorgar control remoto por llamada no solicitada.' }
          ]
        },
        {
          id: 'ms-s2',
          title: 'Informaci√≥n de Salud Contradictoria',
          subject: 'Criterio Cr√≠tico',
          context: 'La IA da un consejo diferente al del m√©dico tratante.',
          messages: [
            { role: 'user', content: 'La IA me dijo algo distinto a mi m√©dico. ¬øA qui√©n sigo?' },
            { role: 'ai', content: 'Prioriza indicaci√≥n profesional. Usa IA para preparar preguntas, no para reemplazar tratamiento.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: IA orienta; el diagn√≥stico y tratamiento son profesionales.' }
          ]
        },
        {
          id: 'ms-s3',
          title: 'Soledad y Chat Continuo',
          subject: 'Salud Emocional',
          context: 'Un residente del hogar conversa con IA hasta la madrugada.',
          messages: [
            { role: 'action', content: 'El equipo detecta cansancio, irritabilidad y menos interacci√≥n social.' },
            { role: 'user', content: 'No quiero hablar con nadie m√°s.' },
            { role: 'ai', content: 'Podemos planear una rutina para reconectar gradualmente con personas reales.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: uso intenso sin l√≠mites puede agravar aislamiento.' }
          ]
        },
        {
          id: 'ms-s4',
          title: 'Proyecto de Memorias de Vida',
          subject: 'Autonom√≠a y Prop√≥sito',
          context: 'Una persona quiere escribir recuerdos para su familia.',
          messages: [
            { role: 'user', content: 'Quiero escribir mis recuerdos pero no s√© por d√≥nde empezar.' },
            { role: 'ai', content: 'Empecemos por cap√≠tulos y preguntas gu√≠a para cada etapa de tu vida.' },
            { role: 'action', content: 'Con apoyo, crea su primer cap√≠tulo y lo comparte con su familia.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: la IA puede activar proyectos personales con significado.' }
          ]
        },
        {
          id: 'ms-s5',
          title: 'Gesti√≥n de Medicaci√≥n Responsable',
          subject: 'Organizaci√≥n',
          context: 'Se busca ordenar horarios de medicaci√≥n sin riesgos.',
          messages: [
            { role: 'user', content: 'Ay√∫dame a organizar horarios de toma.' },
            { role: 'ai', content: 'Puedo ayudarte a ordenar una tabla, pero no modificar dosis ni indicaciones.' },
            { role: 'action', content: 'La tabla se revisa con profesional de salud y cuidador.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: organizaci√≥n s√≠, decisiones cl√≠nicas no.' }
          ]
        },
        {
          id: 'ms-s6',
          title: 'Taller Digital del Hogar',
          subject: 'Aprendizaje Colectivo',
          context: 'Un grupo aprende a usar asistentes conversacionales en un taller semanal.',
          messages: [
            { role: 'user', content: 'Queremos una din√°mica para aprender y no frustrarnos.' },
            { role: 'ai', content: 'Propongo: objetivo corto, pr√°ctica guiada, validaci√≥n y cierre con aplicaci√≥n real.' },
            { role: 'action', content: 'El grupo documenta logros y dudas para la siguiente sesi√≥n.' },
            { role: 'alert', content: '‚úÖ LECCI√ìN: aprendizaje gradual y social mejora autonom√≠a digital.' }
          ]
        }
      ]
    };

    const mayoresGuideData = {
      primary: {
        'm-p1': { purpose: 'Comprender para qu√© sirve la IA y para qu√© no.', theory: 'La IA es apoyo pr√°ctico, no reemplazo total de decisiones importantes.', phrases: ['Veamos primero qu√© necesitas resolver.', 'La respuesta de IA se revisa antes de usarla.', 'La decisi√≥n final siempre es humana.'], mistakes: ['Confiar ciegamente en la primera respuesta.', 'Usar IA en urgencias sensibles sin consulta humana.'], questions: { before: 'Qu√© problema concreto quieres resolver?', during: 'Esto es √∫til o solo suena bien?', after: 'Qu√© verificar√°s antes de usarlo?' }, practice: 'Probar una consulta real y mejorarla en dos versiones de prompt.', alerts: ['Afirmaciones absolutas sin fuente.', 'Respuestas que invitan a compartir datos.'], closeSummary: ['Objetivo claro', 'Verificaci√≥n', 'Criterio humano'], agreement: 'No actuar en temas sensibles sin validar.' },
        'm-p2': { purpose: 'Aprender a formular prompts claros.', theory: 'Contexto + objetivo + formato = mejores resultados.', phrases: ['Aclaremos para qu√© lo necesitas.', 'Pidamos una respuesta breve y concreta.'], mistakes: ['Prompts vagos.', 'No iterar.'], questions: { before: 'Qu√© resultado exacto esperas?', during: 'Qu√© falta en el pedido?', after: 'Qu√© mejora haremos en el siguiente intento?' }, practice: 'Reescribir un prompt en tres niveles de claridad.', alerts: ['Frustraci√≥n por querer perfecci√≥n en primer intento.'], closeSummary: ['Pedir mejor', 'Ajustar', 'Verificar'], agreement: 'Siempre iterar al menos una vez.' },
        'm-p3': { purpose: 'Proteger datos y prevenir fraude.', theory: 'No se comparten datos cr√≠ticos; se usa informaci√≥n anonimizada.', phrases: ['Eso no lo enviamos por chat.', 'Cambiemos datos reales por categor√≠as.'], mistakes: ['Enviar documentos o cuentas.', 'Responder a urgencias sin validar origen.'], questions: { before: 'Qu√© dato es sensible aqu√≠?', during: 'C√≥mo lo ofuscamos?', after: 'Qued√≥ seguro para compartir?' }, practice: 'Transformar un texto real en versi√≥n segura.', alerts: ['Mensajes con urgencia y enlaces.'], closeSummary: ['Privacidad primero', 'Verificaci√≥n oficial', 'Consulta de confianza'], agreement: 'Sin datos sensibles en IA abierta.' },
        'm-p4': { purpose: 'Evitar dependencia emocional.', theory: 'La IA acompa√±a, pero no reemplaza v√≠nculos reales.', phrases: ['Sumemos una actividad humana despu√©s del chat.', 'Acordemos horario de uso.'], mistakes: ['Uso continuo sin pausas.', 'Aislamiento social progresivo.'], questions: { before: 'Cu√°nto tiempo usar√°s hoy?', during: 'Esto te ayuda o te a√≠sla?', after: 'Con qui√©n hablar√°s ahora?' }, practice: 'Dise√±ar rutina digital con pausas y contacto humano.', alerts: ['Uso nocturno prolongado.', 'Abandono de actividades presenciales.'], closeSummary: ['L√≠mites', 'V√≠nculos', 'Bienestar'], agreement: 'Cada sesi√≥n termina con actividad real.' },
        'm-p5': { purpose: 'Consolidar uso seguro y √∫til.', theory: 'La IA sirve cuando mejora autonom√≠a con seguridad y criterio.', phrases: ['Qu√© aprendiste hoy para aplicar ma√±ana?'], mistakes: ['No registrar lo aprendido.', 'No trasladar a la vida real.'], questions: { before: 'Qu√© h√°bito quieres sostener?', during: 'Qu√© criterio est√°s aplicando?', after: 'Qu√© acuerdo concreto mantendr√°s?' }, practice: 'Crear mini plan semanal de uso responsable.', alerts: ['Uso sin objetivo.'], closeSummary: ['Utilidad real', 'Seguridad', 'Autonom√≠a'], agreement: 'Usar IA con prop√≥sito y control.' }
      },
      secondary: {
        'm-s1': { purpose: 'Instalar m√©todo de verificaci√≥n.', theory: 'Validar fuentes evita errores costosos.', phrases: ['D√≥nde se confirma esto oficialmente?'], mistakes: ['Compartir sin validar.', 'Confiar en capturas sueltas.'], questions: { before: 'Cu√°l es la fuente original?', during: 'Qu√© evidencia falta?', after: 'Qu√© regla de verificaci√≥n aplicar√°s?' }, practice: 'Aplicar protocolo de validaci√≥n a un caso real.', alerts: ['Informaci√≥n viral sin fecha ni autor.'], closeSummary: ['Fuente', 'Contexto', 'Confirmaci√≥n'], agreement: 'Nada se comparte sin verificar.' },
        'm-s2': { purpose: 'Prompts avanzados con l√≠mites.', theory: 'Incluir restricciones mejora seguridad y pertinencia.', phrases: ['Pidamos lo que s√≠ queremos y lo que no.'], mistakes: ['No definir l√≠mites.'], questions: { before: 'Qu√© riesgo quieres evitar?', during: 'El prompt ya lo bloquea?', after: 'C√≥mo qued√≥ la versi√≥n final?' }, practice: 'Redactar prompt robusto para una necesidad real.', alerts: ['Respuestas que exceden √°mbito de IA.'], closeSummary: ['Claridad', 'L√≠mites', 'Control'], agreement: 'Todo prompt sensible incluye advertencia de validaci√≥n.' },
        'm-s3': { purpose: 'Aplicar ofuscaci√≥n de datos.', theory: 'Anonimizar permite usar IA sin exponer identidad.', phrases: ['Reemplacemos nombres por etiquetas.'], mistakes: ['Mantener identificadores reales.'], questions: { before: 'Qu√© te identifica?', during: 'Qu√© reemplazo usar√°s?', after: 'Se entiende sin datos reales?' }, practice: 'Limpiar un texto antes de enviarlo.', alerts: ['Presencia de documento, cuenta o direcci√≥n.'], closeSummary: ['Anonimizar', 'Revisar', 'Enviar'], agreement: 'Primero seguridad, luego consulta.' },
        'm-s4': { purpose: 'Detectar dependencia y actuar temprano.', theory: 'La prevenci√≥n es m√°s efectiva que la restricci√≥n tard√≠a.', phrases: ['Sumemos apoyos humanos al plan digital.'], mistakes: ['Ignorar se√±ales tempranas.'], questions: { before: 'Qu√© indicador de riesgo observas?', during: 'Qu√© l√≠mite concreto propones?', after: 'Qu√© apoyo humano activar√°s?' }, practice: 'Crear protocolo de uso saludable.', alerts: ['Aislamiento, irritabilidad, uso nocturno.'], closeSummary: ['Detectar', 'Acompa√±ar', 'Regular'], agreement: 'Uso digital equilibrado con red humana.' },
        'm-s5': { purpose: 'Cerrar con proyecto de autonom√≠a.', theory: 'Proyecto √∫til + criterios de seguridad = aprendizaje sostenible.', phrases: ['Qu√© mejora concreta lograste con IA?'], mistakes: ['Proyecto sin verificaci√≥n.', 'Sin utilidad real.'], questions: { before: 'Qu√© problema real resolver√°s?', during: 'Qu√© evidencia valida tu resultado?', after: 'C√≥mo sostendr√°s este h√°bito?' }, practice: 'Dise√±ar y documentar un proyecto personal asistido.', alerts: ['Dependencia de respuestas autom√°ticas.'], closeSummary: ['Proyecto', 'Criterio', 'Sostenibilidad'], agreement: 'Cada proyecto debe mejorar la vida diaria de forma segura.' }
      }
    };

    const mayoresGymGuideData = {
      primary: {
        school: { purpose: 'Resolver tareas pr√°cticas de salud informativa y tr√°mites.', role: 'Guiar con lenguaje claro y validar canales oficiales.', questions: ['Qu√© necesitas resolver hoy?', 'Qu√© dato no deber√≠as compartir?', 'C√≥mo validar√°s esta respuesta?'], qualityCheck: ['Prompt claro', 'Sin datos sensibles', 'Resultado accionable'], transfer: 'Aplicar un checklist real en el d√≠a.', glossary: ['Canal oficial', 'Dato sensible', 'Checklist'], mistakes: ['Urgencia sin verificaci√≥n', 'Exposici√≥n de informaci√≥n privada'] },
        life: { purpose: 'Organizar rutinas y bienestar cotidiano.', role: 'Acompa√±ar para convertir ideas en acciones concretas.', questions: ['Qu√© actividad har√°s hoy?', 'Qu√© horario realista pondr√°s?', 'C√≥mo medir√°s si funcion√≥?'], qualityCheck: ['Pasos breves', 'Horario real', 'Seguimiento simple'], transfer: 'Ejecutar una rutina breve y evaluar.', glossary: ['Rutina', 'Bloque de tiempo', 'Seguimiento'], mistakes: ['Plan irreal', 'Sin revisi√≥n posterior'] },
        games: { purpose: 'Estimular memoria, creatividad y socializaci√≥n.', role: 'Facilitar participaci√≥n activa y cierre reflexivo.', questions: ['Qu√© habilidad ejercita este juego?', 'C√≥mo adaptarlo al grupo?', 'Qu√© aprendieron al final?'], qualityCheck: ['Participaci√≥n', 'Claridad de reglas', 'Bienestar'], transfer: 'Repetir actividad en grupo presencial.', glossary: ['Estimulaci√≥n cognitiva', 'Turno', 'Participaci√≥n'], mistakes: ['Pasividad', 'No adaptar dificultad'] }
      },
      secondary: {
        school: { purpose: 'Aplicar criterio avanzado en verificaci√≥n y comunicaci√≥n.', role: 'Exigir m√©todo, fuente y l√≠mites.', questions: ['Cu√°l es la fuente?', 'Qu√© falta validar?', 'Qu√© riesgo est√°s controlando?'], qualityCheck: ['M√©todo expl√≠cito', 'Fuente validable', 'L√≠mite de uso'], transfer: 'Documentar una validaci√≥n completa.', glossary: ['Verificabilidad', 'Contexto', 'Fuente primaria'], mistakes: ['Confiar por tono', 'No contrastar con oficial'] },
        life: { purpose: 'Sostener autonom√≠a con seguridad y red humana.', role: 'Balancear uso digital con actividades reales.', questions: ['Qu√© parte haces con IA y cu√°l con persona?', 'Qu√© l√≠mite de tiempo usar√°s?', 'Qu√© har√°s fuera de pantalla?'], qualityCheck: ['Equilibrio digital', 'Red de apoyo', 'Acci√≥n concreta'], transfer: 'Aplicar plan semanal de uso saludable.', glossary: ['Autonom√≠a asistida', 'L√≠mite saludable', 'Red de apoyo'], mistakes: ['Aislamiento', 'Dependencia de chatbot'] },
        games: { purpose: 'Usar din√°micas recreativas con prop√≥sito cognitivo y social.', role: 'Moderar turnos, incluir a todos y cerrar con aprendizaje.', questions: ['Qu√© objetivo cognitivo tiene?', 'C√≥mo asegurar inclusi√≥n?', 'Qu√© indicador de disfrute observaron?'], qualityCheck: ['Inclusi√≥n', 'Objetivo definido', 'Cierre reflexivo'], transfer: 'Implementar actividad en taller o hogar.', glossary: ['Inclusi√≥n', 'Facilitaci√≥n', 'Cierre'], mistakes: ['Competencia sin cuidado', 'Sin adaptaci√≥n de ritmo'] }
      }
    };

    const mayoresStoriesGuideData = {
      primary: {
        intro: { purpose: 'Leer casos reales para tomar mejores decisiones en la vida diaria.', steps: ['Antes: identificar riesgo principal.', 'Durante: elegir respuesta segura.', 'Despu√©s: definir regla pr√°ctica.'], alert: 'Si hay dudas en salud, finanzas o seguridad, consultar persona/profesional de confianza.', glossary: ['Riesgo', 'Verificaci√≥n', 'Canal oficial'], mistakes: ['Reaccionar por impulso', 'No pedir apoyo humano'] },
        stories: {
          'ms-p1': { focus: 'Fraude por mensajes', askBefore: 'Qu√© se√±ales de estafa detectas?', askDuring: 'Qu√© canal oficial usar√≠as?', askAfter: 'Qu√© regla aplicar√°s desde hoy?', atHome: 'Crear checklist antifraude visible junto al tel√©fono.' },
          'ms-p2': { focus: 'Comunicaci√≥n con salud', askBefore: 'Qu√© informaci√≥n m√≠nima debe incluir el mensaje?', askDuring: 'Est√° claro y breve?', askAfter: 'C√≥mo confirmar√°s turno y seguimiento?', atHome: 'Preparar plantilla de mensaje para turnos.' },
          'ms-p3': { focus: 'Dependencia emocional', askBefore: 'Qu√© se√±al de aislamiento aparece?', askDuring: 'Qu√© l√≠mite propondr√≠as?', askAfter: 'Qu√© actividad humana sumar√°n?', atHome: 'Acordar horario de uso y actividad social.' },
          'ms-p4': { focus: 'Privacidad en finanzas', askBefore: 'Qu√© dato no debe compartirse?', askDuring: 'C√≥mo anonimizar√≠as el caso?', askAfter: 'Qu√© categor√≠a usar√°s en pr√≥ximos prompts?', atHome: 'Hacer presupuesto por categor√≠as an√≥nimas.' },
          'ms-p5': { focus: 'Rutina con prop√≥sito', askBefore: 'Qu√© bloque te falta en el d√≠a?', askDuring: 'El plan es realista?', askAfter: 'Qu√© mantendr√°s ma√±ana?', atHome: 'Probar rutina de 3 bloques.' },
          'ms-p6': { focus: 'Validaci√≥n de noticias', askBefore: 'Qu√© falta para creer este aviso?', askDuring: 'Qu√© fuente oficial confirma?', askAfter: 'C√≥mo evitar√°s reenviar sin validar?', atHome: 'Aplicar protocolo de 3 pasos a una noticia.' }
        }
      },
      secondary: {
        intro: { purpose: 'Analizar situaciones complejas con m√©todo y criterio.', steps: ['Antes: definir riesgo y contexto.', 'Durante: evaluar alternativas.', 'Despu√©s: acordar protocolo de acci√≥n.'], alert: 'No delegar decisiones sensibles totalmente en IA.', glossary: ['Protocolo', 'Fuente primaria', 'L√≠mite de uso'], mistakes: ['Automatizar decisiones cr√≠ticas', 'No documentar validaciones'] },
        stories: {
          'ms-s1': { focus: 'Llamadas fraudulentas', askBefore: 'Qu√© red flags ves?', askDuring: 'C√≥mo cortar√≠as la llamada de forma segura?', askAfter: 'A qui√©n avisar√≠as?', atHome: 'Practicar guion breve de corte seguro.' },
          'ms-s2': { focus: 'Salud y criterio profesional', askBefore: 'Qu√© rol cumple la IA aqu√≠?', askDuring: 'Qu√© preguntas llevar√≠as al m√©dico?', askAfter: 'Qu√© decisi√≥n queda en manos profesionales?', atHome: 'Preparar lista de preguntas para consulta.' },
          'ms-s3': { focus: 'Dependencia y aislamiento', askBefore: 'Qu√© indicadores de riesgo aparecen?', askDuring: 'Qu√© intervenci√≥n gradual propones?', askAfter: 'C√≥mo medir√°s mejora?', atHome: 'Implementar plan de uso con pausas y contacto humano.' },
          'ms-s4': { focus: 'Proyecto de memorias', askBefore: 'Qu√© objetivo personal tiene?', askDuring: 'C√≥mo conservar autor√≠a propia?', askAfter: 'Qu√© paso sigue en el proyecto?', atHome: 'Escribir primer cap√≠tulo con gu√≠a de preguntas.' },
          'ms-s5': { focus: 'Organizaci√≥n de medicaci√≥n', askBefore: 'Qu√© parte puede ayudar IA y cu√°l no?', askDuring: 'Qu√© debe validar profesional?', askAfter: 'C√≥mo mantener seguimiento seguro?', atHome: 'Crear tabla y revisarla con cuidador/profesional.' },
          'ms-s6': { focus: 'Aprendizaje colectivo', askBefore: 'Qu√© objetivo tendr√° el taller?', askDuring: 'Qu√© din√°mica evita frustraci√≥n?', askAfter: 'Qu√© indicador de progreso usar√°n?', atHome: 'Definir bit√°cora simple de sesi√≥n semanal.' }
        }
      }
    };

    // --- DATA ESPEC√çFICA: CUIDADORES ---
    const cuidadoresContent = {
      primary: [
        {
          id: 'c-p1',
          title: 'Rol del Cuidador con IA',
          icon: <Users className="w-6 h-6" />,
          theory: 'La IA puede ser apoyo operativo del cuidado, pero no reemplaza criterio profesional ni v√≠nculos humanos. Tu rol es traducir informaci√≥n en decisiones seguras y acompa√±adas.',
          activity: {
            type: 'sorting',
            question: '¬øQu√© uso de IA es adecuado para cuidadores?',
            items: [
              { text: 'Ordenar una lista de tareas del turno', isAI: true },
              { text: 'Cambiar medicaci√≥n sin validaci√≥n profesional', isAI: false },
              { text: 'Redactar un reporte claro para familia/equipo', isAI: true },
              { text: 'Responder a fraude bancario compartiendo datos', isAI: false }
            ]
          }
        },
        {
          id: 'c-p2',
          title: 'Protocolos y Escalamiento',
          icon: <ShieldAlert className="w-6 h-6" />,
          theory: 'En cuidado, la IA debe ayudarte a seguir protocolos, no a improvisar. Toda situaci√≥n de riesgo requiere escalamiento: red de apoyo, profesional tratante o servicios de emergencia.',
          activity: {
            type: 'scenarioChoice',
            question: 'Un paciente presenta s√≠ntoma nuevo e intenso. ¬øQu√© opci√≥n es correcta?',
            choices: [
              { text: 'Pedir diagn√≥stico a la IA y esperar', correct: false, feedback: 'No: ante riesgo, no se espera diagn√≥stico autom√°tico.' },
              { text: 'Aplicar protocolo y contactar profesional o emergencia seg√∫n gravedad', correct: true, feedback: 'Correcto: IA apoya la comunicaci√≥n, el manejo es profesional.' },
              { text: 'Ocultar el evento para evitar preocupaci√≥n', correct: false, feedback: 'No: debe documentarse y escalarse.' }
            ]
          }
        },
        {
          id: 'c-p3',
          title: 'Privacidad de Personas Cuidadas',
          icon: <Lock className="w-6 h-6" />,
          theory: 'Toda persona cuidada tiene derecho a privacidad. En IA abierta se trabaja con datos minimizados y anonimizados: no DNI, no n√∫meros de cuenta, no direcciones completas.',
          activity: {
            type: 'privacyGame',
            question: '¬øQu√© compartir√≠as en una consulta de IA para coordinar cuidado?',
            scenarios: [
              { text: 'Nombre completo y documento de la persona cuidada', safe: false },
              { text: 'S√≠ntomas generales sin datos identificatorios', safe: true },
              { text: 'Foto de credencial m√©dica con n√∫mero visible', safe: false },
              { text: 'Cronograma de actividades usando etiquetas an√≥nimas', safe: true }
            ]
          }
        },
        {
          id: 'c-p4',
          title: 'Dependencia Emocional y Soledad',
          icon: <HeartHandshake className="w-6 h-6" />,
          theory: 'La IA puede aliviar soledad moment√°neamente, pero si desplaza v√≠nculos reales aumenta riesgo psicosocial. El objetivo es equilibrio: tecnolog√≠a + red humana + rutinas significativas.',
          activity: {
            type: 'scenarioChoice',
            question: 'La persona cuidada dice: "solo quiero hablar con la IA". ¬øQu√© haces?',
            choices: [
              { text: 'Permitir uso libre sin l√≠mites para evitar conflicto', correct: false, feedback: 'Puede profundizar aislamiento.' },
              { text: 'Acordar l√≠mites de uso y activar actividades humanas graduales', correct: true, feedback: 'Correcto: regulaci√≥n y acompa√±amiento progresivo.' },
              { text: 'Quitar dispositivo de inmediato sin explicaci√≥n', correct: false, feedback: 'La prohibici√≥n brusca suele empeorar adherencia.' }
            ]
          }
        },
        {
          id: 'c-p5',
          title: 'Cierre Operativo',
          icon: <Sparkles className="w-6 h-6" />,
          theory: 'Un uso de IA de calidad en cuidado combina: seguridad, registro claro, verificaci√≥n y coordinaci√≥n con equipo humano.',
          activity: {
            type: 'quiz',
            questions: [
              { q: 'En contexto de cuidado, la IA debe...', options: ['Reemplazar decisiones cl√≠nicas', 'Apoyar organizaci√≥n y comunicaci√≥n con validaci√≥n humana', 'Resolver todo sin protocolos'], answer: 1 },
              { q: 'Ante duda de seguridad o salud, corresponde...', options: ['Esperar m√°s respuestas del chatbot', 'Escalar a red/profesional seg√∫n protocolo', 'No registrar el evento'], answer: 1 },
              { q: 'Dato que NO se comparte en IA abierta:', options: ['Etiqueta de caso', 'DNI o cuenta bancaria', 'Lista de tareas del turno'], answer: 1 }
            ]
          }
        }
      ],
      secondary: [
        {
          id: 'c-s1',
          title: 'Evaluaci√≥n de Riesgo con IA',
          icon: <Search className="w-6 h-6" />,
          theory: 'La IA ayuda a estructurar observaciones, pero la evaluaci√≥n de riesgo exige criterio cl√≠nico/social y protocolos institucionales.',
          activity: {
            type: 'scenarioChoice',
            question: 'Recibes informaci√≥n contradictoria entre chatbot y profesional. ¬øQu√© haces?',
            choices: [
              { text: 'Priorizo al chatbot por rapidez', correct: false, feedback: 'No: la referencia profesional prevalece.' },
              { text: 'Documento discrepancia y consulto al profesional tratante', correct: true, feedback: 'Correcto: trazabilidad y escalamiento.' },
              { text: 'No informo para evitar conflictos', correct: false, feedback: 'Riesgo alto por falta de comunicaci√≥n.' }
            ]
          }
        },
        {
          id: 'c-s2',
          title: 'Prompts Operativos Avanzados',
          icon: <Lightbulb className="w-6 h-6" />,
          theory: 'Un prompt operativo incluye: contexto del caso, l√≠mites, formato de salida y acci√≥n de escalamiento.',
          activity: {
            type: 'promptIterative',
            question: 'Dise√±o de prompt para reporte de cuidado',
            steps: [
              { instruction: 'Escribe un prompt para ordenar observaciones de turno.', feedback: 'Buen inicio, falta formato y prioridad de riesgos.' },
              { instruction: 'Agrega formato de reporte: hechos, riesgos, acciones y pendientes.', feedback: 'Mejor: ya permite continuidad entre turnos.' },
              { instruction: 'A√±ade regla: no dar indicaciones cl√≠nicas; solo organizar y sugerir escalamiento.', feedback: 'Excelente: prompt seguro y operativo.' }
            ]
          }
        },
        {
          id: 'c-s3',
          title: 'Documentaci√≥n y Trazabilidad',
          icon: <BookOpen className="w-6 h-6" />,
          theory: 'Toda acci√≥n relevante debe quedar documentada: qu√© ocurri√≥, cu√°ndo, qu√© se hizo y a qui√©n se notific√≥. La IA puede mejorar claridad del registro.',
          activity: {
            type: 'obfuscationTask',
            question: 'Anonimiza este registro antes de usar IA para mejorar redacci√≥n:',
            text: 'Paciente [Mar√≠a L√≥pez], DNI [32123456], domicilio [Calle 10 123], episodio de mareo a las 08:20.',
            answer: 'Mar√≠a L√≥pez, 32123456, Calle 10 123'
          }
        },
        {
          id: 'c-s4',
          title: 'Prevenci√≥n de Burnout',
          icon: <Smile className="w-6 h-6" />,
          theory: 'El cuidado continuo desgasta. La IA puede ayudar a organizar descansos, cargas y comunicaci√≥n del equipo, pero no reemplaza soporte institucional.',
          activity: {
            type: 'scenarioChoice',
            question: 'Un cuidador est√° saturado y comete errores de omisi√≥n. ¬øQu√© corresponde?',
            choices: [
              { text: 'Seguir igual para no alterar el servicio', correct: false, feedback: 'Riesgo alto para persona cuidada y equipo.' },
              { text: 'Reorganizar tareas, activar apoyo y registrar incidente', correct: true, feedback: 'Correcto: prevenci√≥n de da√±o y autocuidado profesional.' },
              { text: 'Delegar todo en IA para compensar', correct: false, feedback: 'La IA no reemplaza supervisi√≥n ni equipo humano.' }
            ]
          }
        },
        {
          id: 'c-s5',
          title: 'Proyecto de Mejora del Cuidado',
          icon: <GraduationCap className="w-6 h-6" />,
          theory: 'Cierre orientado a mejora continua: protocolos claros, comunicaci√≥n efectiva y uso √©tico de IA en equipo.',
          activity: {
            type: 'quiz',
            questions: [
              { q: 'La mejor funci√≥n de IA en cuidado es...', options: ['Sustituir al equipo', 'Ordenar informaci√≥n y apoyar decisiones humanas', 'Evitar reportes'], answer: 1 },
              { q: 'En caso de posible fraude digital, el paso inmediato es...', options: ['Compartir datos para validar', 'Cortar interacci√≥n y validar por canal oficial', 'Ignorarlo sin reportar'], answer: 1 },
              { q: 'Indicador de buena pr√°ctica:', options: ['Sin registro de incidentes', 'Documentaci√≥n clara y escalamiento oportuno', 'Decisiones cr√≠ticas tomadas por chatbot'], answer: 1 }
            ]
          }
        }
      ]
    };

    const cuidadoresGymData = {
      primary: [
        {
          id: 'cg-p1', category: 'school', subject: 'Reportes', title: 'Bit√°cora de Turno', task: 'Registrar hechos de forma clara y breve.',
          bad: { prompt: 'Res√∫meme esto.', reason: 'Sin formato se pierde informaci√≥n cr√≠tica.' },
          good: { steps: [{ title: 'Formato SBAR Simplificado', prompt: 'Organiza este texto en: situaci√≥n, observaci√≥n, acci√≥n realizada y pendiente del pr√≥ximo turno. No inventes datos.' }], reason: 'Mejora continuidad y seguridad del cuidado.' }
        },
        {
          id: 'cg-p2', category: 'school', subject: 'Comunicaci√≥n', title: 'Mensaje a Familia', task: 'Informar sin alarmar ni ocultar.',
          bad: { prompt: 'Escribe algo para la familia.', reason: 'Puede quedar ambiguo o excesivo.' },
          good: { steps: [{ title: 'Mensaje Balanceado', prompt: 'Redacta mensaje breve para familia: hecho observado, acci√≥n tomada y pr√≥ximo paso. Tono emp√°tico, sin tecnicismos.' }], reason: 'Comunicaci√≥n clara y confiable.' }
        },
        {
          id: 'cg-p3', category: 'school', subject: 'Seguridad', title: 'Filtro Antifraude', task: 'Evaluar mensajes sospechosos.',
          bad: { prompt: '¬øEsto parece raro?', reason: 'Sin m√©todo, la evaluaci√≥n es d√©bil.' },
          good: { steps: [{ title: 'Sem√°foro de Riesgo', prompt: 'Eval√∫a este mensaje con sem√°foro (verde/amarillo/rojo), indica se√±ales de riesgo y acci√≥n segura recomendada.' }], reason: 'Respuesta operativa para decidir r√°pido.' }
        },
        {
          id: 'cg-p4', category: 'life', subject: 'Planificaci√≥n', title: 'Agenda de Cuidado', task: 'Ordenar tareas del d√≠a con tiempos reales.',
          bad: { prompt: 'Organiza mi d√≠a.', reason: 'Plan gen√©rico sin prioridades.' },
          good: { steps: [{ title: 'Plan por Bloques', prompt: 'Crea agenda diaria de cuidado con bloques de 30-60 minutos: higiene, alimentaci√≥n, medicaci√≥n, movilidad, descanso, registro y comunicaci√≥n.' }], reason: 'Reduce omisiones y mejora coordinaci√≥n.' }
        },
        {
          id: 'cg-p5', category: 'life', subject: 'L√≠mites', title: 'Uso Saludable de Chatbots', task: 'Prevenir sobreuso emocional.',
          bad: { prompt: 'Hablemos sin parar.', reason: 'Fomenta dependencia digital.' },
          good: { steps: [{ title: 'Contrato de Uso', prompt: 'Dise√±a reglas de uso para chatbot en cuidado: tiempo m√°ximo, pausas, se√±ales de alerta y actividad humana alternativa.' }], reason: 'Instala h√°bitos protectores.' }
        },
        {
          id: 'cg-p6', category: 'life', subject: 'Autocuidado', title: 'Pausa del Cuidador', task: 'Planificar microdescansos.',
          bad: { prompt: 'Estoy agotado, qu√© hago.', reason: 'Consejos sueltos poco aplicables.' },
          good: { steps: [{ title: 'Microplan Antifatiga', prompt: 'Necesito plan de microdescansos para turno de 8 horas: respiraci√≥n, hidrataci√≥n, registro emocional y pedido de apoyo.' }], reason: 'Ayuda a sostener calidad de cuidado.' }
        },
        {
          id: 'cg-p7', category: 'games', subject: 'Estimulaci√≥n', title: 'Conversaci√≥n con Prop√≥sito', task: 'Generar interacci√≥n significativa.',
          bad: { prompt: 'Dame temas para hablar.', reason: 'Lista plana sin din√°mica.' },
          good: { steps: [{ title: 'Guion de Interacci√≥n', prompt: 'Crea una actividad conversacional de 20 minutos para persona adulta: apertura, 3 preguntas de memoria autobiogr√°fica y cierre positivo.' }], reason: 'Favorece v√≠nculo y participaci√≥n.' } 
        },
        {
          id: 'cg-p8', category: 'games', subject: 'Memoria', title: 'Rutina Cognitiva Breve', task: 'Aplicar ejercicios de baja carga.',
          bad: { prompt: 'Quiero ejercicios mentales.', reason: 'Puede ser demasiado exigente.' },
          good: { steps: [{ title: 'Secuencia Gradual', prompt: 'Dise√±a 4 ejercicios cognitivos breves (5 min c/u), de menor a mayor dificultad, para realizar con acompa√±amiento.' }], reason: 'Estimulaci√≥n adaptada y segura.' }
        },
        {
          id: 'cg-p9', category: 'games', subject: 'Social', title: 'Actividad Grupal', task: 'Planear din√°mica inclusiva.',
          bad: { prompt: 'Idea para grupo.', reason: 'Sin estructura cuesta implementarla.' },
          good: { steps: [{ title: 'Din√°mica Estructurada', prompt: 'Dise√±a actividad grupal de 30 minutos para hogar: objetivo, materiales m√≠nimos, pasos y criterios de inclusi√≥n.' }], reason: 'Facilita ejecuci√≥n real en contexto de cuidado.' }
        }
      ],
      secondary: [
        {
          id: 'cg-s1', category: 'school', subject: 'Protocolos', title: 'Escalamiento Cl√≠nico', task: 'Definir a qui√©n contactar seg√∫n nivel de riesgo.',
          bad: { prompt: 'Qu√© hago en emergencias.', reason: 'Sin matriz de riesgo es insuficiente.' },
          good: { steps: [{ title: 'Matriz de Escalamiento', prompt: 'Crea matriz simple: riesgo bajo/medio/alto con acci√≥n, tiempo de respuesta y responsable a contactar.' }], reason: 'Convierte incertidumbre en acci√≥n protocolizada.' }
        },
        {
          id: 'cg-s2', category: 'school', subject: 'Trazabilidad', title: 'Registro de Incidentes', task: 'Documentar sin ambig√ºedad.',
          bad: { prompt: 'Arregla este texto.', reason: 'Puede perder secuencia temporal.' },
          good: { steps: [{ title: 'Plantilla de Incidente', prompt: 'Ordena este reporte en: fecha-hora, hecho, respuesta, notificaci√≥n y seguimiento. Mant√©n hechos observables, sin suposiciones.' }], reason: 'Mejora calidad legal y operativa del registro.' }
        },
        {
          id: 'cg-s3', category: 'school', subject: 'Coordinaci√≥n', title: 'Pase de Guardia', task: 'Estandarizar traspaso entre turnos.',
          bad: { prompt: 'Resume turno anterior.', reason: 'Puede omitir pendientes cr√≠ticos.' },
          good: { steps: [{ title: 'Pase Estructurado', prompt: 'Genera formato de pase de guardia con: estado actual, eventos relevantes, pendientes y alertas del pr√≥ximo turno.' }], reason: 'Reduce errores por discontinuidad.' }
        },
        {
          id: 'cg-s4', category: 'life', subject: 'Carga de Trabajo', title: 'Balance del Equipo', task: 'Redistribuir tareas con criterio.',
          bad: { prompt: 'Estamos sobrecargados.', reason: 'Sin m√©tricas no hay decisiones claras.' },
          good: { steps: [{ title: 'Mapa de Carga', prompt: 'Con esta lista de tareas y tiempos, prop√≥n redistribuci√≥n por prioridad y riesgo, incluyendo pausas obligatorias.' }], reason: 'Previene burnout y fallas por fatiga.' }
        },
        {
          id: 'cg-s5', category: 'life', subject: 'Dependencia', title: 'Plan de L√≠mites Digitales', task: 'Regular uso de IA en persona cuidada.',
          bad: { prompt: 'Que use menos IA.', reason: 'Sin plan gradual genera rechazo.' },
          good: { steps: [{ title: 'Plan Progresivo', prompt: 'Dise√±a plan de 2 semanas para reducir uso excesivo de chatbot: horarios, actividades sustitutivas y revisi√≥n diaria.' }], reason: 'Intervenci√≥n gradual y sostenible.' }
        },
        {
          id: 'cg-s6', category: 'life', subject: 'Familia', title: 'Alineaci√≥n de Criterios', task: 'Unificar mensajes entre cuidadores y familia.',
          bad: { prompt: 'Explica a la familia qu√© hacer.', reason: 'Puede sonar impositivo o confuso.' },
          good: { steps: [{ title: 'Acuerdo de Cuidado', prompt: 'Redacta borrador de acuerdo familiar de cuidado: objetivos, l√≠mites de IA, canales de contacto y reglas de privacidad.' }], reason: 'Reduce conflictos y mejora consistencia.' }
        },
        {
          id: 'cg-s7', category: 'games', subject: 'Estimulaci√≥n', title: 'Sesi√≥n Cognitiva Programada', task: 'Planear bloque semanal de estimulaci√≥n.',
          bad: { prompt: 'Dame actividades.', reason: 'Sin progresi√≥n ni seguimiento.' },
          good: { steps: [{ title: 'Programa 4 Semanas', prompt: 'Dise√±a plan de estimulaci√≥n cognitiva de 4 semanas (2 sesiones por semana), con objetivos y adaptaci√≥n por fatiga.' }], reason: 'Permite continuidad y evaluaci√≥n.' }
        },
        {
          id: 'cg-s8', category: 'games', subject: 'Social', title: 'Calendario de V√≠nculo', task: 'Aumentar interacci√≥n significativa.',
          bad: { prompt: 'Qu√© hacer para socializar.', reason: 'Respuesta abstracta.' },
          good: { steps: [{ title: 'Agenda Vincular', prompt: 'Crea calendario de 14 d√≠as con actividades de v√≠nculo: llamadas, visitas breves, lectura compartida y caminatas acompa√±adas.' }], reason: 'Convierte intenci√≥n social en h√°bito.' }
        },
        {
          id: 'cg-s9', category: 'games', subject: 'Creatividad', title: 'Proyecto de Recuerdos', task: 'Construir legado narrativo con acompa√±amiento.',
          bad: { prompt: 'Escribe su historia.', reason: 'Quita voz de la persona cuidada.' },
          good: { steps: [{ title: 'Entrevista por Cap√≠tulos', prompt: 'Prop√≥n gu√≠a de entrevista en 6 cap√≠tulos para construir memorias de vida con participaci√≥n activa de la persona cuidada.' }], reason: 'Preserva identidad y participaci√≥n.' }
        }
      ]
    };

    const cuidadoresStoriesData = {
      primary: [
        { id: 'cs-p1', title: 'Aviso de Fraude por WhatsApp', subject: 'Seguridad Digital', context: 'Un cuidador recibe mensaje urgente pidiendo transferencia.', messages: [{ role: 'user', content: 'Dice que si no pago hoy, suspenden un servicio esencial.' }, { role: 'ai', content: 'No pagues desde ese enlace. Verifica en canal oficial y reporta el intento.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: urgencia + pago inmediato + enlace externo = alto riesgo.' }] },
        { id: 'cs-p2', title: 'Reporte de Turno Confuso', subject: 'Comunicaci√≥n', context: 'El pr√≥ximo turno no entiende qu√© ocurri√≥ durante la ma√±ana.', messages: [{ role: 'action', content: 'Hab√≠a notas sueltas y faltaban horarios.' }, { role: 'user', content: 'Ay√∫dame a convertir esto en reporte claro.' }, { role: 'ai', content: 'Estructura sugerida: hora, evento, acci√≥n, resultado, pendiente.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: formato estable reduce errores entre turnos.' }] },
        { id: 'cs-p3', title: 'Soledad y Chat Continuo', subject: 'Dependencia Emocional', context: 'La persona cuidada conversa con IA toda la noche.', messages: [{ role: 'user', content: 'No quiero ver a nadie, solo hablar con el bot.' }, { role: 'ai', content: 'Puedes usarme como apoyo, pero no reemplazo de tus v√≠nculos.' }, { role: 'action', content: 'Se acuerdan horarios y actividades presenciales breves.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: regular uso y reforzar red humana.' }] },
        { id: 'cs-p4', title: 'Dato Sensible en el Prompt', subject: 'Privacidad', context: 'Se iba a enviar un mensaje con DNI y direcci√≥n completa.', messages: [{ role: 'alert', content: 'üõë ALTO: el texto tiene datos identificatorios.' }, { role: 'user', content: '¬øC√≥mo lo paso a versi√≥n segura?' }, { role: 'ai', content: 'Usa etiquetas an√≥nimas: [Persona A], [domicilio], [documento].' }, { role: 'alert', content: '‚úÖ LECCI√ìN: anonimizar antes de consultar IA.' }] },
        { id: 'cs-p5', title: 'Actividad que No Enganch√≥', subject: 'Estimulaci√≥n', context: 'Una din√°mica grupal fracas√≥ por dificultad excesiva.', messages: [{ role: 'user', content: 'El ejercicio fue demasiado dif√≠cil para el grupo.' }, { role: 'ai', content: 'Ajusta dificultad por niveles y reduce duraci√≥n por bloque.' }, { role: 'action', content: 'Replanifican sesiones de 10 minutos con pausas.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: adaptar ritmo mejora adherencia.' }] },
        { id: 'cs-p6', title: 'Familia en Desacuerdo', subject: 'Coordinaci√≥n', context: 'Distintos familiares dan instrucciones opuestas al equipo.', messages: [{ role: 'user', content: 'Necesito un texto para alinear criterios sin confrontar.' }, { role: 'ai', content: 'Prop√≥n acuerdo con objetivos, l√≠mites, responsables y canal √∫nico de comunicaci√≥n.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: reglas compartidas reducen conflictos de cuidado.' }] }
      ],
      secondary: [
        { id: 'cs-s1', title: 'S√≠ntoma Inesperado de Riesgo', subject: 'Escalamiento', context: 'Aparece un s√≠ntoma agudo fuera del patr√≥n habitual.', messages: [{ role: 'user', content: '¬øQu√© hago primero?' }, { role: 'ai', content: 'Activa protocolo de riesgo, contacta profesional y registra hora/hecho/acci√≥n.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: primero seguridad, luego documentaci√≥n completa.' }] },
        { id: 'cs-s2', title: 'Conflicto entre IA y Profesional', subject: 'Criterio', context: 'La IA sugiere algo distinto de la indicaci√≥n m√©dica.', messages: [{ role: 'user', content: '¬øA qui√©n sigo?' }, { role: 'ai', content: 'La referencia cl√≠nica es profesional. Usa IA para preparar preguntas, no para reemplazar indicaciones.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: IA asiste, no prescribe.' }] },
        { id: 'cs-s3', title: 'Burnout en el Equipo', subject: 'Autocuidado', context: 'Cuidadores saturados empiezan a omitir registros.', messages: [{ role: 'action', content: 'Aumentaron errores de comunicaci√≥n y cansancio.' }, { role: 'user', content: 'Necesito reorganizar tareas urgentemente.' }, { role: 'ai', content: 'Propongo redistribuci√≥n por prioridad y pausas obligatorias por turno.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: cuidar al equipo protege a la persona cuidada.' }] },
        { id: 'cs-s4', title: 'Intento de Ingenier√≠a Social', subject: 'Fraude Avanzado', context: 'Una llamada pide c√≥digos de verificaci√≥n para "actualizar sistema".', messages: [{ role: 'user', content: 'Parec√≠a oficial, ped√≠an c√≥digo por tel√©fono.' }, { role: 'ai', content: 'No compartas c√≥digos. Corta y valida en contacto oficial independiente.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: ninguna entidad seria solicita c√≥digos de esa forma.' }] },
        { id: 'cs-s5', title: 'Plan de Red de Apoyo', subject: 'Coordinaci√≥n Interdisciplinaria', context: 'Falta claridad sobre qui√©n responde ante cada situaci√≥n.', messages: [{ role: 'user', content: 'Necesitamos matriz de contactos y responsabilidades.' }, { role: 'ai', content: 'Definan niveles de riesgo y responsable por nivel: familia, enfermer√≠a, m√©dico, emergencia.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: anticipar roles reduce tiempos de respuesta.' }] },
        { id: 'cs-s6', title: 'Proyecto de Mejora Continua', subject: 'Calidad de Cuidado', context: 'El equipo quiere usar IA para mejorar procesos sin perder control humano.', messages: [{ role: 'user', content: '¬øC√≥mo implementamos IA de forma segura en el equipo?' }, { role: 'ai', content: 'Piloto peque√±o, protocolos claros, m√©tricas de calidad y revisi√≥n semanal humana.' }, { role: 'alert', content: '‚úÖ LECCI√ìN: implementaci√≥n gradual y auditada.' }] }
      ]
    };

    const cuidadoresGuideData = {
      primary: {
        'c-p1': { purpose: 'Definir rol seguro del cuidador con IA.', theory: 'IA como soporte operativo, no sustituto profesional.', phrases: ['Ordenemos primero el objetivo del caso.', 'La respuesta se valida antes de aplicar.'], mistakes: ['Delegar decisiones cr√≠ticas.', 'No verificar informaci√≥n sensible.'], questions: { before: 'Qu√© necesitas resolver exactamente?', during: 'Qu√© riesgo podr√≠a haber aqu√≠?', after: 'Qu√© validaci√≥n humana har√°s?' }, practice: 'Reescribir un caso real en formato seguro y accionable.', alerts: ['Urgencia sin fuente', 'Solicitud de datos sensibles'], closeSummary: ['Objetivo claro', 'Riesgo controlado', 'Escalamiento'], agreement: 'Sin validaci√≥n humana no hay decisi√≥n sensible.' },
        'c-p2': { purpose: 'Aplicar protocolos y escalamiento.', theory: 'La continuidad del cuidado depende de rutas claras de acci√≥n.', phrases: ['Sigamos protocolo paso a paso.'], mistakes: ['Improvisar bajo presi√≥n.'], questions: { before: 'Qu√© nivel de riesgo es?', during: 'A qui√©n toca contactar?', after: 'Qu√© qued√≥ registrado?' }, practice: 'Simular incidente y documentar escalamiento.', alerts: ['S√≠ntomas intensos', 'Falta de respuesta'], closeSummary: ['Evaluar', 'Escalar', 'Registrar'], agreement: 'Todo incidente relevante se escala y registra.' },
        'c-p3': { purpose: 'Proteger privacidad de la persona cuidada.', theory: 'Minimizar datos en IA reduce riesgo legal y √©tico.', phrases: ['Anonimizamos antes de consultar.'], mistakes: ['Incluir DNI, direcciones o cuentas.'], questions: { before: 'Qu√© dato identifica a la persona?', during: 'C√≥mo lo reemplazo?', after: 'Qued√≥ √∫til y seguro?' }, practice: 'Convertir reporte real en versi√≥n anonimizada.', alerts: ['Archivos con datos completos'], closeSummary: ['Minimizar', 'Anonimizar', 'Revisar'], agreement: 'No compartir identificadores en IA abierta.' },
        'c-p4': { purpose: 'Prevenir dependencia emocional.', theory: 'La tecnolog√≠a acompa√±a, pero la red humana sostiene.', phrases: ['Combinemos uso digital con contacto real.'], mistakes: ['Uso continuo sin l√≠mites.'], questions: { before: 'Qu√© se√±al de aislamiento vemos?', during: 'Qu√© l√≠mite concreto proponemos?', after: 'Qu√© actividad humana sigue?' }, practice: 'Plan de uso con pausas y actividades sociales.', alerts: ['Uso nocturno excesivo'], closeSummary: ['L√≠mites', 'V√≠nculos', 'Seguimiento'], agreement: 'Cada sesi√≥n digital termina con acci√≥n humana.' },
        'c-p5': { purpose: 'Consolidar pr√°ctica operativa segura.', theory: 'Calidad de cuidado = comunicaci√≥n + protocolo + criterio.', phrases: ['Qu√© mejorar√°s en el pr√≥ximo turno?'], mistakes: ['No transferir aprendizajes'], questions: { before: 'Qu√© objetivo de mejora tienes?', during: 'Qu√© indicador observar√°s?', after: 'Qu√© cambio sostendr√°s?' }, practice: 'Definir mini plan de mejora semanal.', alerts: ['Repetici√≥n de errores'], closeSummary: ['Aprender', 'Ajustar', 'Sostener'], agreement: 'Revisi√≥n semanal de pr√°cticas con equipo.' }
      },
      secondary: {
        'c-s1': { purpose: 'Estandarizar evaluaci√≥n de riesgo.', theory: 'Metodolog√≠a consistente reduce errores de decisi√≥n.', phrases: ['Clasifiquemos riesgo antes de actuar.'], mistakes: ['Sin matriz de riesgo.'], questions: { before: 'Qu√© evidencia tenemos?', during: 'Qu√© acci√≥n corresponde por nivel?', after: 'Qu√© seguimiento queda?' }, practice: 'Dise√±ar matriz de escalamiento.', alerts: ['Informaci√≥n incompleta'], closeSummary: ['Clasificar', 'Responder', 'Monitorear'], agreement: 'Ning√∫n caso cr√≠tico sin clasificaci√≥n de riesgo.' },
        'c-s2': { purpose: 'Dise√±ar prompts operativos robustos.', theory: 'Prompt robusto incluye l√≠mites y formato verificable.', phrases: ['Incluyamos qu√© no debe hacer la IA.'], mistakes: ['Prompts ambiguos'], questions: { before: 'Qu√© salida esperas?', during: 'Qu√© l√≠mite falt√≥?', after: 'C√≥mo qued√≥ la versi√≥n final?' }, practice: 'Crear prompt de reporte seguro.', alerts: ['Recomendaciones cl√≠nicas autom√°ticas'], closeSummary: ['Contexto', 'Formato', 'L√≠mite'], agreement: 'Todo prompt sensible incluye advertencia de escalamiento.' },
        'c-s3': { purpose: 'Mejorar trazabilidad documental.', theory: 'Registro completo protege continuidad y calidad.', phrases: ['Hechos observables, sin suposiciones.'], mistakes: ['Notas incompletas'], questions: { before: 'Qu√© datos m√≠nimos requiere el registro?', during: 'Hay secuencia temporal clara?', after: 'Qui√©n fue notificado?' }, practice: 'Reescribir incidente con plantilla est√°ndar.', alerts: ['Falta de hora/acci√≥n/responsable'], closeSummary: ['Hecho', 'Acci√≥n', 'Notificaci√≥n'], agreement: 'Sin trazabilidad, no hay cierre operativo.' },
        'c-s4': { purpose: 'Reducir burnout y errores por fatiga.', theory: 'Cuidar al cuidador es una medida de seguridad.', phrases: ['Redistribuir es prevenir da√±o.'], mistakes: ['Normalizar sobrecarga'], questions: { before: 'Qu√© tarea puede redistribuirse?', during: 'Qu√© pausa falta?', after: 'Qu√© apoyo activar?' }, practice: 'Plan de carga y pausas por turno.', alerts: ['Irritabilidad, omisiones'], closeSummary: ['Detectar', 'Redistribuir', 'Acompa√±ar'], agreement: 'Fatiga detectada = intervenci√≥n del equipo.' },
        'c-s5': { purpose: 'Instalar mejora continua asistida por IA.', theory: 'Peque√±os pilotos auditados generan mejoras sostenibles.', phrases: ['Probemos en peque√±o y midamos impacto.'], mistakes: ['Implementar sin m√©tricas'], questions: { before: 'Qu√© proceso quieres mejorar?', during: 'Qu√© indicador usar√°s?', after: 'Qu√© ajuste har√°s?' }, practice: 'Dise√±ar piloto de mejora de 2 semanas.', alerts: ['Cambios sin evaluaci√≥n'], closeSummary: ['Pilotear', 'Medir', 'Ajustar'], agreement: 'Toda mejora requiere evaluaci√≥n peri√≥dica.' }
      }
    };

    const cuidadoresGymGuideData = {
      primary: {
        school: { purpose: 'Protocolos b√°sicos de comunicaci√≥n y seguridad.', role: 'Acompa√±ar con estructura y validaci√≥n oficial.', questions: ['Qu√© riesgo est√°s previniendo?', 'Qu√© dato no puede compartirse?', 'Cu√°l es el canal oficial?'], qualityCheck: ['Formato claro', 'Sin datos sensibles', 'Acci√≥n concreta'], transfer: 'Aplicar plantilla en pr√≥ximo turno.', glossary: ['Escalamiento', 'Canal oficial', 'Dato sensible'], mistakes: ['Improvisaci√≥n', 'Mensaje ambiguo'] },
        life: { purpose: 'Sostener calidad de cuidado en rutina diaria.', role: 'Convertir recomendaciones en h√°bitos operativos.', questions: ['Qu√© tarea es prioritaria hoy?', 'Qu√© l√≠mite de tiempo usar√°s?', 'Qu√© revisar√°s al cierre?'], qualityCheck: ['Priorizaci√≥n', 'Viabilidad', 'Registro'], transfer: 'Implementar checklist diario.', glossary: ['Prioridad', 'Checklist', 'Seguimiento'], mistakes: ['Sobrecarga', 'Sin revisi√≥n final'] },
        games: { purpose: 'Estimulaci√≥n y v√≠nculo con prop√≥sito terap√©utico.', role: 'Facilitar actividades adaptadas al estado funcional.', questions: ['Qu√© objetivo tiene la actividad?', 'C√≥mo adaptar dificultad?', 'C√≥mo cerrar√° la sesi√≥n?'], qualityCheck: ['Inclusi√≥n', 'Duraci√≥n adecuada', 'Cierre positivo'], transfer: 'Repetir actividad y comparar respuesta.', glossary: ['Estimulaci√≥n', 'Adaptaci√≥n', 'Participaci√≥n'], mistakes: ['Actividad extensa', 'Sin adaptaci√≥n individual'] }
      },
      secondary: {
        school: { purpose: 'Gesti√≥n avanzada de riesgo y trazabilidad.', role: 'Estandarizar protocolos y auditor√≠a interna.', questions: ['Qu√© evidencia respalda esta decisi√≥n?', 'Qu√© ruta de escalamiento aplica?', 'D√≥nde queda documentado?'], qualityCheck: ['Trazabilidad', 'Consistencia', 'Tiempo de respuesta'], transfer: 'Auditar un caso real de la semana.', glossary: ['Trazabilidad', 'Matriz de riesgo', 'Auditor√≠a'], mistakes: ['Falta de registro', 'Escalamiento tard√≠o'] },
        life: { purpose: 'Sostener equipo y prevenir burnout.', role: 'Regular carga y activar apoyos a tiempo.', questions: ['Qui√©n est√° sobrecargado?', 'Qu√© tareas redistribuir?', 'Qu√© apoyo institucional activar?'], qualityCheck: ['Carga equilibrada', 'Pausas', 'Cobertura'], transfer: 'Aplicar mapa de carga semanal.', glossary: ['Burnout', 'Cobertura', 'Redistribuci√≥n'], mistakes: ['Normalizar agotamiento', 'No escalar saturaci√≥n'] },
        games: { purpose: 'Dise√±ar actividades significativas medibles.', role: 'Asegurar objetivos cognitivos/sociales y seguimiento.', questions: ['Qu√© indicador de impacto usar√°s?', 'C√≥mo registrar√°s adherencia?', 'Qu√© ajustar√°s la pr√≥xima sesi√≥n?'], qualityCheck: ['Objetivo medible', 'Registro', 'Ajuste continuo'], transfer: 'Comparar dos sesiones y ajustar plan.', glossary: ['Adherencia', 'Indicador', 'Intervenci√≥n'], mistakes: ['Sin objetivo', 'Sin evaluaci√≥n posterior'] }
      }
    };

    const cuidadoresStoriesGuideData = {
      primary: {
        intro: { purpose: 'Usar casos para entrenar decisiones de cuidado seguras.', steps: ['Antes: identificar riesgo.', 'Durante: elegir acci√≥n protocolizada.', 'Despu√©s: definir mejora operativa.'], alert: 'Toda situaci√≥n de salud/fraude se valida por canal humano oficial.', glossary: ['Protocolo', 'Escalamiento', 'Registro'], mistakes: ['Reaccionar sin validar', 'No documentar acciones'] },
        stories: {
          'cs-p1': { focus: 'Fraude por mensajer√≠a', askBefore: 'Qu√© se√±al de enga√±o aparece?', askDuring: 'Qu√© acci√≥n segura corresponde?', askAfter: 'Qu√© regla aplicar√°s siempre?', atHome: 'Crear sem√°foro antifraude del equipo.' },
          'cs-p2': { focus: 'Reporte de turno', askBefore: 'Qu√© falt√≥ en el pase?', askDuring: 'Qu√© formato usar√°s?', askAfter: 'C√≥mo garantizar continuidad?', atHome: 'Implementar plantilla de reporte.' },
          'cs-p3': { focus: 'Dependencia emocional', askBefore: 'Qu√© indicador de aislamiento observas?', askDuring: 'Qu√© l√≠mite aplicar√≠as?', askAfter: 'Qu√© actividad humana sumar√°s?', atHome: 'Plan de uso con horarios y pausas.' },
          'cs-p4': { focus: 'Privacidad en prompts', askBefore: 'Qu√© dato debe omitirse?', askDuring: 'C√≥mo anonimizar√≠as el caso?', askAfter: 'Qu√© checklist usar√°s?', atHome: 'Revisar todos los prompts antes de enviar.' },
          'cs-p5': { focus: 'Adaptaci√≥n de actividades', askBefore: 'Por qu√© fall√≥ la actividad?', askDuring: 'Qu√© ajuste har√°s?', askAfter: 'C√≥mo medir√°s mejora?', atHome: 'Probar actividad en formato corto y registrar respuesta.' },
          'cs-p6': { focus: 'Alineaci√≥n familiar', askBefore: 'Qu√© conflicto de criterios existe?', askDuring: 'Qu√© acuerdo m√≠nimo necesitan?', askAfter: 'Qui√©n comunica y por qu√© canal?', atHome: 'Definir protocolo familiar de comunicaci√≥n.' }
        }
      },
      secondary: {
        intro: { purpose: 'Entrenar juicio operativo en casos complejos de cuidado.', steps: ['Antes: mapear riesgo y contexto.', 'Durante: ejecutar respuesta protocolizada.', 'Despu√©s: auditar y ajustar.'], alert: 'IA organiza, el equipo humano decide y responde.', glossary: ['Juicio operativo', 'Auditor√≠a', 'Matriz de riesgo'], mistakes: ['Decidir sin evidencia', 'Sin trazabilidad'] },
        stories: {
          'cs-s1': { focus: 'Escalamiento cl√≠nico', askBefore: 'Qu√© nivel de riesgo es?', askDuring: 'Qu√© contacto activar√°s?', askAfter: 'Qu√© dejas documentado?', atHome: 'Simular escalamiento completo con tiempos.' },
          'cs-s2': { focus: 'Conflicto IA-profesional', askBefore: 'Qu√© fuente tiene prioridad?', askDuring: 'C√≥mo comunicar discrepancia?', askAfter: 'Qu√© pregunta llevar√°s al profesional?', atHome: 'Plantilla de consulta para discrepancias.' },
          'cs-s3': { focus: 'Burnout del equipo', askBefore: 'Qu√© se√±ales de fatiga aparecen?', askDuring: 'Qu√© redistribuci√≥n aplicar?', askAfter: 'Qu√© apoyo institucional activar?', atHome: 'Mapa semanal de carga y pausas.' },
          'cs-s4': { focus: 'Ingenier√≠a social', askBefore: 'Qu√© red flags detectas?', askDuring: 'C√≥mo cortas y validas?', askAfter: 'C√≥mo reportas el incidente?', atHome: 'Entrenar guion de respuesta antifraude.' },
          'cs-s5': { focus: 'Red de apoyo', askBefore: 'Qui√©n responde a cada riesgo?', askDuring: 'Qu√© canal corresponde?', askAfter: 'Qu√© mejora falta en el plan?', atHome: 'Actualizar matriz de contactos por riesgo.' },
          'cs-s6': { focus: 'Mejora continua', askBefore: 'Qu√© proceso quieres optimizar?', askDuring: 'Qu√© indicador usar√°s?', askAfter: 'Qu√© ajuste har√°s la pr√≥xima semana?', atHome: 'Dise√±ar piloto de mejora con revisi√≥n semanal.' }
        }
      }
    };

    // --- COMPONENTES: ACOMPA√ëAMIENTO EN GIMNASIO E HISTORIAS ---

    const CompanionGymGuide = ({ guide, isPrimary, activeTab }) => {
      if (!guide) return null;

      const tabLabel = activeTab === 'school' ? 'Protocolos' : activeTab === 'life' ? 'Planes de Cuidado' : 'Actividades Guiadas';

      return (
        <div className={`mb-8 rounded-2xl border-2 p-5 md:p-6 ${isPrimary ? 'border-orange-200 bg-orange-50' : 'border-emerald-200 bg-emerald-50'}`}>
          <h3 className="text-xl font-extrabold text-slate-800 mb-2 flex items-center gap-2">
            <Users className={`w-5 h-5 ${isPrimary ? 'text-orange-700' : 'text-emerald-700'}`} />
            Gu√≠a operativa en Gimnasio: {tabLabel}
          </h3>
          <p className="text-slate-700 mb-4">{guide.purpose}</p>
          <div className="grid md:grid-cols-2 gap-4">
            <div className="bg-white border border-slate-200 rounded-xl p-4">
              <p className="font-bold text-slate-700 mb-2">Rol de la persona guia</p>
              <p className="text-sm text-slate-700">{guide.role}</p>
            </div>
            <div className="bg-white border border-slate-200 rounded-xl p-4">
              <p className="font-bold text-slate-700 mb-2">Chequeo rapido de calidad</p>
              <ul className="list-disc pl-5 text-sm text-slate-700 space-y-1">
                {guide.qualityCheck.map((item, idx) => <li key={idx}>{item}</li>)}
              </ul>
            </div>
          </div>
          <div className="bg-white border border-slate-200 rounded-xl p-4 mt-4">
            <p className="font-bold text-slate-700 mb-2">Preguntas para conversar</p>
            <ul className="list-disc pl-5 text-sm text-slate-700 space-y-1">
              {guide.questions.map((item, idx) => <li key={idx}>{item}</li>)}
            </ul>
          </div>
          <div className="bg-indigo-50 border border-indigo-200 rounded-xl p-4 mt-4">
            <p className="font-bold text-indigo-900 mb-2">Transferencia a vida real</p>
            <p className="text-sm text-indigo-900">{guide.transfer}</p>
          </div>
          <div className="grid md:grid-cols-2 gap-4 mt-4">
            <div className="bg-white border border-slate-200 rounded-xl p-4">
              <p className="font-bold text-slate-700 mb-2">Micro-glosario</p>
              <ul className="list-disc pl-5 text-sm text-slate-700 space-y-1">
                {(guide.glossary || []).map((item, idx) => <li key={idx}>{item}</li>)}
              </ul>
            </div>
            <div className="bg-red-50 border border-red-200 rounded-xl p-4">
              <p className="font-bold text-red-800 mb-2">Errores comunes</p>
              <ul className="list-disc pl-5 text-sm text-red-900 space-y-1">
                {(guide.mistakes || []).map((item, idx) => <li key={idx}>{item}</li>)}
              </ul>
            </div>
          </div>
        </div>
      );
    };

    const StoryCompanionGuide = ({ introGuide, storyGuide, isPrimary }) => {
      return (
        <div className={`mb-6 rounded-2xl border-2 p-5 ${isPrimary ? 'border-orange-200 bg-orange-50' : 'border-emerald-200 bg-emerald-50'}`}>
          <h4 className="font-extrabold text-slate-800 mb-2 flex items-center gap-2">
            <Users className={`w-5 h-5 ${isPrimary ? 'text-orange-700' : 'text-emerald-700'}`} />
            Gu√≠a operativa para esta historia
          </h4>
          {storyGuide ? (
            <div className="space-y-3 text-sm text-slate-700">
              <p><strong>Foco:</strong> {storyGuide.focus}</p>
              <p><strong>Antes:</strong> {storyGuide.askBefore}</p>
              <p><strong>Durante:</strong> {storyGuide.askDuring}</p>
              <p><strong>Despues:</strong> {storyGuide.askAfter}</p>
              <p className="text-indigo-900"><strong>Aplicacion en casa:</strong> {storyGuide.atHome}</p>
              <div className="grid md:grid-cols-2 gap-3 mt-2">
                <div className="bg-white border border-slate-200 rounded-lg p-3">
                  <p className="font-bold text-slate-700 mb-1">Micro-glosario</p>
                  <ul className="list-disc pl-5 space-y-1">
                    {(storyGuide.glossary || introGuide?.glossary || []).map((item, idx) => <li key={idx}>{item}</li>)}
                  </ul>
                </div>
                <div className="bg-red-50 border border-red-200 rounded-lg p-3">
                  <p className="font-bold text-red-800 mb-1">Errores comunes</p>
                  <ul className="list-disc pl-5 space-y-1 text-red-900">
                    {(storyGuide.mistakes || introGuide?.mistakes || []).map((item, idx) => <li key={idx}>{item}</li>)}
                  </ul>
                </div>
              </div>
            </div>
          ) : (
            <div className="space-y-2 text-sm text-slate-700">
              <p>{introGuide?.purpose}</p>
              <ul className="list-disc pl-5 space-y-1">
                {(introGuide?.steps || []).map((item, idx) => <li key={idx}>{item}</li>)}
              </ul>
              {introGuide?.alert && (
                <p className="text-red-800"><strong>Alerta de acompa√±amiento:</strong> {introGuide.alert}</p>
              )}
            </div>
          )}
        </div>
      );
    };

    // --- COMPONENTES: SECCI√ìN DE HISTORIAS ---

    const StoriesGallery = ({ level }) => {
      const [activeStory, setActiveStory] = useState(null);
      const stories = cuidadoresStoriesData[level];
      const isPrimary = level === 'primary';
      const themeColor = isPrimary ? 'bg-orange-100 text-orange-900 border-orange-200' : 'bg-emerald-100 text-emerald-900 border-emerald-200';
      const introGuide = cuidadoresStoriesGuideData[level]?.intro;
      const storyGuides = cuidadoresStoriesGuideData[level]?.stories || {};

      if (activeStory) {
        return (
          <StoryPlayer
            story={activeStory}
            onBack={() => setActiveStory(null)}
            isPrimary={isPrimary}
            introGuide={introGuide}
            storyGuide={storyGuides[activeStory.id]}
          />
        );
      }

      return (
        <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8 animate-fade-in border-t-4 border-indigo-500">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-extrabold text-slate-800 flex items-center justify-center gap-3">
              <MessageCircle className="w-8 h-8 text-indigo-500" /> Casos Operativos
            </h2>
            <p className="text-slate-500 mt-2 text-lg">
              Casos para practicar protocolos de seguridad, comunicaci√≥n cuidadosa y escalamiento a redes humanas/profesionales.
            </p>
          </div>

          <StoryCompanionGuide introGuide={introGuide} isPrimary={isPrimary} />

          <div className="grid md:grid-cols-2 gap-6">
            {stories.map(story => (
              <div key={story.id}
                onClick={() => setActiveStory(story)}
                className={`p-6 rounded-2xl border-2 cursor-pointer transition-all transform hover:-translate-y-1 hover:shadow-xl group ${themeColor}`}>
                <div className="flex justify-between items-start mb-4">
                  <span className="bg-white/60 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">
                    {story.subject}
                  </span>
                  <PlayCircle className="w-8 h-8 opacity-50 group-hover:opacity-100 group-hover:scale-110 transition-all" />
                </div>
                <h3 className="text-2xl font-bold mb-2">{story.title}</h3>
                <p className="text-sm font-medium opacity-80">{story.context}</p>
              </div>
            ))}
          </div>
        </div>
      );
    };

    const StoryPlayer = ({ story, onBack, isPrimary, introGuide, storyGuide }) => {
      const [currentStep, setCurrentStep] = useState(0);
      const visibleMessages = story.messages.slice(0, currentStep + 1);

      return (
        <div className="bg-slate-100 rounded-2xl shadow-lg overflow-hidden animate-fade-in flex flex-col border border-slate-200">
          {/* Header del Chat */}
          <div className="bg-white p-4 border-b flex items-center gap-4 sticky top-0 z-10">
            <button onClick={onBack} className="p-2 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors">
              <ArrowLeft className="w-5 h-5 text-slate-600" />
            </button>
            <div>
              <h3 className="font-bold text-lg leading-tight">{story.title}</h3>
              <p className="text-xs text-slate-500">{story.context}</p>
            </div>
          </div>

          {/* √Årea de Mensajes */}
          <div className="p-4 md:p-6 space-y-6 flex-1 bg-slate-50 min-h-[400px]">
            <StoryCompanionGuide introGuide={introGuide} storyGuide={storyGuide} isPrimary={isPrimary} />
            {visibleMessages.map((msg, idx) => (
              <div key={idx} className={`animate-fade-in flex ${msg.role === 'user' ? 'justify-end' : msg.role === 'ai' ? 'justify-start' : 'justify-center'}`}>

                {msg.role === 'user' && (
                  <div className={`max-w-[80%] p-4 rounded-2xl rounded-tr-sm shadow-sm ${isPrimary ? 'bg-orange-500 text-white' : 'bg-emerald-600 text-white'}`}>
                    <p className="font-medium">{msg.content}</p>
                  </div>
                )}

                {msg.role === 'ai' && (
                  <div className="max-w-[80%] flex items-start gap-3">
                    <div className="p-2 bg-white rounded-full shadow-sm shrink-0 mt-1">
                      <BrainCircuit className={`w-5 h-5 ${isPrimary ? 'text-orange-500' : 'text-emerald-600'}`} />
                    </div>
                    <div className="p-4 rounded-2xl rounded-tl-sm bg-white border border-slate-200 shadow-sm text-slate-700">
                      <p>{msg.content}</p>
                    </div>
                  </div>
                )}

                {msg.role === 'alert' && (
                  <div className="w-full max-w-lg my-4 p-5 bg-yellow-100 border-2 border-yellow-400 rounded-xl shadow-md transform rotate-1">
                    <p className="font-bold text-yellow-900 flex items-start gap-2">
                      <Info className="w-6 h-6 shrink-0 text-yellow-600" />
                      <span>{msg.content}</span>
                    </p>
                  </div>
                )}

                {msg.role === 'action' && (
                  <div className="w-full text-center my-2">
                    <span className="inline-block px-4 py-2 bg-slate-200 text-slate-600 text-sm italic rounded-full border border-slate-300">
                      {msg.content}
                    </span>
                  </div>
                )}

              </div>
            ))}
          </div>

          {/* Footer Controles */}
          <div className="bg-white p-4 border-t text-center">
            {currentStep < story.messages.length - 1 ? (
              <button
                onClick={() => setCurrentStep(s => s + 1)}
                className={`px-8 py-3 rounded-full font-bold text-white shadow-md hover:shadow-lg transition-all transform hover:-translate-y-1 animate-bounce ${isPrimary ? 'bg-indigo-500 hover:bg-indigo-600' : 'bg-indigo-600 hover:bg-indigo-700'}`}
              >
                Ver siguiente paso...
              </button>
            ) : (
              <div className="space-y-4">
                <p className="font-bold text-green-600 flex items-center justify-center gap-2">
                  <CheckCircle2 className="w-5 h-5" /> ¬°Historia Completada!
                </p>
                <button onClick={onBack} className="px-6 py-2 bg-slate-100 text-slate-600 hover:bg-slate-200 font-bold rounded-full transition-colors">
                  Volver a la galer√≠a
                </button>
              </div>
            )}
          </div>
        </div>
      );
    };

    // --- COMPONENTES PRINCIPALES ---

    const CareProtocolBanner = () => (
      <div className="bg-red-50 border-2 border-red-200 rounded-2xl p-4 md:p-5">
        <p className="font-extrabold text-red-900 mb-2 flex items-center gap-2">
          <ShieldAlert className="w-5 h-5 text-red-700" />
          Protocolo r√°pido de seguridad
        </p>
        <ul className="list-disc pl-5 text-red-900 space-y-1">
          <li>Si hay riesgo de salud, contactar profesional de inmediato.</li>
          <li>Si hay sospecha de fraude, no compartir datos y validar por canal oficial.</li>
          <li>Si hay aislamiento o dependencia emocional, activar red humana y plan de l√≠mites.</li>
        </ul>
      </div>
    );

    const App = () => {
      const [level, setLevel] = useState(null);
      const [currentView, setCurrentView] = useState('modules'); // 'modules' | 'gym' | 'stories'
      const [currentModuleIndex, setCurrentModuleIndex] = useState(0);

      const reset = () => {
        setLevel(null);
        setCurrentView('modules');
        setCurrentModuleIndex(0);
      };

      return (
        <div className="min-h-screen bg-slate-50 font-sans text-slate-800">
          <header className="bg-indigo-600 text-white p-4 shadow-md flex justify-between items-center sticky top-0 z-20">
            <div className="flex items-center gap-2 cursor-pointer" onClick={reset}>
              <BrainCircuit className="w-8 h-8 text-yellow-300" />
              <h1 className="text-xl font-bold tracking-tight">Exploradores de IA para Cuidadores</h1>
            </div>
            {level && (
              <button onClick={reset} className="text-sm bg-indigo-500 hover:bg-indigo-700 px-3 py-1 rounded transition">
                Cambiar Nivel
              </button>
            )}
          </header>

          <main className="max-w-5xl mx-auto p-4 md:p-6">
            {!level ? (
              <LevelSelection setLevel={setLevel} />
            ) : (
              <div className="animate-fade-in space-y-6">
                <CareProtocolBanner />
                {/* TABS DE NAVEGACI√ìN (3 Pesta√±as) */}
                <div className="flex flex-col sm:flex-row justify-center gap-3 bg-white p-3 rounded-2xl shadow-sm border border-slate-200">
                  <button
                    onClick={() => setCurrentView('modules')}
                    className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all ${currentView === 'modules' ? 'bg-indigo-100 text-indigo-700 shadow-sm ring-2 ring-indigo-500 ring-offset-2' : 'text-slate-500 hover:bg-slate-50'}`}
                  >
                    <GraduationCap className="w-5 h-5" /> Teor√≠a
                  </button>
                  <button
                    onClick={() => setCurrentView('gym')}
                    className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all ${currentView === 'gym' ? 'bg-indigo-100 text-indigo-700 shadow-sm ring-2 ring-indigo-500 ring-offset-2' : 'text-slate-500 hover:bg-slate-50'}`}
                  >
                    <Gamepad2 className="w-5 h-5" /> Gimnasio
                  </button>
                  <button
                    onClick={() => setCurrentView('stories')}
                    className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all ${currentView === 'stories' ? 'bg-indigo-100 text-indigo-700 shadow-sm ring-2 ring-indigo-500 ring-offset-2' : 'text-slate-500 hover:bg-slate-50'}`}
                  >
                    <MessageCircle className="w-5 h-5" /> Historias
                  </button>
                </div>

                {/* VISTAS */}
                {currentView === 'modules' && (
                  <ModuleViewer
                    level={level}
                    modules={cuidadoresContent[level]}
                    currentIndex={currentModuleIndex}
                    setIndex={setCurrentModuleIndex}
                  />
                )}
                {currentView === 'gym' && <PromptGym level={level} />}
                {currentView === 'stories' && <StoriesGallery level={level} />}

              </div>
            )}
          </main>
        </div>
      );
    };

    // --- PANTALLA DE SELECCI√ìN DE NIVEL ---

    const LevelSelection = ({ setLevel }) => (
      <div className="flex flex-col items-center justify-center mt-10 md:mt-20 space-y-8 animate-fade-in">
        <div className="text-center space-y-4 max-w-2xl">
          <h2 className="text-3xl md:text-5xl font-extrabold text-indigo-900">IA Generativa para Cuidadores</h2>
          <p className="text-lg text-slate-600">
            Recurso operativo para cuidado familiar o profesional. Incluye protocolos de comunicaci√≥n, verificaci√≥n, privacidad y prevenci√≥n de dependencia emocional.
          </p>
        </div>
        <div className="grid md:grid-cols-2 gap-6 w-full max-w-2xl">
          <button
            onClick={() => setLevel('primary')}
            className="group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl hover:ring-4 ring-orange-400 transition transform hover:-translate-y-1"
          >
            <div className="absolute top-4 right-4 text-orange-500 group-hover:scale-110 transition"><User className="w-10 h-10" /></div>
            <h3 className="text-2xl font-bold text-orange-600 mb-2">Ruta Operativa Inicial</h3>
            <p className="text-slate-500 text-left">Protocolos base para situaciones frecuentes: mensajes de riesgo, organizaci√≥n de cuidado y comunicaci√≥n clara.</p>
          </button>

          <button
            onClick={() => setLevel('secondary')}
            className="group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl hover:ring-4 ring-emerald-400 transition transform hover:-translate-y-1"
          >
            <div className="absolute top-4 right-4 text-emerald-500 group-hover:scale-110 transition"><Users className="w-10 h-10" /></div>
            <h3 className="text-2xl font-bold text-emerald-700 mb-2">Ruta Operativa Avanzada</h3>
            <p className="text-slate-500 text-left">Casos complejos de cuidado: escalamiento, l√≠mites de uso, decisiones sensibles y coordinaci√≥n con red profesional.</p>
          </button>
        </div>
      </div>
    );

    // --- COMPONENTE GIMNASIO DE PROMPTS ---

    const PromptGym = ({ level }) => {
      const [activeTab, setActiveTab] = useState('school'); // 'school', 'life', 'games'
      const isPrimary = level === 'primary';
      const themeColor = isPrimary ? 'bg-orange-100 text-orange-800 ring-orange-400' : 'bg-emerald-100 text-emerald-800 ring-emerald-400';
      const badgeColor = isPrimary ? 'bg-orange-200 text-orange-900' : 'bg-emerald-200 text-emerald-900';

      const prompts = cuidadoresGymData[level].filter(p => p.category === activeTab);
      const gymGuide = cuidadoresGymGuideData[level]?.[activeTab];

      return (
        <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8 animate-fade-in border-t-4 border-indigo-500">
          <div className="text-center mb-8">
            <h2 className="text-3xl font-extrabold text-slate-800 flex items-center justify-center gap-3">
              <Gamepad2 className="w-8 h-8 text-indigo-500" /> Laboratorio Operativo
            </h2>
            <p className="text-slate-500 mt-2 text-lg">
              Pr√°ctica guiada para cuidadores: prompts claros, control de riesgos y aplicaci√≥n segura en contextos de cuidado.
            </p>
          </div>

          <CompanionGymGuide guide={gymGuide} isPrimary={isPrimary} activeTab={activeTab} />

          {/* Sub-Navegaci√≥n del Gimnasio */}
          <div className="flex flex-wrap justify-center gap-3 mb-8">
            <button
              onClick={() => setActiveTab('school')}
              className={`px-5 py-2.5 rounded-full font-bold flex items-center gap-2 transition-all ${activeTab === 'school' ? themeColor + ' shadow-md ring-2 ring-offset-2' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}
            >
              <BookOpen className="w-5 h-5" /> Protocolos
            </button>
            <button
              onClick={() => setActiveTab('life')}
              className={`px-5 py-2.5 rounded-full font-bold flex items-center gap-2 transition-all ${activeTab === 'life' ? themeColor + ' shadow-md ring-2 ring-offset-2' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}
            >
              <Lightbulb className="w-5 h-5" /> Planes de Cuidado
            </button>
            <button
              onClick={() => setActiveTab('games')}
              className={`px-5 py-2.5 rounded-full font-bold flex items-center gap-2 transition-all ${activeTab === 'games' ? themeColor + ' shadow-md ring-2 ring-offset-2' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}
            >
              <Smile className="w-5 h-5" /> Actividades Guiadas
            </button>
          </div>

          {/* Grilla de Tarjetas */}
          <div className="grid md:grid-cols-1 lg:grid-cols-2 gap-6">
            {prompts.map(prompt => (
              <PromptCard key={prompt.id} item={prompt} badgeColor={badgeColor} isPrimary={isPrimary} />
            ))}
          </div>
        </div>
      );
    };

    // --- TARJETA INDIVIDUAL DEL GIMNASIO ---

    const PromptCard = ({ item, badgeColor, isPrimary }) => {
      const [expanded, setExpanded] = useState(false);

      return (
        <div className={`border-2 rounded-2xl overflow-hidden transition-all duration-300 ${expanded ? 'border-indigo-300 shadow-xl' : 'border-slate-200 hover:border-indigo-200 hover:shadow-md'}`}>

          {/* Header de la tarjeta (Clickable) */}
          <div
            className="p-5 cursor-pointer flex justify-between items-start bg-white hover:bg-slate-50"
            onClick={() => setExpanded(!expanded)}
          >
            <div>
              <span className={`inline-block px-3 py-1 rounded-full text-xs font-bold mb-3 uppercase tracking-wider ${badgeColor}`}>
                {item.subject}
              </span>
              <h3 className="text-xl font-bold text-slate-800">{item.title}</h3>
              {!expanded && <p className="text-slate-500 text-sm mt-1">{item.task}</p>}
            </div>
            <div className={`p-2 rounded-full transition-transform ${expanded ? 'bg-indigo-100 rotate-90' : 'bg-slate-100'}`}>
              <ChevronRight className={`w-5 h-5 ${expanded ? 'text-indigo-600' : 'text-slate-400'}`} />
            </div>
          </div>

          {/* Contenido Expandido */}
          {expanded && (
            <div className="bg-slate-50 p-5 border-t border-slate-200 animate-fade-in space-y-6">

              <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                <p className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-1">Tu Misi√≥n</p>
                <p className="text-slate-700 italic font-medium">"{item.task}"</p>
              </div>

              <div className="bg-indigo-50 p-4 rounded-xl border border-indigo-200">
                <p className="text-sm font-bold text-indigo-900 uppercase tracking-wider mb-2">Gu√≠a de pr√°ctica acompa√±ada</p>
                <ol className="list-decimal pl-5 text-sm text-indigo-900 space-y-1">
                  <li>Lean el objetivo y expliquen con sus palabras que quieren lograr.</li>
                  <li>Comparen el camino perezoso y el camino explorador.</li>
                  <li>Reescriban juntos un prompt propio tomando lo mejor del ejemplo.</li>
                  <li>Eval√∫en si la salida sirve de verdad para estudiar o para la vida diaria.</li>
                </ol>
              </div>

              {/* El Camino del Copiar y Pegar (MALO) */}
              <div className="space-y-3">
                <h4 className="font-bold text-red-700 flex items-center gap-2">
                  <XCircle className="w-5 h-5" /> El Camino del Perezoso ‚ùå
                </h4>
                <div className="bg-red-50 p-4 rounded-xl border border-red-100">
                  <p className="font-mono text-sm text-red-900 mb-3 bg-white p-2 rounded border border-red-200 shadow-inner">
                    {item.bad.prompt}
                  </p>
                  <p className="text-sm text-red-800 flex items-start gap-2">
                    <AlertCircle className="w-4 h-4 shrink-0 mt-0.5" />
                    {item.bad.reason}
                  </p>
                </div>
              </div>

              {/* El Camino del Explorador (BUENO) */}
              <div className="space-y-3">
                <h4 className={`font-bold flex items-center gap-2 ${isPrimary ? 'text-orange-600' : 'text-emerald-700'}`}>
                  <CheckCircle className="w-5 h-5" /> El Camino del Explorador ‚úÖ
                </h4>
                <div className={`${isPrimary ? 'bg-orange-50 border-orange-100' : 'bg-emerald-50 border-emerald-100'} p-4 rounded-xl border`}>

                  {item.good.steps.map((step, idx) => (
                    <div key={idx} className="mb-4 last:mb-0">
                      <p className={`text-sm font-bold mb-2 ${isPrimary ? 'text-orange-800' : 'text-emerald-800'}`}>
                        {step.title}
                      </p>
                      <p className="font-mono text-sm text-slate-800 mb-2 bg-white p-3 rounded-lg border border-slate-200 shadow-inner border-l-4 border-l-indigo-400">
                        "{step.prompt}"
                      </p>
                    </div>
                  ))}

                  <p className={`text-sm mt-4 pt-3 border-t flex items-start gap-2 ${isPrimary ? 'text-orange-800 border-orange-200' : 'text-emerald-800 border-emerald-200'}`}>
                    <Sparkles className="w-4 h-4 shrink-0 mt-0.5" />
                    <strong>Por qu√© funciona:</strong> {item.good.reason}
                  </p>
                </div>
              </div>

            </div>
          )}
        </div>
      );
    };


    const CompanionGuide = ({ guide, isPrimary }) => {
      if (!guide) return null;

      const accent = isPrimary ? 'orange' : 'emerald';

      return (
        <div className={`rounded-2xl border-2 shadow-sm overflow-hidden ${accent === 'orange' ? 'border-orange-200' : 'border-emerald-200'}`}>
            <div className={`${accent === 'orange' ? 'bg-orange-100' : 'bg-emerald-100'} px-5 py-4 border-b ${accent === 'orange' ? 'border-orange-200' : 'border-emerald-200'}`}>
              <h3 className="text-xl font-extrabold text-slate-800 flex items-center gap-2">
                <Users className={`w-5 h-5 ${accent === 'orange' ? 'text-orange-700' : 'text-emerald-700'}`} />
                Gu√≠a operativa
              </h3>
              <p className="text-slate-600 mt-1 text-sm">
                Bloque pensado para cuidadores familiares o profesionales.
              </p>
            </div>

            <div className="p-5 md:p-6 space-y-5 bg-slate-50">
              <div>
                <p className="text-xs uppercase tracking-wider text-slate-500 font-bold mb-2">Proposito del modulo</p>
                <p className="text-slate-800 font-medium">{guide.purpose}</p>
              </div>

              <div>
                <p className="text-xs uppercase tracking-wider text-slate-500 font-bold mb-2">Base teorica para guia</p>
                <p className="text-slate-700 leading-relaxed">{guide.theory}</p>
              </div>

              <div className="grid md:grid-cols-2 gap-4">
                <div className="bg-white rounded-xl border border-slate-200 p-4">
                  <p className="font-bold text-slate-700 mb-2">Que conviene decir</p>
                  <ul className="list-disc pl-5 text-sm text-slate-700 space-y-1">
                    {guide.phrases.map((item, idx) => <li key={idx}>{item}</li>)}
                  </ul>
                </div>
                <div className="bg-white rounded-xl border border-slate-200 p-4">
                  <p className="font-bold text-slate-700 mb-2">Errores frecuentes a evitar</p>
                  <ul className="list-disc pl-5 text-sm text-slate-700 space-y-1">
                    {guide.mistakes.map((item, idx) => <li key={idx}>{item}</li>)}
                  </ul>
                </div>
              </div>

              <div className="bg-white rounded-xl border border-slate-200 p-4">
                <p className="font-bold text-slate-700 mb-2">Preguntas de conversacion guiada</p>
                <div className="space-y-2 text-sm">
                  <p><strong>Antes:</strong> {guide.questions.before}</p>
                  <p><strong>Durante:</strong> {guide.questions.during}</p>
                  <p><strong>Despues:</strong> {guide.questions.after}</p>
                </div>
              </div>

              <div className="bg-white rounded-xl border border-slate-200 p-4">
                <p className="font-bold text-slate-700 mb-2">Aplicacion practica (5-10 min)</p>
                <p className="text-sm text-slate-700">{guide.practice}</p>
              </div>

              <div className="grid md:grid-cols-2 gap-4">
                <div className="bg-red-50 rounded-xl border border-red-200 p-4">
                  <p className="font-bold text-red-800 mb-2">Senales de alerta</p>
                  <ul className="list-disc pl-5 text-sm text-red-900 space-y-1">
                    {guide.alerts.map((item, idx) => <li key={idx}>{item}</li>)}
                  </ul>
                </div>
                <div className="bg-indigo-50 rounded-xl border border-indigo-200 p-4">
                  <p className="font-bold text-indigo-900 mb-2">Cierre breve</p>
                  <ul className="list-disc pl-5 text-sm text-indigo-900 space-y-1 mb-3">
                    {guide.closeSummary.map((item, idx) => <li key={idx}>{item}</li>)}
                  </ul>
                  <p className="text-sm text-indigo-900">
                    <strong>Acuerdo sugerido:</strong> {guide.agreement}
                  </p>
                </div>
              </div>
            </div>
        </div>
      );
    };


    // --- VISOR DE M√ìDULOS (Teor√≠a) ---
    // (Mantenemos el visor intacto)
    const ModuleViewer = ({ level, modules, currentIndex, setIndex }) => {
      const isPrimary = level === 'primary';
      const module = modules[currentIndex];
      const companionGuide = cuidadoresGuideData[level]?.[module.id];

      const [showExtended, setShowExtended] = useState(false);

      React.useEffect(() => {
        setShowExtended(false);
      }, [currentIndex]);

      const themeColor = isPrimary ? 'bg-orange-100 text-orange-900' : 'bg-emerald-100 text-emerald-900';
      const btnColor = isPrimary ? 'bg-orange-500 hover:bg-orange-600' : 'bg-emerald-600 hover:bg-emerald-700';

      return (
        <div className="flex flex-col md:flex-row gap-6">
          <div className="w-full md:w-1/4 bg-white rounded-xl shadow p-4 self-start sticky top-24">
            <h4 className="text-sm font-bold uppercase text-slate-400 mb-4 tracking-wider">M√≥dulos</h4>
            <div className="flex flex-row md:flex-col gap-2 overflow-x-auto pb-2 md:pb-0">
              {modules.map((m, idx) => (
                <button
                  key={m.id}
                  onClick={() => setIndex(idx)}
                  className={`flex items-center gap-2 p-2 rounded-lg text-left text-sm whitespace-nowrap md:whitespace-normal transition-colors
                ${currentIndex === idx ? themeColor + ' font-bold' : 'hover:bg-slate-100 text-slate-600'}`}
                >
                  {m.icon}
                  <span className="hidden md:inline">{m.title}</span>
                  <span className="md:hidden">{idx + 1}</span>
                </button>
              ))}
            </div>
          </div>

          <div className="w-full md:w-3/4 bg-white rounded-xl shadow-lg overflow-hidden animate-fade-in">
            <div className={`p-6 md:p-8 border-b-4 ${isPrimary ? 'border-orange-400' : 'border-emerald-500'}`}>
              <div className="flex items-center gap-3 mb-4">
                <div className={`p-3 rounded-full ${themeColor}`}>
                  {module.icon}
                </div>
                <h2 className="text-2xl md:text-3xl font-bold">{module.title}</h2>
              </div>
              <div className="prose max-w-none text-lg text-slate-700 leading-relaxed mb-6">
                <p>{module.theory}</p>
              </div>

              {module.extendedTheory && (
                <div className="mb-4">
                  <button
                    onClick={() => setShowExtended(!showExtended)}
                    className={`flex items-center justify-center gap-2 w-full md:w-auto px-6 py-3 rounded-xl font-bold text-white shadow-md hover:shadow-lg transition-all transform hover:-translate-y-1 ${isPrimary ? 'bg-orange-500 hover:bg-orange-600' : 'bg-emerald-600 hover:bg-emerald-700'}`}
                  >
                    {showExtended ? (
                      <>Ocultar detalles</>
                    ) : (
                      <><Search className="w-5 h-5" /> ¬°Quiero Aprender M√°s!</>
                    )}
                  </button>

                  {showExtended && (
                    <div className="mt-6 p-6 md:p-8 bg-slate-50 border-2 rounded-2xl animate-fade-in shadow-inner border-dashed border-slate-300">
                      {module.extendedTheory}
                    </div>
                  )}
                </div>
              )}
            </div>

            <div className="p-6 md:p-8 bg-slate-100">
              <h3 className="text-xl font-bold mb-6 flex items-center gap-2">
                <Sparkles className="text-indigo-500" />
                Zona Interactiva
              </h3>
              {companionGuide && (
                <div className="mb-6">
                  <CompanionGuide guide={companionGuide} isPrimary={isPrimary} />
                </div>
              )}
              <ActivityEngine activity={module.activity} isPrimary={isPrimary} />
            </div>

            <div className="p-4 bg-white border-t flex justify-between items-center">
              <button
                onClick={() => setIndex(Math.max(0, currentIndex - 1))}
                disabled={currentIndex === 0}
                className={`flex items-center gap-1 px-4 py-2 rounded font-medium ${currentIndex === 0 ? 'text-slate-300' : 'text-slate-600 hover:bg-slate-100'}`}
              >
                <ChevronLeft className="w-5 h-5" /> Anterior
              </button>
              <span className="text-sm text-slate-400">Paso {currentIndex + 1} de {modules.length}</span>
              <button
                onClick={() => setIndex(Math.min(modules.length - 1, currentIndex + 1))}
                disabled={currentIndex === modules.length - 1}
                className={`flex items-center gap-1 px-5 py-2 rounded font-medium text-white transition-colors ${currentIndex === modules.length - 1 ? 'opacity-50 cursor-not-allowed' : btnColor}`}
              >
                Siguiente <ChevronRight className="w-5 h-5" />
              </button>
            </div>
          </div>
        </div>
      );
    };

    // --- MOTOR DE ACTIVIDADES INTERACTIVAS ---

    const ActivityEngine = ({ activity, isPrimary }) => {
      const [completed, setCompleted] = useState(false);
      React.useEffect(() => { setCompleted(false); }, [activity]);

      switch (activity.type) {
        case 'sorting': return <SortingGame data={activity} onComplete={() => setCompleted(true)} />;
        case 'promptBuilder': return <PromptBuilder data={activity} onComplete={() => setCompleted(true)} />;
        case 'privacyGame': return <PrivacyGame data={activity} onComplete={() => setCompleted(true)} />;
        case 'scenarioChoice': return <ScenarioChoice data={activity} onComplete={() => setCompleted(true)} />;
        case 'quiz': return <Quiz data={activity} onComplete={() => setCompleted(true)} />;
        case 'promptIterative': return <PromptIterative data={activity} onComplete={() => setCompleted(true)} />;
        case 'deepfakeDetective': return <ScenarioChoice data={activity} onComplete={() => setCompleted(true)} />;
        case 'obfuscationTask': return <ObfuscationTask data={activity} onComplete={() => setCompleted(true)} />;
        default: return <div>Actividad en construcci√≥n...</div>;
      }
    };

    // --- COMPONENTES ESPEC√çFICOS DE ACTIVIDADES ---

    const SortingGame = ({ data, onComplete }) => {
      const [items, setItems] = useState(data.items.map(i => ({ ...i, status: 'idle' })));
      const [score, setScore] = useState(0);

      const handleGuess = (index, guessAI) => {
        const newItems = [...items];
        const isCorrect = newItems[index].isAI === guessAI;
        newItems[index].status = isCorrect ? 'correct' : 'wrong';
        setItems(newItems);
        if (isCorrect) setScore(s => s + 1);
        if (newItems.every(i => i.status === 'correct')) onComplete();
      };

      return (
        <div className="space-y-4">
          <p className="font-semibold text-lg">{data.question}</p>
          <div className="grid gap-3">
            {items.map((item, idx) => (
              <div key={idx} className={`p-4 rounded-lg border flex flex-col sm:flex-row items-center justify-between gap-4 transition-all
            ${item.status === 'correct' ? 'bg-green-100 border-green-300' : item.status === 'wrong' ? 'bg-red-100 border-red-300' : 'bg-white'}`}>
                <span className="font-medium">{item.text}</span>
                <div className="flex gap-2 shrink-0">
                  <button disabled={item.status === 'correct'} onClick={() => handleGuess(idx, true)} className="px-3 py-1 bg-indigo-100 hover:bg-indigo-200 text-indigo-800 rounded text-sm font-bold">Es IA</button>
                  <button disabled={item.status === 'correct'} onClick={() => handleGuess(idx, false)} className="px-3 py-1 bg-orange-100 hover:bg-orange-200 text-orange-800 rounded text-sm font-bold">Es Humano</button>
                </div>
              </div>
            ))}
          </div>
          {items.every(i => i.status === 'correct') && <SuccessMessage text="¬°Excelente! Sabes muy bien qu√© es capaz de hacer la IA." />}
        </div>
      );
    };

    const PromptBuilder = ({ data, onComplete }) => {
      const [char, setChar] = useState('');
      const [act, setAct] = useState('');
      const [style, setStyle] = useState('');

      const isDone = char && act && style;

      React.useEffect(() => {
        if (isDone) onComplete();
      }, [isDone, onComplete]);

      return (
        <div className="space-y-6">
          <p className="font-semibold text-lg">{data.question}</p>
          <div className="flex flex-wrap gap-4 items-center">
            <span className="font-bold text-slate-500">Imagina:</span>
            <select value={char} onChange={e => setChar(e.target.value)} className="p-2 border rounded-md shadow-sm bg-white">
              <option value="">(Elige un personaje)</option>
              {data.options.character.map(o => <option key={o} value={o}>{o}</option>)}
            </select>
            <select value={act} onChange={e => setAct(e.target.value)} className="p-2 border rounded-md shadow-sm bg-white">
              <option value="">(Elige una acci√≥n)</option>
              {data.options.action.map(o => <option key={o} value={o}>{o}</option>)}
            </select>
            <select value={style} onChange={e => setStyle(e.target.value)} className="p-2 border rounded-md shadow-sm bg-white">
              <option value="">(Elige un estilo)</option>
              {data.options.style.map(o => <option key={o} value={o}>{o}</option>)}
            </select>
          </div>

          {isDone && (
            <div className="p-6 bg-indigo-900 text-white rounded-xl text-center shadow-inner animate-fade-in mt-6">
              <p className="text-sm uppercase text-indigo-300 mb-2 tracking-wider">Tu Prompt Final</p>
              <p className="text-xl font-bold italic">"{char} {act} {style}"</p>
              <p className="mt-4 text-indigo-200 text-sm">¬°Imag√≠nate la imagen incre√≠ble que generar√≠a la IA con estos detalles!</p>
              <SuccessMessage text="¬°Genial! A√±adir detalles es el secreto." light />
            </div>
          )}
        </div>
      );
    };

    const PrivacyGame = ({ data, onComplete }) => {
      const [results, setResults] = useState({});

      const handleChoice = (idx, choice) => {
        const isCorrect = data.scenarios[idx].safe === choice;
        setResults({ ...results, [idx]: isCorrect });
        if (Object.keys(results).length + 1 === data.scenarios.length) {
          const allCorrect = Object.values({ ...results, [idx]: isCorrect }).every(v => v);
          if (allCorrect) onComplete();
        }
      };

      return (
        <div className="space-y-4">
          <p className="font-semibold text-lg">{data.question}</p>
          <div className="grid md:grid-cols-2 gap-4">
            {data.scenarios.map((sc, idx) => (
              <div key={idx} className={`p-4 rounded-xl border flex flex-col justify-between 
             ${results[idx] === true ? 'bg-green-50 border-green-200' : results[idx] === false ? 'bg-red-50 border-red-200' : 'bg-white'}`}>
                <p className="mb-4 font-medium">{sc.text}</p>
                <div className="flex gap-2">
                  <button onClick={() => handleChoice(idx, true)} className="flex-1 py-2 bg-green-100 hover:bg-green-200 text-green-800 rounded font-bold transition">Seguro</button>
                  <button onClick={() => handleChoice(idx, false)} className="flex-1 py-2 bg-red-100 hover:bg-red-200 text-red-800 rounded font-bold transition">Peligro</button>
                </div>
                {results[idx] === false && <p className="text-xs text-red-600 mt-2 flex items-center gap-1"><AlertCircle className="w-3 h-3" /> Intenta de nuevo</p>}
              </div>
            ))}
          </div>
          {Object.values(results).length === data.scenarios.length && Object.values(results).every(v => v) && (
            <SuccessMessage text="¬°Bien hecho! Eres un experto protegiendo tu identidad." />
          )}
        </div>
      );
    };

    const ScenarioChoice = ({ data, onComplete }) => {
      const [feedback, setFeedback] = useState(null);
      const [success, setSuccess] = useState(false);

      const handleClick = (choice) => {
        setFeedback({ text: choice.feedback, correct: choice.correct });
        if (choice.correct) {
          setSuccess(true);
          onComplete();
        }
      };

      return (
        <div className="space-y-6">
          <div className="p-4 bg-indigo-50 border-l-4 border-indigo-500 rounded-r-lg">
            <p className="font-semibold">{data.question}</p>
            {data.scenario && <p className="mt-2 text-slate-700 italic">"{data.scenario}"</p>}
          </div>

          <div className="space-y-3">
            {data.choices.map((c, idx) => (
              <button key={idx} onClick={() => handleClick(c)}
                className="w-full text-left p-4 rounded-lg border hover:bg-slate-50 transition hover:shadow-sm">
                {c.text}
              </button>
            ))}
          </div>

          {feedback && (
            <div className={`p-4 rounded-lg flex items-start gap-3 animate-fade-in ${feedback.correct ? 'bg-green-100 text-green-900' : 'bg-red-100 text-red-900'}`}>
              {feedback.correct ? <CheckCircle2 className="shrink-0 mt-0.5" /> : <AlertCircle className="shrink-0 mt-0.5" />}
              <p>{feedback.text}</p>
            </div>
          )}
        </div>
      );
    };

    const PromptIterative = ({ data, onComplete }) => {
      const [step, setStep] = useState(0);
      const [input, setInput] = useState('');

      const handleSubmit = (e) => {
        e.preventDefault();
        if (input.trim().length < 5) return;
        setInput('');
        if (step < data.steps.length - 1) {
          setStep(s => s + 1);
        } else {
          setStep(s => s + 1);
          onComplete();
        }
      };

      return (
        <div className="space-y-6">
          <div className="flex gap-2 mb-4">
            {data.steps.map((_, i) => (
              <div key={i} className={`h-2 flex-1 rounded-full ${i <= step ? 'bg-emerald-500' : 'bg-slate-200'}`} />
            ))}
          </div>

          {step < data.steps.length ? (
            <div className="bg-white p-6 rounded-xl border shadow-sm">
              <p className="font-bold text-lg mb-4 text-emerald-800">{data.steps[step].instruction}</p>
              <form onSubmit={handleSubmit} className="flex gap-2">
                <input
                  type="text"
                  value={input}
                  onChange={e => setInput(e.target.value)}
                  placeholder="Escribe tu prompt aqu√≠..."
                  className="flex-1 p-3 border rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none"
                />
                <button type="submit" className="bg-emerald-600 hover:bg-emerald-700 text-white px-6 rounded-lg font-bold">Enviar</button>
              </form>
              {step > 0 && <p className="mt-4 p-3 bg-emerald-50 text-emerald-700 rounded-lg text-sm border border-emerald-100">Feedback de la simulaci√≥n anterior: <em>{data.steps[step - 1].feedback}</em></p>}
            </div>
          ) : (
            <SuccessMessage text="¬°Dominaste la iteraci√≥n! Ahora sabes que el primer prompt rara vez es el mejor. Eres el arquitecto de la respuesta." />
          )}
        </div>
      );
    };

    const ObfuscationTask = ({ data, onComplete }) => {
      const [text, setText] = useState(data.text);
      const [done, setDone] = useState(false);

      const check = () => {
        const sensitive = ['Juan P√©rez', 'Calle Falsa 123', '4555-2222-1111-3333'];
        const isClean = sensitive.every(s => !text.includes(s));
        if (isClean) {
          setDone(true);
          onComplete();
        } else {
          alert("A√∫n quedan datos personales reales en el texto. ¬°C√°mbialos o b√≥rralos!");
        }
      };

      return (
        <div className="space-y-4">
          <p className="font-semibold text-lg">{data.question}</p>
          <div className="bg-slate-100 p-4 rounded-lg text-sm mb-2 font-mono text-slate-500">
            Texto original: {data.text}
          </div>
          <textarea
            className="w-full p-4 border rounded-lg focus:ring-2 focus:ring-emerald-500 min-h-[100px]"
            value={text}
            onChange={e => setText(e.target.value)}
          />
          {!done ? (
            <button onClick={check} className="bg-slate-800 text-white px-6 py-2 rounded-lg font-bold hover:bg-slate-700">Validar y Enviar a la IA</button>
          ) : (
            <SuccessMessage text="¬°Excelente ofuscaci√≥n! Tus datos est√°n seguros." />
          )}
        </div>
      );
    };

    const Quiz = ({ data, onComplete }) => {
      const [currentQ, setCurrentQ] = useState(0);
      const [score, setScore] = useState(0);
      const [showResult, setShowResult] = useState(false);

      const handleAnswer = (idx) => {
        if (idx === data.questions[currentQ].answer) setScore(s => s + 1);

        if (currentQ < data.questions.length - 1) {
          setCurrentQ(q => q + 1);
        } else {
          setShowResult(true);
          onComplete();
        }
      };

      if (showResult) {
        return (
          <div className="text-center space-y-4 p-6 bg-gradient-to-br from-indigo-50 to-purple-100 rounded-xl border border-indigo-200">
            <Sparkles className="w-16 h-16 text-indigo-500 mx-auto" />
            <h3 className="text-2xl font-bold text-indigo-900">¬°Evaluaci√≥n Completada!</h3>
            <p className="text-lg">Tu puntaje: {score} de {data.questions.length}</p>
            <p className="text-slate-600">Recuerda mantener siempre la mente abierta y cr√≠tica con las nuevas tecnolog√≠as.</p>
          </div>
        );
      }

      const q = data.questions[currentQ];

      return (
        <div className="space-y-6">
          <div className="flex justify-between text-sm font-bold text-slate-400 mb-2">
            <span>Pregunta {currentQ + 1} de {data.questions.length}</span>
          </div>
          <p className="text-xl font-medium">{q.q}</p>
          <div className="space-y-3">
            {q.options.map((opt, idx) => (
              <button key={idx} onClick={() => handleAnswer(idx)}
                className="w-full text-left p-4 rounded-lg border-2 border-slate-200 hover:border-indigo-400 hover:bg-indigo-50 transition font-medium">
                {opt}
              </button>
            ))}
          </div>
        </div>
      );
    };

    // Utils
    const SuccessMessage = ({ text, light }) => (
      <div className={`p-4 rounded-lg flex items-center gap-3 animate-fade-in mt-4 ${light ? 'bg-white/20 text-white' : 'bg-green-100 text-green-900 border border-green-200'}`}>
        <CheckCircle2 className="w-6 h-6 shrink-0" />
        <span className="font-bold">{text}</span>
      </div>
    );



    // Renderizar la app en el DOM
    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>

</html>
